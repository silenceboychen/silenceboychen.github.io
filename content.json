{"meta":{"title":"blog","subtitle":"morty's blog","description":"mortyçš„ä¸ªäººåšå®¢","author":"morty","url":"https://www.silenceboy.com","root":"/"},"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2021-09-27T07:27:40.433Z","updated":"2021-09-27T07:27:40.433Z","comments":false,"path":"/404.html","permalink":"https://www.silenceboy.com//404.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2021-09-27T07:27:40.457Z","updated":"2021-09-27T07:27:40.457Z","comments":true,"path":"links/index.html","permalink":"https://www.silenceboy.com/links/index.html","excerpt":"","text":""},{"title":"çˆ±","date":"2021-09-27T07:27:40.458Z","updated":"2021-09-27T07:27:40.458Z","comments":false,"path":"love/index.html","permalink":"https://www.silenceboy.com/love/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2021-09-27T07:27:40.458Z","updated":"2021-09-27T07:27:40.458Z","comments":false,"path":"tags/index.html","permalink":"https://www.silenceboy.com/tags/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2021-09-27T07:27:40.450Z","updated":"2021-09-27T07:27:40.450Z","comments":false,"path":"categories/index.html","permalink":"https://www.silenceboy.com/categories/index.html","excerpt":"","text":""},{"title":"å…³äºæˆ‘","date":"2021-09-27T07:27:40.450Z","updated":"2021-09-27T07:27:40.450Z","comments":false,"path":"about/index.html","permalink":"https://www.silenceboy.com/about/index.html","excerpt":"","text":"ç®€ä»‹ nodejså¼€å‘å·¥ç¨‹å¸ˆ 17839718588ï¼ˆå¾®ä¿¡åŒï¼‰ | chenhao_312@126.com https://github.com/silenceboychen åšå®¢ï¼š https://segmentfault.com/u/silenceboy/articles æ²³å—å¤§å­¦ | è½¯ä»¶å·¥ç¨‹ | æœ¬ç§‘ | 2012 - 2016 å·¥ä½œç»éªŒ: 4å¹´ æœŸæœ›èŒä½: nodejs åç«¯å¼€å‘å·¥ç¨‹å¸ˆ æœŸæœ›å·¥ä½œåœ°ç‚¹: æ­å· ç°å±…åœ°: æ·±åœ³ æŠ€èƒ½ 3å¹´+ nodejså¼€å‘ç»éªŒï¼Œç†Ÿç»ƒä½¿ç”¨nodejsæ¡†æ¶ï¼šexpress,koaã€‚æ­£åœ¨å­¦ä¹ æ¡†æ¶ï¼šnest.jsã€‚ ç†Ÿç»ƒä½¿ç”¨typescriptè¿›è¡Œé¡¹ç›®å¼€å‘ã€‚ ç†Ÿç»ƒæŒæ¡ MySQL çš„ä½¿ç”¨ï¼Œèƒ½å¤Ÿå†™å‡ºç¬¦åˆè¦æ±‚çš„ SQL è¯­å¥ï¼ŒæŒæ¡å¸¸è§çš„ SQL ä¼˜åŒ–ã€‚ åŸºäºLinuxå¼€å‘ï¼Œç†Ÿæ‚‰ Linux ç¯å¢ƒçš„ä½¿ç”¨ï¼ŒæŒæ¡å¸¸ç”¨çš„ Linux å‘½ä»¤ã€‚ ç†Ÿæ‚‰ Redis ç­‰ç¼“å­˜æŠ€æœ¯çš„ä½¿ç”¨ã€‚ ç†Ÿæ‚‰mongodbçš„åŸºæœ¬æŸ¥è¯¢ï¼ŒèšåˆæŸ¥è¯¢ã€‚ ç†Ÿç»ƒæŒæ¡ Git çš„ä½¿ç”¨ï¼Œå–„é•¿å¤šåˆ†æ”¯çš„ç®¡ç†ã€‚ ç†Ÿç»ƒä½¿ç”¨consul + grpcçš„å¾®æœåŠ¡å¼€å‘ã€‚ ç†Ÿæ‚‰ä½¿ç”¨dockeræ„å»ºé¡¹ç›®å¹¶è‡ªåŠ¨åŒ–æ‰“åŒ…å‘å¸ƒã€‚ å·¥ä½œç»éªŒæ·±åœ³ç‚¹çŒ«ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆ2015å¹´9æœˆ-2017å¹´5æœˆï¼‰ç¼–ç¨‹çŒ«å®˜ç½‘é¡¹ç›®åœ°å€ï¼šhttps://www.codemao.cn/ é¡¹ç›®æè¿°ï¼šåŸºäºå›¾å½¢åŒ–çš„å°‘å„¿ç¼–ç¨‹é¡¹ç›®ï¼Œåœ¨çº¿å­¦ç¼–ç¨‹ã€‚ è´£ä»»æè¿°ï¼š æ‹…ä»»åç«¯å¼€å‘ç»„ç»„é•¿ã€‚ å‚ä¸äº§å“åŠŸèƒ½è¯„å®¡ï¼Œæ•´ç†é¡¹ç›®éœ€æ±‚ï¼Œåˆ¶å®šå¼€å‘è®¡åˆ’å’Œæ–¹æ¡ˆï¼ŒæŠŠæ§é¡¹ç›®è¿›åº¦ã€‚ è´Ÿè´£åç«¯é¡¹ç›®æ¶æ„è®¾è®¡ï¼Œæ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ä»¥åŠå¤§éƒ¨åˆ†æ¥å£å¼€å‘ã€‚ é¡¹ç›®å†…æ¨å¹¿ä½¿ç”¨typescriptã€‚ ç›‘ç£é¡¹ç›®æˆå‘˜ä½¿ç”¨apidocæˆ–swaggerç¼–å†™æ¥å£æ–‡æ¡£ã€‚ è´Ÿè´£ç»´æŠ¤æœåŠ¡çš„æ­£å¸¸è®¿é—®ï¼Œæ•°æ®åº“çš„æ­£å¸¸è¿æ¥ã€‚ è´Ÿè´£é¡¹ç›®çš„dockeråŒ–ï¼Œç¼–å†™dockerfileå’Œdocker-compose.ymlã€‚ ä½¿ç”¨åˆ°çš„æŠ€èƒ½ï¼šnodejsï¼Œtypescriptï¼Œgitï¼Œ mysqlï¼Œ redisï¼Œ Linuxï¼Œ docker çŒ«è€ç¥–ç³»ç»Ÿé¡¹ç›®æè¿°ï¼š è¿™æ˜¯ä¸€ä¸ªå®æ—¶èŠå¤©ç³»ç»Ÿ,å®ç°ä¸€å¯¹ä¸€ï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šçš„èŠå¤©ã€‚ç”±æœ€åˆçš„äººå·¥æ‰‹åŠ¨èŠå¤©åˆ°æœ€åå®ç°äº†ç³»ç»Ÿè‡ªåŠ¨åŒ–çš„èŠå¤©ï¼ŒèŠ‚çœäº†å…¬å¸çš„äººåŠ›æˆæœ¬ã€‚è¿™ä¸ªç³»ç»Ÿå¤§è‡´ç»å†è¿‡å››æ¬¡æŠ€æœ¯é€‰å‹ä¸Šçš„è¿­ä»£ï¼Œwebsocket-&gt; å¾®ä¿¡å…¬ä¼—å· -&gt; ç½‘æ˜“äº‘ä¿¡ -&gt; èäº‘ã€‚ è´£ä»»æè¿°ï¼š é¡¹ç›®å”¯ä¸€æŠ€æœ¯è´Ÿè´£äººï¼Œè´Ÿè´£å‰åç«¯å¼€å‘ã€‚ å‚ä¸äº§å“åŠŸèƒ½è¯„å®¡ï¼Œåˆ¶å®šå¼€å‘è®¡åˆ’å’Œæ–¹æ¡ˆï¼ŒæŠŠæ§é¡¹ç›®è¿›åº¦ã€‚ åŸºäºå¾®ä¿¡å…¬ä¼—å·å¼€å‘ï¼Œæ‰“é€šå…¬ä¼—å·å’Œå¾®ä¿¡ç”¨æˆ·çš„å®æ—¶èŠå¤©ã€‚ æŠ€æœ¯è°ƒç ”ï¼Œæ ¹æ®åŠŸèƒ½éœ€æ±‚ï¼Œä»¥åŠç¨³å®šæ€§è¦æ±‚é€‰æ‹©åˆé€‚çš„ç¬¬ä¸‰æ–¹ä¸šåŠ¡ã€‚ ç¬¬ä¸‰æ–¹IMæœåŠ¡å¯¹æ¥ã€‚ è´Ÿè´£é¡¹ç›®åæœŸç»´æŠ¤ã€‚ è´Ÿè´£é¡¹ç›®çš„dockeråŒ–ï¼Œç¼–å†™dockerfileå’Œdocker-compose.ymlã€‚ ä½¿ç”¨åˆ°çš„æŠ€èƒ½ï¼šnodejsï¼Œå¾®ä¿¡å¼€å‘ï¼ŒWebSocketï¼Œ MySQLï¼Œ vueï¼Œ redisï¼Œ git, Linux ç¼–ç¨‹çŒ«APPé¡¹ç›®æè¿°ï¼šå®˜ç½‘å¯¹åº”çš„appç‰ˆæœ¬ï¼ˆåœ¨ç§»åŠ¨åŒ–å¦‚æ­¤æ™®åŠçš„ä»Šå¤©ï¼Œå½“ç„¶è¦åšappï¼‰ã€‚ è´£ä»»æè¿°ï¼š å‚ä¸äº§å“åŠŸèƒ½è¯„å®¡ï¼Œåˆ¶å®šå¼€å‘è®¡åˆ’å’Œæ–¹æ¡ˆï¼ŒæŠŠæ§é¡¹ç›®è¿›åº¦ã€‚ å°è£…ç¬¬ä¸‰æ–¹ç™»å½•æ¥å£ï¼Œæé«˜ä»£ç å¤ç”¨æ€§ã€‚ è´Ÿè´£é¡¹ç›®dockeråŒ–ã€‚ ä½¿ç”¨åˆ°çš„æŠ€èƒ½ï¼šnodejs, express, mysql, git, linux ä¸‡æ±‡äº’è”ï¼ˆæ·±åœ³ï¼‰ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆ2017å¹´5æœˆè‡³ä»Šï¼‰å…¬å¸å®˜ç½‘åœ°å€ï¼šhttps://www.followme.com/ é¡¹ç›®æè¿°ï¼šå¤–æ±‡äº¤æ˜“å¹³å°ï¼Œè‡ªä¸»ç ”å‘è·Ÿéšç³»ç»Ÿï¼Œå®ç°è‡ªä¸»è·Ÿéšä¸‹å•ï¼Œå¹³ä»“ç­‰åŠŸèƒ½ã€‚ è´£ä»»æè¿°ï¼š å‚ä¸äº§å“åŠŸèƒ½è¯„å®¡ï¼Œåˆ¶å®šå¼€å‘è®¡åˆ’å’Œæ–¹æ¡ˆã€‚ è´Ÿè´£å¹³å°å¤§éƒ¨åˆ†æ¥å£å¼€å‘ã€‚ ä½¿ç”¨rpcæŠ€æœ¯å®ç°å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶ä½¿ç”¨consulç®¡ç†å¾®æœåŠ¡ã€‚ è´Ÿè´£åç«¯æ‰€æœ‰nodejsé¡¹ç›®çš„dockeråŒ–ã€‚ å°è£…æ—¥å¿—ç³»ç»Ÿä»¥åŠrpcç›¸å…³æ–¹æ³•ï¼Œä¾›æ‰€æœ‰é¡¹ç›®ä½¿ç”¨ã€‚ è¾“å‡ºè¯¦ç»†çš„æ¥å£æ–‡æ¡£ã€‚ é¡¹ç›®æŒ‰ç…§dev-&gt;beta-&gt;productionçš„ä¸¥æ ¼è¦æ±‚å¼€å‘ã€æµ‹è¯•ã€ä¸Šçº¿ã€‚ éƒ¨é—¨å†…å¤šæ¬¡å¼€å±•æŠ€æœ¯åˆ†äº«ã€‚ ä½¿ç”¨åˆ°çš„æŠ€èƒ½ï¼šnodejsï¼Œ expressï¼Œ koaï¼Œ redisï¼Œ dockerï¼Œ consulï¼Œ grpcï¼Œ gitï¼Œ linux äº¤æ˜“é‡åŒ–é¡¹ç›®é¡¹ç›®æè¿°ï¼šè¯¥é¡¹ç›®æ˜¯å…¬å¸æœ€é‡è¦çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç”±æˆ‘å¸¦é¢†å›¢é˜Ÿè´Ÿè´£è¯¥é¡¹ç›®çš„å¼€å‘ã€‚è¯¥é¡¹ç›®ä¸å¯¹å¤–å…¬å¼€ï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨ä»¥åŠå‡ºå”®ç»™å…¶ä»–ä¼ä¸šä½¿ç”¨ï¼ŒåŸºäºç»çºªå•†çš„äº¤æ˜“æ•°æ®ï¼Œåˆ†æäº¤æ˜“è¡Œæƒ…ã€‚ç›®å‰åœ¨ç ”å‘2.1ç‰ˆæœ¬ï¼Œå”®ä»·åœ¨50ä¸‡å·¦å³ã€‚ è´£ä»»æè¿°ï¼š é¡¹ç›®éƒ¨å‰ç«¯è´Ÿè´£äººï¼Œè´Ÿè´£ç®¡ç†å›¢é˜Ÿï¼Œåˆç†åˆ†é…å·¥ä½œã€‚ å‚ä¸äº§å“åŠŸèƒ½è®¾è®¡å’Œè¯„å®¡ï¼Œåˆ¶å®šå¼€å‘è®¡åˆ’å’Œæ–¹æ¡ˆï¼Œå¹¶å¯¹åŠŸèƒ½è´¨é‡å’Œå¼€å‘è¿›åº¦è´Ÿè´£ã€‚ è´Ÿè´£é¡¹ç›®åç«¯æ¶æ„è®¾è®¡ï¼ŒæœåŠ¡ç«¯æ¥å£å¼€å‘ã€‚ è´Ÿè´£æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼Œä»¥åŠæ•°æ®åº“æ¨¡å‹æ­å»ºã€‚ è´Ÿè´£é¡¹ç›®dockeråŒ–ï¼Œé€šè¿‡docker-composeå®ç°ä¸€é”®éƒ¨ç½²ã€‚ è´Ÿè´£ä½¿ç”¨sqlè¯­å¥è¿›è¡Œç»Ÿè®¡å¹¶ä»¥å›¾è¡¨å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæ•°æ®é‡ä¸º400å¤šä¸‡ã€‚ ä½¿ç”¨åˆ°çš„æŠ€èƒ½ï¼šnodejsï¼Œkoaï¼Œmongodbï¼Œmysql, git, docker è‡ªæˆ‘è¯„ä»· çƒ­çˆ±è®¡ç®—æœºè¡Œä¸šï¼Œçƒ­çˆ±ç¼–ç¨‹ï¼Œè¿½æ±‚ä»£ç è´¨é‡ï¼Œä¸ç•æŒ‘æˆ˜ã€‚ æ±‚çŸ¥æ¬²å¼ºã€ä¸ºæ–°æŠ€æœ¯å’Œè‡ªæˆ‘æå‡è€Œè‡ªè±ªã€‚ è´£ä»»å¿ƒå¼ºï¼Œé«˜æ•ˆä¸”æœ‰è´¨é‡çš„å®Œæˆå·¥ä½œã€‚ å¯¹åŠ ç­çš„æ€åº¦ï¼š ä¸åŠ ç­æ˜¯èƒ½åŠ›é—®é¢˜ï¼ŒåŠ ç­æ˜¯æ€åº¦é—®é¢˜ï¼Œå½“èƒ½åŠ›ä¸è¡Œçš„æ—¶å€™ç”¨æ€åº¦æ¥å¼¥è¡¥ã€‚"},{"title":"ä¹¦å•","date":"2021-09-27T07:27:40.450Z","updated":"2021-09-27T07:27:40.450Z","comments":false,"path":"books/index.html","permalink":"https://www.silenceboy.com/books/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-09-27T07:27:40.458Z","updated":"2021-09-27T07:27:40.458Z","comments":false,"path":"repository/index.html","permalink":"https://www.silenceboy.com/repository/index.html","excerpt":"","text":""}],"posts":[{"title":"æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬","slug":"æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬","date":"2025-03-26T12:13:54.000Z","updated":"2025-03-26T12:14:19.122Z","comments":true,"path":"2025/03/26/æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬/","link":"","permalink":"https://www.silenceboy.com/2025/03/26/æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬/","excerpt":"","text":"åœ¨æœ¬åœ°ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬æ˜¯å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯å‡ ç§ä¸»æµä¸”é«˜æ•ˆçš„æ–¹æ³•ï¼Œé€‚ç”¨äºä¸åŒæ“ä½œç³»ç»Ÿï¼š ä¸€ã€ä½¿ç”¨ pyenvï¼ˆæ¨èç»™ macOS/Linux ç”¨æˆ·ï¼‰åŸç†ï¼šé€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡åŠ¨æ€åˆ‡æ¢ Python ç‰ˆæœ¬ï¼Œä¸ä¾èµ–ç³»ç»Ÿè‡ªå¸¦çš„ Pythonã€‚ 1. å®‰è£… pyenv1234567# ä½¿ç”¨å®‰è£…è„šæœ¬curl https://pyenv.run | bash# å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrcexport PATH=\"$HOME/.pyenv/bin:$PATH\"eval \"$(pyenv init -)\"eval \"$(pyenv virtualenv-init -)\" 2. å¸¸ç”¨å‘½ä»¤1234567891011121314151617# æŸ¥çœ‹å¯å®‰è£…ç‰ˆæœ¬pyenv install --list# å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ Python 3.9.6ï¼‰pyenv install 3.9.6# åˆ—å‡ºå·²å®‰è£…ç‰ˆæœ¬pyenv versions# è®¾ç½®å…¨å±€é»˜è®¤ç‰ˆæœ¬pyenv global 3.9.6# è®¾ç½®å½“å‰ç›®å½•çš„æœ¬åœ°ç‰ˆæœ¬ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰pyenv local 3.8.12# å¸è½½ç‰ˆæœ¬pyenv uninstall 3.7.0 äºŒã€ä½¿ç”¨ condaï¼ˆè·¨å¹³å°ï¼Œé€‚åˆç§‘å­¦è®¡ç®—åœºæ™¯ï¼‰åŸç†ï¼šé€šè¿‡è™šæ‹Ÿç¯å¢ƒç®¡ç† Python ç‰ˆæœ¬å’Œä¾èµ–ã€‚ 1. å®‰è£… Miniconda/Anacondaä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼šhttps://docs.conda.io/en/latest/miniconda.html 2. åˆ›å»ºä¸åŒ Python ç‰ˆæœ¬çš„ç¯å¢ƒ1234567891011121314# åˆ›å»ºåä¸º py38 çš„ç¯å¢ƒï¼ŒæŒ‡å®š Python 3.8conda create -n py38 python=3.8# æ¿€æ´»ç¯å¢ƒconda activate py38# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒconda env list# é€€å‡ºç¯å¢ƒconda deactivate# åˆ é™¤ç¯å¢ƒconda env remove -n py38 ä¸‰ã€ä½¿ç”¨ Dockerï¼ˆé€‚åˆéš”ç¦»å¼€å‘ç¯å¢ƒï¼‰é€šè¿‡å®¹å™¨åŒ–æŠ€æœ¯éš”ç¦»ä¸åŒé¡¹ç›®ç¯å¢ƒã€‚ ç¤ºä¾‹ Dockerfile12345FROM python:3.7-slimWORKDIR /appCOPY requirements.txt .RUN pip install -r requirements.txtCMD [\"python\", \"app.py\"] ä½¿ç”¨ä¸åŒé•œåƒç‰ˆæœ¬12# è¿è¡Œ Python 3.9 å®¹å™¨docker run -it --rm python:3.9-alpine python --version å››ã€Windows ç”¨æˆ·çš„æ›¿ä»£æ–¹æ¡ˆ pyenv-winï¼ˆç±»ä¼¼ Unix çš„ pyenvï¼‰ï¼š 123# å®‰è£…å‘½ä»¤Invoke-WebRequest -UseBasicParsing -Uri \"https://raw.githubusercontent.com/pyenv-win/pyenv-win/master/pyenv-win/install-pyenv-win.ps1\" -OutFile \"./install-pyenv-win.ps1\"&amp; \"./install-pyenv-win.ps1\" æ‰‹åŠ¨å®‰è£…å¤šä¸ªç‰ˆæœ¬ï¼š ä»å®˜ç½‘ä¸‹è½½ä¸åŒç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼ˆå¦‚ python-3.8.exe å’Œ python-3.10.exeï¼‰ å®‰è£…æ—¶å‹¾é€‰ â€œAdd to PATHâ€ï¼Œä½†é€šè¿‡ä¿®æ”¹å¯æ‰§è¡Œæ–‡ä»¶ååŒºåˆ†ç‰ˆæœ¬ï¼š12# å°† Python 3.8 çš„å¯æ‰§è¡Œæ–‡ä»¶é‡å‘½åmv /path/to/python3.8/python.exe /path/to/python3.8/python38.exe äº”ã€é€šç”¨æŠ€å·§ï¼šè™šæ‹Ÿç¯å¢ƒ + ç‰ˆæœ¬æŒ‡å®šå³ä½¿ä½¿ç”¨ç³»ç»Ÿ Pythonï¼Œä¹Ÿå¯é€šè¿‡ venv æˆ– virtualenv éš”ç¦»ç¯å¢ƒï¼š123456# ä½¿ç”¨ç‰¹å®š Python ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ/path/to/python3.9 -m venv myenv# æ¿€æ´»ç¯å¢ƒsource myenv/bin/activate # Linux/macOSmyenv\\Scripts\\activate.bat # Windows ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯¹æ¯” å·¥å…· é€‚ç”¨ç³»ç»Ÿ ç‰¹ç‚¹ pyenv macOS/Linux è½»é‡çº§ï¼Œçº¯å‘½ä»¤è¡Œæ“ä½œ conda è·¨å¹³å° é›†æˆåŒ…ç®¡ç†ï¼Œé€‚åˆç§‘å­¦è®¡ç®— Docker è·¨å¹³å° å®Œå…¨ç¯å¢ƒéš”ç¦»ï¼Œä½†éœ€å­¦ä¹ å®¹å™¨æŠ€æœ¯ æ‰‹åŠ¨ç®¡ç† æ‰€æœ‰ç³»ç»Ÿ çµæ´»æ€§é«˜ï¼Œä½†ç»´æŠ¤æˆæœ¬è¾ƒé«˜ é€‰æ‹©å·¥å…·æ—¶ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ pyenvï¼ˆUnixï¼‰æˆ– condaï¼ˆè·¨å¹³å°ï¼‰ä»¥ç®€åŒ–æ“ä½œã€‚","categories":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/tags/python/"}]},{"title":"pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ","slug":"pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ","date":"2025-03-21T04:50:53.000Z","updated":"2025-03-21T04:52:40.422Z","comments":true,"path":"2025/03/21/pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ/","link":"","permalink":"https://www.silenceboy.com/2025/03/21/pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ/","excerpt":"","text":"åœ¨Pythonå¼€å‘ä¸­ï¼Œæ‰‹åŠ¨ç»´æŠ¤requirements.txtæ–‡ä»¶å®¹æ˜“é—æ¼ä¾èµ–é¡¹ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œè®©ä¾èµ–ç®¡ç†æ›´é«˜æ•ˆã€‚ æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰å®ç°åŸç†ï¼š é€šè¿‡Shellå‡½æ•°å°è£…pipå‘½ä»¤ï¼Œåœ¨æ‰§è¡Œå®‰è£…åè‡ªåŠ¨æ›´æ–°requirementsæ–‡ä»¶ é…ç½®æ–¹æ³•ï¼ˆåœ¨.bashrc/.zshrcä¸­æ·»åŠ ï¼‰ï¼š 1234567pip() &#123; if [ \"$1\" = \"install\" ]; then command pip \"$@\" &amp;&amp; pip freeze --exclude-editable | grep -v '^#' &gt; requirements.txt else command pip \"$@\" fi&#125; ä½¿ç”¨ç¤ºä¾‹ï¼š12345678# å®‰è£…åŒ…å¹¶è‡ªåŠ¨è®°å½•pip install requests==2.26.0# å®‰è£…å¤šä¸ªåŒ…ï¼ˆæ”¯æŒæ‰€æœ‰pipå‚æ•°ï¼‰pip install django~=3.2.0 celery[redis]# å¼€å‘æ¨¡å¼å®‰è£…ï¼ˆä¸ä¼šè®°å½•åˆ°requirementsï¼‰pip install -e . æ–¹æ¡ˆç‰¹ç‚¹ï¼š âœ… é›¶ä¾èµ–ï¼Œçº¯Shellå®ç° ğŸ›¡ï¸ æ’é™¤-eå®‰è£…çš„æœ¬åœ°åŒ… ğŸ” è‡ªåŠ¨è¿‡æ»¤æ³¨é‡Šè¡Œ âš ï¸ æ³¨æ„ï¼šä¼šè¦†ç›–åŸæœ‰requirementsæ–‡ä»¶ æ–¹æ¡ˆäºŒï¼špip-autosaveå·¥å…·ï¼ˆä¸“ä¸šçº§è‡ªåŠ¨è®°å½•ï¼‰å®‰è£…ä½¿ç”¨ï¼š1pip install pip-autosave ä½¿ç”¨åœºæ™¯ï¼š12345678# åŸºç¡€ç”¨æ³•ï¼ˆè‡ªåŠ¨ç”Ÿæˆrequirements.txtï¼‰pip install requests --save# æŒ‡å®šä¿å­˜æ–‡ä»¶pip install pandas --save requirements-dev.txt# æ‰¹é‡å®‰è£…å¹¶è®°å½•pip install -r base-requirements.txt --save æ ¸å¿ƒåŠŸèƒ½ï¼š ğŸ“¦ å¢é‡æ›´æ–°æ¨¡å¼ï¼ˆä¿ç•™å·²æœ‰ä¾èµ–ï¼‰ ğŸ¯ æ™ºèƒ½ç‰ˆæœ¬é”å®šï¼ˆè®°å½•ç²¾ç¡®ç‰ˆæœ¬å·ï¼‰ ğŸ”„ æ”¯æŒå¤šç¯å¢ƒæ–‡ä»¶ï¼ˆdev/prodï¼‰ ğŸ“Š ç”Ÿæˆä¾èµ–å…³ç³»æ ‘å¯è§†åŒ–ï¼š1pip show pandas --save --tree æ–¹æ¡ˆä¸‰ï¼šç°ä»£é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆ1. Pipenvå·¥ä½œæµï¼š123456# å®‰è£…å¹¶è‡ªåŠ¨æ›´æ–°Pipfilepipenv install requestspipenv install --dev pytest# ç”Ÿæˆæ ‡å‡†requirementsæ–‡ä»¶pipenv requirements &gt; requirements.txt 2. Poetryé…ç½®ï¼š12345678910# pyproject.toml é…ç½®ç¤ºä¾‹[tool.poetry.dependencies]python = \"^3.8\"requests = &#123; version = \"*\", optional = true &#125;[tool.poetry.dev-dependencies]pytest = \"^6.2.5\"# å¯¼å‡ºrequirements.txtpoetry export -f requirements.txt --output requirements.txt 3. Hatchç¯å¢ƒç®¡ç†ï¼š12345# åˆ›å»ºå¸¦è‡ªåŠ¨ä¾èµ–è·Ÿè¸ªçš„ç¯å¢ƒhatch env create myenv# åœ¨ç¯å¢ƒä¸­å®‰è£…ä¾èµ–hatch run myenv pip install numpy ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ å·®å¼‚åŒ–ç‰ˆæœ¬è®°å½•ï¼š 12345# ç”Ÿäº§ä¾èµ–pip freeze --exclude-editable | grep -v 'pkg-resources==0.0.0' &gt; requirements.txt # å¼€å‘ä¾èµ–pip freeze --exclude-editable | grep -E '(pytest|coverage)' &gt; requirements-dev.txt ä¾èµ–æ ‘å¯è§†åŒ–æ£€æŸ¥ï¼š 1pipdeptree --exclude pip,pip-autosave,setuptools,wheel å®‰å…¨æ›´æ–°ç­–ç•¥ï¼š 12345# æŸ¥çœ‹è¿‡æ—¶ä¾èµ–pip list --outdated --format=columns # æ‰¹é‡æ›´æ–°å‘½ä»¤pip install $(pip list --outdated | awk 'NR&gt;2 &#123;print $1&#125;') --upgrade ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å¯¹æ¯” æ–¹æ¡ˆ é€‚ç”¨åœºæ™¯ ä¼˜åŠ¿ å±€é™æ€§ Shellåˆ«å å¿«é€ŸåŸå‹å¼€å‘ æ— éœ€å®‰è£…æ–°å·¥å…· åŠŸèƒ½æœ‰é™ï¼Œå¯èƒ½è¦†ç›–æ–‡ä»¶ pip-autosave ä¼ä¸šçº§é¡¹ç›® ç²¾ç»†æ§åˆ¶ï¼Œæ”¯æŒå¤šç¯å¢ƒ éœ€è¦é¢å¤–å®‰è£… Pipenv/Poetry é•¿æœŸç»´æŠ¤çš„å¤§å‹é¡¹ç›® å®Œæ•´ä¾èµ–è§£æï¼Œæ”¯æŒé”å®šæ–‡ä»¶ å­¦ä¹ æˆæœ¬è¾ƒé«˜ Hatch å¤šç¯å¢ƒå¤æ‚é…ç½® é›†æˆæµ‹è¯•å’Œæ„å»ºæµç¨‹ ç”Ÿæ€ç³»ç»Ÿè¾ƒæ–° å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆQï¼šå¦‚ä½•å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿä¾èµ–ï¼Ÿ12# ä½¿ç”¨å¹³å°æ ‡è®°pip install pywin32 --save; sys_platform == 'win32' Qï¼šå¦‚ä½•é¿å…å¼€å‘å·¥å…·æ±¡æŸ“ç”Ÿäº§ä¾èµ–ï¼Ÿ123456# ä½¿ç”¨åˆ†å±‚requirementsæ–‡ä»¶.â”œâ”€â”€ requirementsâ”‚ â”œâ”€â”€ base.txtâ”‚ â”œâ”€â”€ dev.txtâ”‚ â””â”€â”€ prod.txt Qï¼šä¾èµ–å†²çªè‡ªåŠ¨è§£å†³ç¤ºä¾‹ï¼š123# ä½¿ç”¨ç‰ˆæœ¬èŒƒå›´è¯­æ³•Django&gt;=3.2,&lt;4.0requests&gt;=2.25.1,!=2.28.0","categories":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/tags/python/"}]},{"title":"Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ","slug":"Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ","date":"2025-03-21T04:47:36.000Z","updated":"2025-03-21T04:49:00.909Z","comments":true,"path":"2025/03/21/Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ/","link":"","permalink":"https://www.silenceboy.com/2025/03/21/Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ/","excerpt":"","text":"å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿåœ¨Pythonå¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¾€å¾€ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“ã€‚å…¨å±€å®‰è£…çš„åŒ…å¯èƒ½å¯¼è‡´ç‰ˆæœ¬å†²çªï¼Œä¾‹å¦‚é¡¹ç›®Aéœ€è¦Django 3.2ï¼Œè€Œé¡¹ç›®Béœ€è¦Django 4.0ã€‚è™šæ‹Ÿç¯å¢ƒé€šè¿‡ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºéš”ç¦»çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå®Œç¾è§£å†³è¿™ä¸€éš¾é¢˜ã€‚ ä¸€ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ1. ä½¿ç”¨å†…ç½®venvæ¨¡å—12# é€‚ç”¨äºPython 3.3+ç‰ˆæœ¬python -m venv myenv # åˆ›å»ºåä¸ºmyenvçš„è™šæ‹Ÿç¯å¢ƒ 2. æŒ‡å®šPythonè§£é‡Šå™¨ç‰ˆæœ¬1python3.8 -m venv py38_env # ä½¿ç”¨ç‰¹å®šPythonç‰ˆæœ¬åˆ›å»º 3. ç›®å½•ç»“æ„è§£æ12345myenv/â”œâ”€â”€ bin/ # Unixæ¿€æ´»è„šæœ¬â”œâ”€â”€ Scripts/ # Windowsæ¿€æ´»è„šæœ¬â”œâ”€â”€ Lib/ # å®‰è£…çš„ç¬¬ä¸‰æ–¹åº“â””â”€â”€ pyvenv.cfg # ç¯å¢ƒé…ç½®æ–‡ä»¶ äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒWindowsç³»ç»Ÿ12myenv\\Scripts\\activate# å‘½ä»¤æç¤ºç¬¦æ˜¾ç¤º (myenv) C:\\&gt; macOS/Linuxç³»ç»Ÿ12source myenv/bin/activate# ç»ˆç«¯æç¤ºç¬¦æ˜¾ç¤º (myenv) $ éªŒè¯æ¿€æ´»çŠ¶æ€ï¼š12which python # Unixwhere python # Windows ä¸‰ã€ç®¡ç†é¡¹ç›®ä¾èµ–å®‰è£…ä¾èµ–åŒ…1pip install django==3.2.12 å¯¼å‡ºä¾èµ–æ¸…å•1pip freeze &gt; requirements.txt æ‰¹é‡å®‰è£…ä¾èµ–1pip install -r requirements.txt å››ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ12deactivate# å‘½ä»¤æç¤ºç¬¦æ¢å¤é»˜è®¤çŠ¶æ€ äº”ã€è¿›é˜¶æŠ€å·§ä¸å·¥å…·1. è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯” å·¥å…· ç‰¹ç‚¹ é€‚ç”¨åœºæ™¯ venv Pythonå†…ç½®ï¼Œè½»é‡çº§ ç®€å•é¡¹ç›® virtualenv æ”¯æŒPython 2/3 å…¼å®¹æ—§é¡¹ç›® pipenv æ•´åˆpip+è™šæ‹Ÿç¯å¢ƒ å¤æ‚ä¾èµ–ç®¡ç† poetry ä¾èµ–è§£æ+æ‰“åŒ…ä¸€ä½“åŒ– ä¸“ä¸šé¡¹ç›®å¼€å‘ 2. å¿«é€Ÿå¤åˆ¶ç¯å¢ƒ12345# åœ¨åŸç¯å¢ƒæ‰§è¡Œpip list --format=freeze &gt; requirements.txt# åœ¨æ–°ç¯å¢ƒæ‰§è¡Œpip install -r requirements.txt 3. ç¯å¢ƒé…ç½®åŠ é€Ÿ12python -m pip install pip --upgrade # å‡çº§pippip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple # å›½å†…é•œåƒæº å…­ã€æœ€ä½³å®è·µ é¡¹ç›®éš”ç¦»åŸåˆ™ï¼šæ¯ä¸ªç‹¬ç«‹é¡¹ç›®åˆ›å»ºä¸“å±è™šæ‹Ÿç¯å¢ƒ ç‰ˆæœ¬æ§åˆ¶ï¼šå°†requirements.txtåŠ å…¥Gitä»“åº“ï¼Œå¿½ç•¥è™šæ‹Ÿç¯å¢ƒç›®å½• 1234# .gitignoremyenv/venv/*.env/ å®šæœŸç»´æŠ¤ï¼š 12pip list --outdated # æ£€æŸ¥è¿‡æœŸåŒ…pip-autoremove # æ¸…ç†æ— ç”¨ä¾èµ– ç»“è¯­æŒæ¡è™šæ‹Ÿç¯å¢ƒæ˜¯Pythonå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚é€šè¿‡venvåˆ›å»ºéš”ç¦»ç¯å¢ƒï¼Œé…åˆrequirements.txtç®¡ç†ä¾èµ–ï¼Œèƒ½æœ‰æ•ˆé¿å…â€åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è¿è¡Œâ€çš„ç»å…¸é—®é¢˜ã€‚å»ºè®®ç«‹å³åœ¨æ‚¨çš„ä¸‹ä¸€ä¸ªPythoné¡¹ç›®ä¸­å®è·µè¿™äº›æŠ€å·§ï¼Œä½“éªŒæ›´å¹²å‡€çš„å¼€å‘ç¯å¢ƒï¼ æç¤ºï¼šåˆ é™¤è™šæ‹Ÿç¯å¢ƒåªéœ€åˆ é™¤å¯¹åº”ç›®å½•å³å¯ï¼Œä½†è¯·ç¡®ä¿å·²æ‰§è¡Œdeactivateé€€å‡ºç¯å¢ƒã€‚","categories":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/tags/python/"}]},{"title":"ASILç­‰çº§æ˜¯ä»€ä¹ˆ","slug":"ASILç­‰çº§æ˜¯ä»€ä¹ˆ","date":"2024-10-22T06:45:40.000Z","updated":"2024-10-22T06:46:23.432Z","comments":true,"path":"2024/10/22/ASILç­‰çº§æ˜¯ä»€ä¹ˆ/","link":"","permalink":"https://www.silenceboy.com/2024/10/22/ASILç­‰çº§æ˜¯ä»€ä¹ˆ/","excerpt":"","text":"ASILï¼ˆAutomotive Safety Integrity Levelï¼Œæ±½è½¦å®‰å…¨å®Œæ•´æ€§ç­‰çº§ï¼‰æ˜¯ISO 26262æ ‡å‡†ä¸­å®šä¹‰çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºè¯„ä¼°å’Œåˆ†ç±»æ±½è½¦ç”µå­ç³»ç»Ÿä¸­æ½œåœ¨æ•…éšœå¯¹å®‰å…¨çš„å½±å“ã€‚ASILç­‰çº§ä»Aåˆ°Dï¼Œå…±åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼Œå…¶ä¸­ASIL Dè¡¨ç¤ºæœ€é«˜çš„å®‰å…¨è¦æ±‚ï¼ŒASIL Aè¡¨ç¤ºæœ€ä½çš„å®‰å…¨è¦æ±‚ã€‚ ASILç­‰çº§çš„å®šä¹‰ASILç­‰çº§åŸºäºä¸‰ä¸ªä¸»è¦å› ç´ æ¥ç¡®å®šï¼š ä¸¥é‡æ€§ï¼ˆSeverity, Sï¼‰ï¼šæ•…éšœå¯¼è‡´çš„æ½œåœ¨ä¼¤å®³çš„ä¸¥é‡ç¨‹åº¦ã€‚ æš´éœ²ç‡ï¼ˆExposure, Eï¼‰ï¼šé©¾é©¶å‘˜æˆ–ä¹˜å®¢æš´éœ²äºæ½œåœ¨æ•…éšœçš„é¢‘ç‡ã€‚ å¯æ§æ€§ï¼ˆControllability, Cï¼‰ï¼šé©¾é©¶å‘˜æˆ–ä¹˜å®¢åœ¨æ•…éšœå‘ç”Ÿæ—¶æ§åˆ¶è½¦è¾†çš„èƒ½åŠ›ã€‚ ASILç­‰çº§çš„åˆ’åˆ†æ ¹æ®ä¸Šè¿°ä¸‰ä¸ªå› ç´ çš„ç»„åˆï¼ŒASILç­‰çº§å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ä¸ªçº§åˆ«ï¼š ASIL Aï¼šæœ€ä½çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“è¾ƒå°ã€æš´éœ²ç‡ä½ä¸”å¯æ§æ€§é«˜çš„æƒ…å†µã€‚ ASIL Bï¼šä¸­ç­‰å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“ä¸­ç­‰ã€æš´éœ²ç‡ä¸­ç­‰ä¸”å¯æ§æ€§ä¸€èˆ¬çš„æƒ…å†µã€‚ ASIL Cï¼šè¾ƒé«˜çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“è¾ƒå¤§ã€æš´éœ²ç‡è¾ƒé«˜ä¸”å¯æ§æ€§è¾ƒä½çš„æƒ…å†µã€‚ ASIL Dï¼šæœ€é«˜çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“éå¸¸å¤§ã€æš´éœ²ç‡éå¸¸é«˜ä¸”å‡ ä¹ä¸å¯æ§çš„æƒ…å†µã€‚ ASILç­‰çº§çš„ç¡®å®šASILç­‰çº§çš„ç¡®å®šé€šå¸¸é€šè¿‡ä¸€ä¸ªé£é™©è¯„ä¼°çŸ©é˜µæ¥å®Œæˆï¼Œè¯¥çŸ©é˜µç»¼åˆè€ƒè™‘ä¸¥é‡æ€§ã€æš´éœ²ç‡å’Œå¯æ§æ€§ä¸‰ä¸ªå› ç´ ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹çŸ©é˜µï¼š ä¸¥é‡æ€§/æš´éœ²ç‡/å¯æ§æ€§ E1ï¼ˆä½ï¼‰ E2ï¼ˆä¸­ä½ï¼‰ E3ï¼ˆä¸­é«˜ï¼‰ E4ï¼ˆé«˜ï¼‰ S1ï¼ˆä½ï¼‰ QM QM ASIL A ASIL A S2ï¼ˆä¸­ï¼‰ QM ASIL A ASIL B ASIL B S3ï¼ˆé«˜ï¼‰ ASIL A ASIL B ASIL C ASIL D S4ï¼ˆæé«˜ï¼‰ ASIL B ASIL C ASIL D ASIL D æ³¨ï¼šQMï¼ˆQuality Managementï¼‰è¡¨ç¤ºä¸éœ€è¦ç‰¹åˆ«çš„å®‰å…¨æªæ–½ï¼Œåªéœ€æŒ‰ç…§è´¨é‡ç®¡ç†æ ‡å‡†è¿›è¡Œå¤„ç†ã€‚ ASILç­‰çº§çš„åº”ç”¨åœ¨æ±½è½¦ç”µå­ç³»ç»Ÿçš„è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¡®å®šASILç­‰çº§æ˜¯ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§çš„å…³é”®æ­¥éª¤ã€‚ä¸åŒçš„ASILç­‰çº§å¯¹åº”ä¸åŒçš„å¼€å‘æµç¨‹å’ŒéªŒè¯è¦æ±‚ï¼š ASIL Aï¼šåŸºæœ¬çš„å®‰å…¨æªæ–½å’ŒéªŒè¯ã€‚ ASIL Bï¼šéœ€è¦æ›´ä¸¥æ ¼çš„è®¾è®¡å’Œæµ‹è¯•æµç¨‹ã€‚ ASIL Cï¼šéœ€è¦é«˜çº§çš„å®‰å…¨åˆ†æå’ŒéªŒè¯æŠ€æœ¯ã€‚ ASIL Dï¼šéœ€è¦æœ€é«˜çº§åˆ«çš„å®‰å…¨æªæ–½ã€å†—ä½™è®¾è®¡å’Œå…¨é¢çš„éªŒè¯ã€‚ æ€»ç»“ASILç­‰çº§æ˜¯è¯„ä¼°å’Œç®¡ç†æ±½è½¦ç”µå­ç³»ç»Ÿå®‰å…¨æ€§çš„å…³é”®å·¥å…·ã€‚é€šè¿‡ç¡®å®šç³»ç»Ÿçš„ASILç­‰çº§ï¼Œå¼€å‘äººå‘˜å¯ä»¥é‡‡å–é€‚å½“çš„è®¾è®¡å’ŒéªŒè¯æªæ–½ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿåœ¨å„ç§å¯èƒ½çš„æ•…éšœæƒ…å†µä¸‹éƒ½èƒ½ä¿æŒå®‰å…¨æ€§ã€‚ISO 26262æ ‡å‡†æä¾›äº†è¯¦ç»†çš„æŒ‡å—å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘äººå‘˜åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å®ç°å’Œç»´æŠ¤æ‰€éœ€çš„å®‰å…¨å®Œæ•´æ€§ç­‰çº§ã€‚","categories":[{"name":"ASIL","slug":"ASIL","permalink":"https://www.silenceboy.com/categories/ASIL/"}],"tags":[{"name":"ASIL","slug":"ASIL","permalink":"https://www.silenceboy.com/tags/ASIL/"}]},{"title":"SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ","slug":"SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ","date":"2024-10-21T06:25:57.000Z","updated":"2024-10-21T06:26:19.127Z","comments":true,"path":"2024/10/21/SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ/","link":"","permalink":"https://www.silenceboy.com/2024/10/21/SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ/","excerpt":"","text":"é™¤äº†Ræ ¸ï¼ˆå®æ—¶æ ¸å¿ƒï¼‰å’ŒAæ ¸ï¼ˆåº”ç”¨æ ¸å¿ƒï¼‰ï¼Œåœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoCï¼‰è®¾è®¡ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªæœ‰ç‰¹å®šçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ ¸å¿ƒç±»å‹ï¼š Mæ ¸ï¼ˆMicrocontroller Coreï¼‰Mæ ¸é€šå¸¸æŒ‡çš„æ˜¯å¾®æ§åˆ¶å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºä½åŠŸè€—ã€ä½æˆæœ¬çš„åµŒå…¥å¼ç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯Mæ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š ä½åŠŸè€—ï¼šè®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘åŠŸè€—ï¼Œé€‚åˆç”µæ± ä¾›ç”µçš„è®¾å¤‡ã€‚ ç®€å•æ¶æ„ï¼šé€šå¸¸å…·æœ‰è¾ƒç®€å•çš„æŒ‡ä»¤é›†å’Œæ¶æ„ï¼Œæ˜“äºç¼–ç¨‹å’Œè°ƒè¯•ã€‚ é›†æˆå¤–è®¾ï¼šé€šå¸¸é›†æˆäº†ä¸°å¯Œçš„å¤–è®¾æ¥å£ï¼Œå¦‚ADCã€DACã€UARTã€I2Cã€SPIç­‰ã€‚ å®æ—¶æ€§ï¼šè™½ç„¶ä¸å¦‚Ræ ¸é‚£æ ·ä¸¥æ ¼ï¼Œä½†ä¹Ÿèƒ½å¤„ç†ä¸€äº›å®æ—¶ä»»åŠ¡ã€‚ åº”ç”¨åœºæ™¯ å®¶ç”¨ç”µå™¨ ä¼ æ„Ÿå™¨èŠ‚ç‚¹ ç®€å•æ§åˆ¶ç³»ç»Ÿ ç‰©è”ç½‘è®¾å¤‡ NPUï¼ˆNeural Processing Unitï¼‰NPUæ˜¯ç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼Œä¸“é—¨ç”¨äºåŠ é€Ÿæ·±åº¦å­¦ä¹ å’Œäººå·¥æ™ºèƒ½ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯NPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š é«˜æ•ˆè®¡ç®—ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºçŸ©é˜µè¿ç®—å’Œå·ç§¯æ“ä½œï¼Œé€‚åˆæ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ¨ç†å’Œè®­ç»ƒã€‚ å¹¶è¡Œå¤„ç†ï¼šå…·æœ‰é«˜åº¦å¹¶è¡Œçš„è®¡ç®—èƒ½åŠ›ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡æ•°æ®ã€‚ ä½åŠŸè€—ï¼šç›¸å¯¹äºé€šç”¨å¤„ç†å™¨ï¼ŒNPUåœ¨æ‰§è¡ŒAIä»»åŠ¡æ—¶å…·æœ‰æ›´é«˜çš„èƒ½æ•ˆæ¯”ã€‚ åº”ç”¨åœºæ™¯ å›¾åƒå’Œè§†é¢‘å¤„ç† è¯­éŸ³è¯†åˆ« è‡ªç„¶è¯­è¨€å¤„ç† è‡ªåŠ¨é©¾é©¶ DSPï¼ˆDigital Signal Processorï¼‰DSPæ˜¯æ•°å­—ä¿¡å·å¤„ç†å™¨ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ•°å­—ä¿¡å·ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘å’Œé€šä¿¡ä¿¡å·ã€‚ä»¥ä¸‹æ˜¯DSPçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š é«˜æ•ˆä¿¡å·å¤„ç†ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰ã€æ»¤æ³¢å’Œå…¶ä»–ä¿¡å·å¤„ç†ç®—æ³•ã€‚ å®æ—¶å¤„ç†ï¼šèƒ½å¤Ÿå®æ—¶å¤„ç†è¾“å…¥ä¿¡å·ï¼Œé€‚åˆå®æ—¶éŸ³é¢‘å’Œè§†é¢‘å¤„ç†ã€‚ ä½å»¶è¿Ÿï¼šè®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘å¤„ç†å»¶è¿Ÿï¼Œç¡®ä¿ä¿¡å·å¤„ç†çš„å®æ—¶æ€§ã€‚ åº”ç”¨åœºæ™¯ éŸ³é¢‘å¤„ç†ï¼ˆå¦‚å›å£°æ¶ˆé™¤ã€é™å™ªï¼‰ è§†é¢‘å¤„ç†ï¼ˆå¦‚ç¼–ç ã€è§£ç ï¼‰ é€šä¿¡ç³»ç»Ÿï¼ˆå¦‚è°ƒåˆ¶ã€è§£è°ƒï¼‰ é›·è¾¾å’Œå£°çº³ GPUï¼ˆGraphics Processing Unitï¼‰GPUæ˜¯å›¾å½¢å¤„ç†å•å…ƒï¼Œä¸»è¦ç”¨äºå›¾å½¢æ¸²æŸ“å’Œè®¡ç®—åŠ é€Ÿã€‚ä»¥ä¸‹æ˜¯GPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š é«˜å¹¶è¡Œæ€§ï¼šå…·æœ‰å¤§é‡å¹¶è¡Œå¤„ç†å•å…ƒï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡æ•°æ®ã€‚ å›¾å½¢æ¸²æŸ“ï¼šä¸“é—¨ç”¨äºå¤„ç†å›¾å½¢æ¸²æŸ“ä»»åŠ¡ï¼Œå¦‚3Då›¾å½¢ã€æ¸¸æˆå›¾å½¢ç­‰ã€‚ é€šç”¨è®¡ç®—ï¼šè¿‘å¹´æ¥ï¼ŒGPUä¹Ÿè¢«å¹¿æ³›ç”¨äºé€šç”¨è®¡ç®—ï¼ˆGPGPUï¼‰ï¼Œå¦‚ç§‘å­¦è®¡ç®—ã€æœºå™¨å­¦ä¹ ç­‰ã€‚ åº”ç”¨åœºæ™¯ æ¸¸æˆå’Œå¨±ä¹ å›¾å½¢è®¾è®¡å’Œæ¸²æŸ“ ç§‘å­¦è®¡ç®— æ·±åº¦å­¦ä¹  VPUï¼ˆVision Processing Unitï¼‰VPUæ˜¯è§†è§‰å¤„ç†å•å…ƒï¼Œä¸“é—¨ç”¨äºå¤„ç†è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯VPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š ä¼˜åŒ–è§†è§‰ä»»åŠ¡ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºå›¾åƒå’Œè§†é¢‘å¤„ç†ä»»åŠ¡ï¼Œå¦‚å¯¹è±¡æ£€æµ‹ã€å›¾åƒè¯†åˆ«ç­‰ã€‚ é«˜æ•ˆèƒ½æ•ˆæ¯”ï¼šåœ¨å¤„ç†è§†è§‰ä»»åŠ¡æ—¶å…·æœ‰é«˜æ•ˆçš„èƒ½æ•ˆæ¯”ã€‚ å®æ—¶å¤„ç†ï¼šèƒ½å¤Ÿå®æ—¶å¤„ç†å›¾åƒå’Œè§†é¢‘æ•°æ®ï¼Œé€‚åˆå®æ—¶åº”ç”¨ã€‚ åº”ç”¨åœºæ™¯ è®¡ç®—æœºè§†è§‰ å¢å¼ºç°å®ï¼ˆARï¼‰å’Œè™šæ‹Ÿç°å®ï¼ˆVRï¼‰ è‡ªåŠ¨é©¾é©¶ å®‰å…¨ç›‘æ§ æ€»ç»“åœ¨ç°ä»£SoCè®¾è®¡ä¸­ï¼Œé™¤äº†Ræ ¸å’ŒAæ ¸ï¼Œè¿˜æœ‰å¤šç§ç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå¦‚Mæ ¸ã€NPUã€DSPã€GPUå’ŒVPUç­‰ã€‚æ¯ç§æ ¸å¿ƒéƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œä¼˜åŠ¿ï¼Œé€šè¿‡ç»„åˆä½¿ç”¨è¿™äº›æ ¸å¿ƒï¼ŒSoCèƒ½å¤Ÿåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šå®ç°å¤šç§åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚","categories":[{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/categories/SoC/"}],"tags":[{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/tags/SoC/"}]},{"title":"SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«","slug":"SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«","date":"2024-10-21T06:22:57.000Z","updated":"2024-10-21T06:23:53.596Z","comments":true,"path":"2024/10/21/SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«/","link":"","permalink":"https://www.silenceboy.com/2024/10/21/SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«/","excerpt":"","text":"åœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoC, System on Chipï¼‰è®¾è®¡ä¸­ï¼ŒRæ ¸å’ŒAæ ¸æ˜¯æŒ‡ä¸åŒç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªå…·æœ‰ä¸åŒçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚ Ræ ¸ï¼ˆReal-time Coreï¼‰Ræ ¸é€šå¸¸æŒ‡çš„æ˜¯å®æ—¶å¤„ç†å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºå¤„ç†å®æ—¶ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯Ræ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š å®æ—¶æ€§ï¼šRæ ¸è®¾è®¡ç”¨äºå¤„ç†éœ€è¦ä¸¥æ ¼æ—¶é—´çº¦æŸçš„ä»»åŠ¡ï¼Œç¡®ä¿ä»»åŠ¡åœ¨è§„å®šæ—¶é—´å†…å®Œæˆã€‚ ç¡®å®šæ€§ï¼šRæ ¸é€šå¸¸å…·æœ‰ç¡®å®šçš„å“åº”æ—¶é—´ï¼Œé€‚åˆç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ã€‚ ä½å»¶è¿Ÿï¼šRæ ¸çš„è®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘å¤„ç†å»¶è¿Ÿï¼Œä»¥ç¡®ä¿å¿«é€Ÿå“åº”å¤–éƒ¨äº‹ä»¶ã€‚ ä½åŠŸè€—ï¼šRæ ¸é€šå¸¸åŠŸè€—è¾ƒä½ï¼Œé€‚åˆç”¨äºç”µæ± ä¾›ç”µçš„åµŒå…¥å¼è®¾å¤‡ã€‚ åº”ç”¨åœºæ™¯ å·¥ä¸šè‡ªåŠ¨åŒ–æ§åˆ¶ æ±½è½¦ç”µå­ï¼ˆå¦‚å¼•æ“æ§åˆ¶å•å…ƒï¼‰ åŒ»ç–—è®¾å¤‡ ç‰©è”ç½‘è®¾å¤‡ Aæ ¸ï¼ˆApplication Coreï¼‰Aæ ¸é€šå¸¸æŒ‡çš„æ˜¯åº”ç”¨å¤„ç†å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºè¿è¡Œå¤æ‚çš„åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯Aæ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š é«˜æ€§èƒ½ï¼šAæ ¸è®¾è®¡ç”¨äºå¤„ç†å¤æ‚è®¡ç®—ä»»åŠ¡ï¼Œå…·æœ‰è¾ƒé«˜çš„å¤„ç†èƒ½åŠ›ã€‚ å¤šä»»åŠ¡å¤„ç†ï¼šAæ ¸é€šå¸¸æ”¯æŒå¤šä»»åŠ¡å¤„ç†ï¼Œèƒ½å¤Ÿè¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚Linuxã€Androidï¼‰ã€‚ ä¸°å¯Œçš„å¤–è®¾æ”¯æŒï¼šAæ ¸é€šå¸¸é›†æˆäº†ä¸°å¯Œçš„å¤–è®¾æ¥å£ï¼Œå¦‚USBã€HDMIã€ä»¥å¤ªç½‘ç­‰ã€‚ è¾ƒé«˜åŠŸè€—ï¼šç”±äºéœ€è¦å¤„ç†å¤æ‚ä»»åŠ¡ï¼ŒAæ ¸çš„åŠŸè€—é€šå¸¸è¾ƒé«˜ã€‚ åº”ç”¨åœºæ™¯ æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘ ä¸ªäººè®¡ç®—æœº å¤šåª’ä½“è®¾å¤‡ï¼ˆå¦‚æ™ºèƒ½ç”µè§†å’Œæœºé¡¶ç›’ï¼‰ é«˜çº§åµŒå…¥å¼ç³»ç»Ÿï¼ˆå¦‚æ— äººæœºå’Œæœºå™¨äººï¼‰ ä¾‹å­ï¼šARM Cortex ç³»åˆ—åœ¨ARMçš„Cortexç³»åˆ—å¤„ç†å™¨ä¸­ï¼ŒRæ ¸å’ŒAæ ¸çš„åŒºåˆ«éå¸¸æ˜æ˜¾ï¼š Cortex-R ç³»åˆ—ï¼šè¿™æ˜¯ARMçš„å®æ—¶å¤„ç†å™¨ç³»åˆ—ï¼Œè®¾è®¡ç”¨äºé«˜å¯é æ€§å’Œå®æ—¶æ€§åº”ç”¨ï¼Œå¦‚Cortex-R5å’ŒCortex-R8ã€‚ Cortex-A ç³»åˆ—ï¼šè¿™æ˜¯ARMçš„åº”ç”¨å¤„ç†å™¨ç³»åˆ—ï¼Œè®¾è®¡ç”¨äºé«˜æ€§èƒ½å’Œå¤æ‚åº”ç”¨ï¼Œå¦‚Cortex-A53ã€Cortex-A72ç­‰ã€‚ SoCä¸­çš„ç»„åˆåœ¨è®¸å¤šSoCè®¾è®¡ä¸­ï¼ŒRæ ¸å’ŒAæ ¸å¸¸å¸¸è¢«ç»„åˆä½¿ç”¨ï¼Œä»¥ä¾¿åŒæ—¶æ»¡è¶³å®æ—¶å¤„ç†å’Œé«˜æ€§èƒ½è®¡ç®—çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š æ™ºèƒ½æ‰‹æœºSoCï¼šé€šå¸¸åŒ…å«å¤šä¸ªCortex-Aç³»åˆ—æ ¸å¿ƒç”¨äºè¿è¡Œæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼ŒåŒæ—¶å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªCortex-Rç³»åˆ—æ ¸å¿ƒç”¨äºå¤„ç†å®æ—¶ä»»åŠ¡ï¼Œå¦‚åŸºå¸¦å¤„ç†ã€‚ æ±½è½¦ç”µå­SoCï¼šå¯èƒ½åŒ…å«Cortex-Rç³»åˆ—æ ¸å¿ƒç”¨äºå¼•æ“æ§åˆ¶å’Œå®‰å…¨ç³»ç»Ÿï¼ŒåŒæ—¶åŒ…å«Cortex-Aç³»åˆ—æ ¸å¿ƒç”¨äºä¿¡æ¯å¨±ä¹ç³»ç»Ÿã€‚ æ€»ç»“ Ræ ¸ï¼ˆReal-time Coreï¼‰ï¼šç”¨äºå®æ—¶ä»»åŠ¡ï¼Œå¼ºè°ƒä½å»¶è¿Ÿå’Œç¡®å®šæ€§ï¼Œé€‚åˆå·¥ä¸šæ§åˆ¶ã€æ±½è½¦ç”µå­ç­‰é¢†åŸŸã€‚ Aæ ¸ï¼ˆApplication Coreï¼‰ï¼šç”¨äºè¿è¡Œå¤æ‚åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿï¼Œå¼ºè°ƒé«˜æ€§èƒ½å’Œå¤šä»»åŠ¡å¤„ç†ï¼Œé€‚åˆæ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç”µè„‘ç­‰è®¾å¤‡ã€‚ é€šè¿‡ç»“åˆä½¿ç”¨Ræ ¸å’ŒAæ ¸ï¼ŒSoCèƒ½å¤Ÿåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šå®ç°å¤šç§åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚","categories":[{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/categories/SoC/"}],"tags":[{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/tags/SoC/"}]},{"title":"dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ","slug":"dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ","date":"2024-06-28T07:22:18.000Z","updated":"2024-06-28T07:23:01.137Z","comments":true,"path":"2024/06/28/dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ/","link":"","permalink":"https://www.silenceboy.com/2024/06/28/dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ/","excerpt":"","text":"å¦‚æœä½ åœ¨ Docker å®¹å™¨ä¸­é»˜è®¤ç”¨æˆ·æ˜¯ devï¼Œä½†ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œ sudo æ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š æ–¹æ³•ä¸€ï¼šä»¥ root ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨ä½ å¯ä»¥ä»¥ root ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç„¶åæ›´æ”¹ dev ç”¨æˆ·çš„å¯†ç æˆ–è€…ç›´æ¥æ‰§è¡Œä½ éœ€è¦çš„æ“ä½œã€‚ 1docker exec -u root -it &lt;container_id_or_name&gt; /bin/bash æ–¹æ³•äºŒï¼šä¿®æ”¹ Dockerfile é‡æ–°æ„å»ºé•œåƒå¦‚æœä½ æœ‰ Dockerfileï¼Œå¯ä»¥ä¿®æ”¹ Dockerfile æ¥è®¾ç½® dev ç”¨æˆ·çš„å¯†ç æˆ–è€…ç›´æ¥ä½¿ç”¨ root ç”¨æˆ·ã€‚ ä¾‹å¦‚ï¼Œä¿®æ”¹ Dockerfile æ¥è®¾ç½® dev ç”¨æˆ·çš„å¯†ç ï¼š 123456FROM your_base_image# è®¾ç½® dev ç”¨æˆ·çš„å¯†ç RUN echo 'dev:your_new_password' | chpasswd# å…¶ä»– Dockerfile æŒ‡ä»¤ ç„¶åé‡æ–°æ„å»ºé•œåƒå¹¶è¿è¡Œå®¹å™¨ï¼š 12docker build -t your_image_name .docker run -it your_image_name æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®å¦‚æœä½ æ²¡æœ‰ Dockerfileï¼Œä½†å¯ä»¥è®¿é—®å®¹å™¨çš„é•œåƒï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®ã€‚ é¦–å…ˆï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿›å…¥ï¼š 1docker run -it --name temp_container your_image_name /bin/bash åœ¨å®¹å™¨ä¸­ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç ï¼š 1echo 'dev:your_new_password' | chpasswd é€€å‡ºå®¹å™¨å¹¶æäº¤æ›´æ”¹ï¼š 12exitdocker commit temp_container your_new_image_name ä½¿ç”¨æ–°çš„é•œåƒå¯åŠ¨å®¹å™¨ï¼š 1docker run -it your_new_image_name æ–¹æ³•å››ï¼šç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹å¯†ç å¦‚æœå®¹å™¨å·²ç»åœ¨è¿è¡Œï¼Œä½ å¯ä»¥ç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç ã€‚ é¦–å…ˆï¼Œä»¥ root ç”¨æˆ·è¿›å…¥å®¹å™¨ï¼š 1docker exec -u root -it &lt;container_id_or_name&gt; /bin/bash åœ¨å®¹å™¨ä¸­ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç ï¼š 1echo 'dev:your_new_password' | chpasswd æ–¹æ³•äº”ï¼šä½¿ç”¨ docker commit ä¿®æ”¹ç°æœ‰å®¹å™¨å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ docker commit æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶åœ¨æ–°é•œåƒä¸­ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç ã€‚ é¦–å…ˆï¼Œä»¥ root ç”¨æˆ·è¿›å…¥å®¹å™¨ï¼š 1docker exec -u root -it &lt;container_id_or_name&gt; /bin/bash åœ¨å®¹å™¨ä¸­ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç ï¼š 1echo 'dev:your_new_password' | chpasswd é€€å‡ºå®¹å™¨å¹¶æäº¤æ›´æ”¹ï¼š 12exitdocker commit &lt;container_id_or_name&gt; your_new_image_name ä½¿ç”¨æ–°çš„é•œåƒå¯åŠ¨å®¹å™¨ï¼š 1docker run -it your_new_image_name é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥è§£å†³æ— æ³•æ‰§è¡Œ sudo æ“ä½œçš„é—®é¢˜ï¼Œå¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ dev ç”¨æˆ·çš„å¯†ç æˆ–ç›´æ¥ä½¿ç”¨ root ç”¨æˆ·ã€‚","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"}]},{"title":"ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”","slug":"ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”","date":"2024-06-24T08:02:01.000Z","updated":"2024-06-24T08:10:17.375Z","comments":true,"path":"2024/06/24/ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”/","link":"","permalink":"https://www.silenceboy.com/2024/06/24/ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”/","excerpt":"","text":"ä»£ç æ‰«æå·¥å…·åœ¨è½¯ä»¶å¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œå®ƒä»¬å¸®åŠ©å¼€å‘è€…è¯†åˆ«å’Œä¿®å¤ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯å¯¹ SonarQubeã€Firelineã€Coverityã€Fortify å’Œ Black Duck çš„ä»‹ç»åŠå…¶åŒºåˆ«ï¼š 1. SonarQubeç®€ä»‹: SonarQube æ˜¯ä¸€ä¸ªå¼€æºçš„ä»£ç è´¨é‡ç®¡ç†å·¥å…·ã€‚ æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Javaã€C#ã€JavaScriptã€TypeScriptã€Python ç­‰ã€‚ åŠŸèƒ½: é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„æ¼æ´ã€é”™è¯¯å’Œä»£ç å¼‚å‘³ã€‚ ä»£ç åº¦é‡ï¼šæä¾›ä»£ç è¦†ç›–ç‡ã€å¤æ‚åº¦ç­‰åº¦é‡æŒ‡æ ‡ã€‚ é›†æˆï¼šä¸ CI/CD å·¥å…·ï¼ˆå¦‚ Jenkinsã€GitLab CIï¼‰é›†æˆï¼Œè‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æŸ¥ã€‚ ä¼˜ç‚¹: å¼€æºä¸”ç¤¾åŒºæ´»è·ƒã€‚ æ”¯æŒå¤šç§æ’ä»¶ï¼Œæ‰©å±•åŠŸèƒ½å¼ºå¤§ã€‚ ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œæ˜“äºä½¿ç”¨ã€‚ 2. Firelineç®€ä»‹: Fireline æ˜¯ä¸€ä¸ªä¸“æ³¨äºä»£ç å®‰å…¨çš„é™æ€åˆ†æå·¥å…·ã€‚ åŠŸèƒ½: æ£€æµ‹ä»£ç ä¸­çš„å®‰å…¨æ¼æ´ï¼Œå¦‚ SQL æ³¨å…¥ã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ç­‰ã€‚ æä¾›è¯¦ç»†çš„æ¼æ´æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ã€‚ ä¼˜ç‚¹: ä¸“æ³¨äºå®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæä¾›æ·±åº¦åˆ†æã€‚ é€‚ç”¨äºéœ€è¦é«˜å®‰å…¨æ€§çš„åº”ç”¨ç¨‹åºå¼€å‘ã€‚ 3. Coverityç®€ä»‹: Coverity æ˜¯ Synopsys æä¾›çš„é™æ€ä»£ç åˆ†æå·¥å…·ã€‚ æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Cã€C++ã€Javaã€C#ã€JavaScript ç­‰ã€‚ åŠŸèƒ½: é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„ç¼ºé™·å’Œå®‰å…¨æ¼æ´ã€‚ è‡ªåŠ¨åŒ–åˆ†æï¼šä¸ CI/CD å·¥å…·é›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–ä»£ç æ‰«æã€‚ æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ï¼šæä¾›è¯¦ç»†çš„ç¼ºé™·æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ã€‚ ä¼˜ç‚¹: é«˜å‡†ç¡®æ€§å’Œä½è¯¯æŠ¥ç‡ã€‚ å¼ºå¤§çš„ä¼ä¸šçº§æ”¯æŒå’ŒæœåŠ¡ã€‚ æ”¯æŒå¹¿æ³›çš„ç¼–ç¨‹è¯­è¨€å’Œå¤æ‚ä»£ç åº“ã€‚ 4. Fortifyç®€ä»‹: Fortify æ˜¯ Micro Focus æä¾›çš„åº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·ã€‚ åŒ…å«é™æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆSASTï¼‰å’ŒåŠ¨æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆDASTï¼‰ã€‚ åŠŸèƒ½: é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„å®‰å…¨æ¼æ´ã€‚ åŠ¨æ€åˆ†æï¼šåœ¨è¿è¡Œæ—¶æ£€æµ‹åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´ã€‚ å®‰å…¨å®¡è®¡å’Œåˆè§„æ€§æ£€æŸ¥ã€‚ ä¼˜ç‚¹: ç»¼åˆçš„å®‰å…¨æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼Œè¦†ç›–é™æ€å’ŒåŠ¨æ€åˆ†æã€‚ å¼ºå¤§çš„ä¼ä¸šçº§æ”¯æŒå’ŒæœåŠ¡ã€‚ æä¾›è¯¦ç»†çš„æ¼æ´ä¿®å¤æŒ‡å¯¼ã€‚ 5. Black Duckç®€ä»‹: Black Duck æ˜¯ Synopsys æä¾›çš„å¼€æºå®‰å…¨å’Œç®¡ç†å·¥å…·ã€‚ ä¸“æ³¨äºå¼€æºç»„ä»¶çš„å®‰å…¨å’Œåˆè§„æ€§ã€‚ åŠŸèƒ½: å¼€æºç»„ä»¶æ‰«æï¼šæ£€æµ‹é¡¹ç›®ä¸­ä½¿ç”¨çš„å¼€æºç»„ä»¶ã€‚ æ¼æ´æ£€æµ‹ï¼šè¯†åˆ«å¼€æºç»„ä»¶ä¸­çš„å·²çŸ¥æ¼æ´ã€‚ è®¸å¯è¯åˆè§„æ€§ï¼šæ£€æŸ¥å¼€æºç»„ä»¶çš„è®¸å¯è¯åˆè§„æ€§ã€‚ ä¼˜ç‚¹: ä¸“æ³¨äºå¼€æºç»„ä»¶çš„ç®¡ç†å’Œå®‰å…¨ã€‚ æä¾›è¯¦ç»†çš„æ¼æ´å’Œè®¸å¯è¯åˆè§„æŠ¥å‘Šã€‚ ä¸å…¶ä»– Synopsys å·¥å…·é›†æˆï¼Œæä¾›å…¨é¢çš„å®‰å…¨è§£å†³æ–¹æ¡ˆã€‚ åŒºåˆ«æ€»ç»“ SonarQubeï¼šä¸»è¦å…³æ³¨ä»£ç è´¨é‡å’Œä»£ç å¼‚å‘³ï¼Œæä¾›å…¨é¢çš„ä»£ç åº¦é‡å’Œè´¨é‡æŠ¥å‘Šã€‚ Firelineï¼šä¸“æ³¨äºä»£ç å®‰å…¨æ¼æ´çš„æ£€æµ‹ï¼Œé€‚ç”¨äºéœ€è¦é«˜å®‰å…¨æ€§çš„åº”ç”¨ã€‚ Coverityï¼šæä¾›é«˜å‡†ç¡®æ€§çš„é™æ€ä»£ç åˆ†æï¼Œé€‚åˆå¤æ‚å’Œå¤§å‹ä»£ç åº“ã€‚ Fortifyï¼šç»¼åˆçš„åº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·ï¼Œè¦†ç›–é™æ€å’ŒåŠ¨æ€åˆ†æï¼Œé€‚åˆå…¨é¢çš„å®‰å…¨æµ‹è¯•éœ€æ±‚ã€‚ Black Duckï¼šä¸“æ³¨äºå¼€æºç»„ä»¶çš„å®‰å…¨å’Œåˆè§„æ€§ç®¡ç†ï¼Œé€‚ç”¨äºä½¿ç”¨å¤§é‡å¼€æºç»„ä»¶çš„é¡¹ç›®ã€‚ æ¯ç§å·¥å…·éƒ½æœ‰å…¶ç‰¹å®šçš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·åº”æ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚å’Œç¯å¢ƒæ¥å†³å®šã€‚","categories":[{"name":"ä»£ç æ‰«æ","slug":"ä»£ç æ‰«æ","permalink":"https://www.silenceboy.com/categories/ä»£ç æ‰«æ/"}],"tags":[{"name":"ä»£ç æ‰«æ","slug":"ä»£ç æ‰«æ","permalink":"https://www.silenceboy.com/tags/ä»£ç æ‰«æ/"}]},{"title":"shellè„šæœ¬é‡Œçš„#*@æ˜¯ä»€ä¹ˆæ„æ€","slug":"shellè„šæœ¬é‡Œçš„-æ˜¯ä»€ä¹ˆæ„æ€","date":"2023-09-27T09:22:45.000Z","updated":"2023-12-05T01:44:02.331Z","comments":true,"path":"2023/09/27/shellè„šæœ¬é‡Œçš„-æ˜¯ä»€ä¹ˆæ„æ€/","link":"","permalink":"https://www.silenceboy.com/2023/09/27/shellè„šæœ¬é‡Œçš„-æ˜¯ä»€ä¹ˆæ„æ€/","excerpt":"","text":"åœ¨Shellè„šæœ¬ä¸­ï¼Œ${variable#pattern} æ˜¯ä¸€ç§å­—ç¬¦ä¸²å¤„ç†æ–¹å¼ï¼Œå…¶ä¸­ # åè·Ÿç€ä¸€ä¸ªæ¨¡å¼ï¼ˆpatternï¼‰ã€‚è¿™ä¸ªè¯­æ³•çš„ä½œç”¨æ˜¯ä»å­—ç¬¦ä¸²å˜é‡ variable çš„å¼€å¤´åˆ é™¤åŒ¹é… pattern çš„æœ€çŸ­å­ä¸²ï¼Œå¹¶è¿”å›åˆ é™¤åçš„ç»“æœã€‚${variable#*@} çš„å«ä¹‰æ˜¯ï¼š â— variable æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«æ–‡æœ¬çš„å­—ç¬¦ä¸²ã€‚ â— # è¡¨ç¤ºä»å­—ç¬¦ä¸²å¼€å¤´å¼€å§‹åŒ¹é…ã€‚ â— *@ æ˜¯ä¸€ä¸ªé€šé…ç¬¦æ¨¡å¼ï¼Œå®ƒåŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ä»»æ„å­—ç¬¦åºåˆ—ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª @ å­—ç¬¦ã€‚ æ‰€ä»¥ï¼Œ${variable#*@} çš„ä½œç”¨æ˜¯ä»å˜é‡ variable çš„å¼€å¤´åˆ é™¤åŒ¹é… *@ æ¨¡å¼çš„æœ€çŸ­å­ä¸²ï¼Œå¹¶è¿”å›åˆ é™¤åçš„ç»“æœã€‚é€šå¸¸ï¼Œè¿™ç§æ“ä½œç”¨äºå¤„ç†æ–‡æœ¬æˆ–å­—ç¬¦ä¸²ï¼Œä»¥è¿‡æ»¤æ‰æˆ–æå–æ„Ÿå…´è¶£çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ variable çš„å€¼æ˜¯ &quot;user@example.com&quot;ï¼Œé‚£ä¹ˆ ${variable#*@} çš„ç»“æœå°†æ˜¯ &quot;example.com&quot;ï¼Œå› ä¸ºå®ƒåˆ é™¤äº†å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ª &quot;@&quot; ç¬¦å·åŠå…¶ä¹‹å‰çš„éƒ¨åˆ†ã€‚","categories":[{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/categories/shell/"}],"tags":[{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/tags/shell/"}]},{"title":"ç”¨goå¼€å‘sseæ¥å£","slug":"ç”¨goå¼€å‘sseæ¥å£","date":"2023-07-11T02:50:24.000Z","updated":"2023-07-21T05:36:57.832Z","comments":true,"path":"2023/07/11/ç”¨goå¼€å‘sseæ¥å£/","link":"","permalink":"https://www.silenceboy.com/2023/07/11/ç”¨goå¼€å‘sseæ¥å£/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland sse æœåŠ¡å™¨å‘é€äº‹ä»¶(Server-Sent Events)ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å•å‘ä¼ é€’æ¶ˆæ¯ã€‚åœ¨ä¸€äº›åªéœ€è¦æ¥å—æœåŠ¡ç«¯æ•°æ®çš„éœ€æ±‚ä¸­å¯ä»¥å–ä»£websocketæŠ€æœ¯ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚ ç›®å‰goå·²ç»æœ‰ä¸€äº›æ”¯æŒsseçš„åº“ï¼Œæˆ‘è¿™é‡Œé€‰ç”¨äº†ï¼ševentsource.v1 1$ go get gopkg.in/antage/eventsource.v1 å¹¿æ’­æ¨¡å¼SSEå¹¿æ’­æ¨¡å¼SSEæŒ‡ä¸è®¾ç½®äº‹ä»¶åï¼Œæˆ–è€…è¯´æ˜¯ä¸è®¾ç½®é€šé“ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯æ¥æ”¶åŒæ ·çš„æ•°æ®ã€‚ å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼šç‚¹å‡»æŸ¥çœ‹æºç  æœåŠ¡ç«¯ 1234567891011121314151617181920212223242526272829303132package mainimport ( \"fmt\" \"gopkg.in/antage/eventsource.v1\" \"log\" \"net/http\" \"time\")// å¹¿æ’­æ¨¡å¼SSEï¼Œä¸è®¾ç½®äº‹ä»¶åç§°ï¼ˆä¹Ÿå¯ç†è§£ä¸ºé€šé“ï¼‰func main() &#123; es := eventsource.New(nil, nil) defer es.Close() http.Handle(\"/\", http.FileServer(http.Dir(\"./public\"))) http.Handle(\"/events\", es) go func() &#123; for &#123; // åªè®¾ç½®å‘é€æ•°æ®ï¼Œä¸æ·»åŠ äº‹ä»¶å es.SendEventMessage(fmt.Sprintf(\"send data: %s\", time.Now().Format(\"2006-01-02 15:04:05\")), \"\", \"\") log.Printf(\"å®¢æˆ·ç«¯è¿æ¥æ•°: %d\", es.ConsumersCount()) time.Sleep(2 * time.Second) &#125; &#125;() log.Println(\"Open URL http://localhost:8080/ in your browser.\") err := http.ListenAndServe(\":8080\", nil) if err != nil &#123; log.Fatal(err) &#125;&#125; å‰ç«¯ 123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;SSE test&lt;/title&gt; &lt;script type=\"text/javascript\"&gt; const es = new EventSource(\"http://localhost:8080/events\"); es.onmessage = function (e) &#123; document.getElementById(\"test\") .insertAdjacentHTML(\"beforeend\", \"&lt;li&gt;\" + e.data + \"&lt;/li&gt;\"); &#125; es.onerror = function (e) &#123; // readyStateè¯´æ˜ // 0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­ // 1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ® // 2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥ console.log(\"readyState = \" + e.currentTarget.readyState); &#125; &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;SSE test&lt;/h1&gt;&lt;div&gt; &lt;ul id=\"test\"&gt; &lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å¯åŠ¨æœåŠ¡ç«¯ä»£ç ï¼š 1$ go run main æ‰“å¼€æµè§ˆå™¨è®¿é—®å‰ç«¯ä»£ç ï¼š http://localhost:8080 æœåŠ¡ç«¯è¾“å‡ºï¼š å‰ç«¯è¾“å‡ºï¼š ç‚¹å¯¹ç‚¹æ¨¡å¼SSEç‚¹å‡»æŸ¥çœ‹æºä»£ç  å®ç°æ–¹å¼å’Œå¹¿æ’­æ¨¡å¼å·®ä¸å¤šï¼Œåªéœ€åšç®€å•ä¿®æ”¹ï¼š æœåŠ¡ç«¯ä»£ç åªéœ€æ·»åŠ äº‹ä»¶åç§°ï¼š 12// è®¾ç½®äº‹ä»¶åç§°ä¸ºï¼štest-eventes.SendEventMessage(fmt.Sprintf(\"send data: %s\", time.Now().Format(\"2006-01-02 15:04:05\")), \"test-event\", \"\") å‰ç«¯ä»£ç ä¿®æ”¹æ¥æ”¶æ–¹å¼ï¼š 1234es.addEventListener(\"test-event\", (e) =&gt; &#123; document.getElementById(\"test\") .insertAdjacentHTML(\"beforeend\", \"&lt;li&gt;\" + e.data + \"&lt;/li&gt;\");&#125;); æ”¯æŒè·¨åŸŸçš„SSEç‚¹å‡»æŸ¥çœ‹æºä»£ç  ç°åœ¨é¡¹ç›®å¼€å‘åŸºæœ¬ä¸Šéƒ½æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œè¿™æ ·å°±ä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼ŒSSEè§£å†³è·¨åŸŸçš„æ–¹å¼åªéœ€è¦åœ¨newæ–¹æ³•å†…å¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´ï¼š 12345678es := eventsource.New( eventsource.DefaultSettings(), func(req *http.Request) [][]byte &#123; return [][]byte&#123; []byte(\"X-Accel-Buffering: no\"), []byte(\"Access-Control-Allow-Origin: *\"), &#125; &#125;) å‰ç«¯åˆ›å»ºsseè¿æ¥æ—¶ä¹Ÿå¯æ·»åŠ å…è®¸è·¨åŸŸå‚æ•°ï¼š 1const es = new EventSource(\"http://localhost:8080/events\", &#123; withCredentials: true &#125;); è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜ç‚¹å‡»æŸ¥çœ‹æºä»£ç  åœ¨Chromeæµè§ˆå™¨ä¸­sseæ–­å¼€åä¼šè‡ªåŠ¨é‡è¿ï¼Œä½†firefoxæµè§ˆå™¨ä¸­æ–­å¼€åä¸ä¼šé‡è¿ï¼Œè§£å†³åŠæ³•æ˜¯ï¼Œå‰ç«¯jsé€šè¿‡åˆ¤æ–­è¿æ¥çŠ¶æ€ä¸»åŠ¨è¿›è¡Œé‡è¿è¯·æ±‚ï¼Œé€šè¿‡åˆ¤æ–­readyStateçš„å€¼è¿›è¡Œé‡æ–°è°ƒç”¨åˆå§‹åŒ–æ“ä½œ readyStateè¯´æ˜ï¼š 0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­ 1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ® 2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥ å‰ç«¯ä»£ç å¯ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;SSE test&lt;/title&gt; &lt;script type=\"text/javascript\"&gt; let es = null; // è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜ function initES() &#123; if (es == null || es.readyState == 2) &#123; es = new EventSource(\"http://localhost:8080/events\", &#123;withCredentials: true&#125;); es.addEventListener(\"test-event\", (e) =&gt; &#123; document.getElementById(\"test\") .insertAdjacentHTML(\"beforeend\", \"&lt;li&gt;\" + e.data + \"&lt;/li&gt;\"); &#125;); es.onerror = function (e) &#123; // readyStateè¯´æ˜ // 0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­ // 1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ® // 2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥ console.log(\"readyState = \" + e.currentTarget.readyState); if (es.readyState == 2) &#123; setTimeout(initES, 5000) &#125; &#125; &#125; &#125; initES() &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;SSE test&lt;/h1&gt;&lt;div&gt; &lt;ul id=\"test\"&gt; &lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·","slug":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·","date":"2023-06-26T02:38:01.000Z","updated":"2023-07-21T05:36:57.830Z","comments":true,"path":"2023/06/26/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·/","link":"","permalink":"https://www.silenceboy.com/2023/06/26/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland å¹³æ—¶æˆ‘ä»¬ç¼–å†™httpçš„apiæ¥å£æ—¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„é€šè¿‡postmanå·¥å…·è¿›è¡Œæ¥å£è°ƒè¯•ï¼Œé‚£ä¹ˆgrpcæ¥å£æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼postmançš„å·¥å…·å¯ä»¥è°ƒè¯•å‘ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œgithubä¸Šæœ‰ä¸€æ¬¾å·¥å…·grpcuiï¼Œä¸“é—¨ç”¨æ¥åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œgrpcæ¥å£è°ƒè¯•ã€‚ å®‰è£…grpcuiå·¥å…·1$ go install github.com/fullstorydev/grpcui/cmd/grpcui@latest é¡¹ç›®æµ‹è¯•æˆ‘ä»¬ä»¥demo_1æµ‹è¯•ä»£ç ä¸ºä¾‹è¿›è¡Œè°ƒè¯•ã€‚é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…ä¾èµ–ï¼š 1$ go get github.com/fullstorydev/grpcui è¿è¡Œé¡¹ç›®1$ go run server/main.go å¯åŠ¨grpcuiå¦èµ·ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œæ³¨æ„è¿™é‡Œçš„ç«¯å£å·è¦å’ŒgrpcæœåŠ¡ç«¯å£å·ä¿æŒä¸€è‡´ã€‚ 1$ grpcui -plaintext 127.0.0.1:8080 å¦‚æœä½ åœ¨æ‰§è¡Œä»¥ä¸Šå‘½ä»¤çš„æ—¶å€™å‡ºç°ä¸€ä¸‹æŠ¥é”™ï¼š 1Failed to compute set of methods to expose: server does not support the reflection API éœ€è¦åœ¨server/main.goæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¢åŠ åå°„ï¼š 1reflection.Register(s) æ­¤æ—¶å†è¿è¡Œä»¥ä¸Šå¯åŠ¨grpcuiå‘½ä»¤ï¼Œå¯çœ‹åˆ°ä¸€ä¸‹è¾“å‡ºï¼š 12gRPC Web UI available at http://127.0.0.1:41619/Opening in existing browser session. æµè§ˆå™¨è°ƒè¯•æµè§ˆå™¨æ‰“å¼€http://127.0.0.1:41619/ ,å¯ä»¥çœ‹åˆ°grpcuiè°ƒè¯•é¡µé¢ï¼š ç‚¹å‡»InvokeæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°Responsetabé¡µæœ‰å¯¹äºçš„ç›¸åº”æ•°æ®ï¼š","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc","slug":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc","date":"2023-06-18T07:13:21.000Z","updated":"2023-07-21T05:36:57.831Z","comments":true,"path":"2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc/","link":"","permalink":"https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland grpcï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚ grpcç¯å¢ƒé…ç½®protocå®‰è£…1234$ sudo apt install -y protobuf-compiler$ protoc --versionlibprotoc 3.6.1 å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼šProtocol Buffer Compiler Installation protocolç¼–è¯‘æ’ä»¶å®‰è£…12$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2 å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š 123$ ls $GOPATH/binprotoc-gen-go protoc-gen-go-grpc é¡¹ç›®å¼€å‘é¡¹ç›®æºç åœ°å€ é¡¹ç›®ç›®å½•ç»“æ„123456789101112â”œâ”€â”€ demo_4â”‚ â”œâ”€â”€ clientâ”‚ â”‚ â””â”€â”€ main.goâ”‚ â”œâ”€â”€ go.modâ”‚ â”œâ”€â”€ go.sumâ”‚ â”œâ”€â”€ helloworldâ”‚ â”‚ â”œâ”€â”€ helloworld_grpc.pb.goâ”‚ â”‚ â”œâ”€â”€ helloworld.pb.goâ”‚ â”‚ â””â”€â”€ helloworld.protoâ”‚ â”œâ”€â”€ README.mdâ”‚ â””â”€â”€ serverâ”‚ â””â”€â”€ main.go é¡¹ç›®åˆ›å»º12$ mkdir demo_4 &amp;&amp; cd demo_4$ go mod init å®‰è£…grpcä¾èµ–1$ go get -u google.golang.org/grpc ç¼–å†™protoæ–‡ä»¶æµå¼rpcä½¿ç”¨streamå…³é”®å­—å®šä¹‰ 123456789101112131415161718# helloworld/helloworld.protosyntax = \"proto3\";option go_package = \"/helloworld\";package helloworld;service Hello &#123; rpc SayHello (stream HelloRequest) returns (stream HelloReply) &#123;&#125;&#125;message HelloRequest &#123; string name = 1;&#125;message HelloReply &#123; string message = 1;&#125; ç”Ÿæˆgoä»£ç 123$ protoc --go_out=. --go_opt=paths=source_relative \\ --go-grpc_out=. --go-grpc_opt=paths=source_relative \\ helloworld/helloworld.proto å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š helloworld_grpc.pb.goå’Œhelloworld.pb.goï¼Œæ³¨æ„ï¼š ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ ç¼–å†™æœåŠ¡ç«¯ä»£ç flagç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š https://pkg.go.dev/flag 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// server/main.gopackage mainimport ( \"flag\" \"fmt\" \"github.com/silenceboychen/gostudy/demo_4/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/reflection\" \"io\" \"log\" \"net\" \"strconv\")var ( port = flag.Int(\"port\", 8080, \"The server port\"))type server struct &#123; helloworld.UnimplementedHelloServer&#125;func (s *server) SayHello(stream helloworld.Hello_SayHelloServer) error &#123; n := 0 for &#123; res, err := stream.Recv() if err == io.EOF &#123; return nil &#125; if err != nil &#123; return err &#125; err = stream.Send(&amp;helloworld.HelloReply&#123; Message: \"server stream: \" + res.GetName() + \"_\" + strconv.Itoa(n), &#125;) if err != nil &#123; return err &#125; n++ log.Printf(\"client stream: %s\", res.GetName()) &#125;&#125;func main() &#123; flag.Parse() lis, err := net.Listen(\"tcp\", fmt.Sprintf(\":%d\", *port)) if err != nil &#123; log.Fatalf(\"failed to listen: %v\", err) &#125; s := grpc.NewServer() reflection.Register(s) helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;) log.Printf(\"server listening at %v\", lis.Addr()) if err := s.Serve(lis); err != nil &#123; log.Fatalf(\"failed to serve: %v\", err) &#125;&#125; ç¼–å†™å®¢æˆ·ç«¯ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// client/main.gopackage mainimport ( \"context\" \"flag\" \"github.com/silenceboychen/gostudy/demo_4/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" \"io\" \"log\" \"strconv\" \"time\")var ( addr = flag.String(\"addr\", \"localhost:8080\", \"the address to connect to\") name = flag.String(\"name\", \"world\", \"Name to greet\"))func main() &#123; flag.Parse() conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials())) if err != nil &#123; log.Fatalf(\"did not connect: %v\", err) &#125; defer conn.Close() c := helloworld.NewHelloClient(conn) _, cancel := context.WithTimeout(context.Background(), time.Second) defer cancel() stream, err := c.SayHello(context.Background()) if err != nil &#123; log.Fatalf(\"stream err: %v\", err) &#125; for n := 0; n &lt; 5; n++ &#123; err := stream.Send(&amp;helloworld.HelloRequest&#123;Name: *name + \"_\" + strconv.Itoa(n)&#125;) if err != nil &#123; log.Fatalf(\"client stream err: %v\", err) &#125; res, err := stream.Recv() if err == io.EOF &#123; break &#125; if err != nil &#123; log.Fatalf(\"server stream err: %v\", err) &#125; // æ‰“å°è¿”å›å€¼ log.Println(res.GetMessage()) &#125; err = stream.CloseSend() if err != nil &#123; log.Fatalf(\"close stream err: %v\", err) &#125;&#125; é¡¹ç›®è¿è¡Œå¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚ æœåŠ¡ç«¯ 12345678$ go run server/main.go2023/06/16 20:51:39 server listening at [::]:80802023/06/16 20:51:42 client stream: world_02023/06/16 20:51:42 client stream: world_12023/06/16 20:51:42 client stream: world_22023/06/16 20:51:42 client stream: world_32023/06/16 20:51:42 client stream: world_4 å®¢æˆ·ç«¯ 1234567$ go run client/main.go2023/06/16 20:51:42 server stream: world_0_02023/06/16 20:51:42 server stream: world_1_12023/06/16 20:51:42 server stream: world_2_22023/06/16 20:51:42 server stream: world_3_32023/06/16 20:51:42 server stream: world_4_4 ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»grpcè°ƒè¯•å·¥å…·ã€‚","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc","slug":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc","date":"2023-06-18T07:12:48.000Z","updated":"2023-07-21T05:36:57.829Z","comments":true,"path":"2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc/","link":"","permalink":"https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland grpcï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚ grpcç¯å¢ƒé…ç½®protocå®‰è£…1234$ sudo apt install -y protobuf-compiler$ protoc --versionlibprotoc 3.6.1 å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼šProtocol Buffer Compiler Installation protocolç¼–è¯‘æ’ä»¶å®‰è£…12$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2 å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š 123$ ls $GOPATH/binprotoc-gen-go protoc-gen-go-grpc é¡¹ç›®å¼€å‘é¡¹ç›®æºç åœ°å€ é¡¹ç›®ç›®å½•ç»“æ„123456789101112â”œâ”€â”€ demo_3â”‚ â”œâ”€â”€ clientâ”‚ â”‚ â””â”€â”€ main.goâ”‚ â”œâ”€â”€ go.modâ”‚ â”œâ”€â”€ go.sumâ”‚ â”œâ”€â”€ helloworldâ”‚ â”‚ â”œâ”€â”€ helloworld_grpc.pb.goâ”‚ â”‚ â”œâ”€â”€ helloworld.pb.goâ”‚ â”‚ â””â”€â”€ helloworld.protoâ”‚ â”œâ”€â”€ README.mdâ”‚ â””â”€â”€ serverâ”‚ â””â”€â”€ main.go é¡¹ç›®åˆ›å»º12$ mkdir demo_3 &amp;&amp; cd demo_3$ go mod init å®‰è£…grpcä¾èµ–1$ go get -u google.golang.org/grpc ç¼–å†™protoæ–‡ä»¶æµå¼rpcä½¿ç”¨streamå…³é”®å­—å®šä¹‰ 123456789101112131415161718# helloworld/helloworld.protosyntax = \"proto3\";option go_package = \"/helloworld\";package helloworld;service Hello &#123; rpc SayHello (stream HelloRequest) returns (HelloReply) &#123;&#125;&#125;message HelloRequest &#123; string name = 1;&#125;message HelloReply &#123; string message = 1;&#125; ç”Ÿæˆgoä»£ç 123$ protoc --go_out=. --go_opt=paths=source_relative \\ --go-grpc_out=. --go-grpc_opt=paths=source_relative \\ helloworld/helloworld.proto å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š helloworld_grpc.pb.goå’Œhelloworld.pb.goï¼Œæ³¨æ„ï¼š ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ ç¼–å†™æœåŠ¡ç«¯ä»£ç flagç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š https://pkg.go.dev/flag 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// server/main.gopackage mainimport ( \"flag\" \"fmt\" \"github.com/silenceboychen/gostudy/demo_3/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/reflection\" \"io\" \"log\" \"net\")var ( port = flag.Int(\"port\", 8080, \"The server port\"))type server struct &#123; helloworld.UnimplementedHelloServer&#125;func (s *server) SayHello(stream helloworld.Hello_SayHelloServer) error &#123; for &#123; res, err := stream.Recv() if err == io.EOF &#123; return stream.SendAndClose(&amp;helloworld.HelloReply&#123;Message: \"over\"&#125;) &#125; if err != nil &#123; return err &#125; log.Println(res.Name) &#125;&#125;func main() &#123; flag.Parse() lis, err := net.Listen(\"tcp\", fmt.Sprintf(\":%d\", *port)) if err != nil &#123; log.Fatalf(\"failed to listen: %v\", err) &#125; s := grpc.NewServer() reflection.Register(s) helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;) log.Printf(\"server listening at %v\", lis.Addr()) if err := s.Serve(lis); err != nil &#123; log.Fatalf(\"failed to serve: %v\", err) &#125;&#125; ç¼–å†™å®¢æˆ·ç«¯ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// client/main.gopackage mainimport ( \"context\" \"flag\" \"github.com/silenceboychen/gostudy/demo_3/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" \"log\" \"strconv\" \"time\")var ( addr = flag.String(\"addr\", \"localhost:8080\", \"the address to connect to\") name = flag.String(\"name\", \"world\", \"Name to greet\"))func main() &#123; flag.Parse() conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials())) if err != nil &#123; log.Fatalf(\"did not connect: %v\", err) &#125; defer conn.Close() c := helloworld.NewHelloClient(conn) ctx, cancel := context.WithTimeout(context.Background(), time.Second) defer cancel() stream, err := c.SayHello(ctx) if err != nil &#123; log.Fatalf(\"Upload list err: %v\", err) &#125; for n := 0; n &lt; 5; n++ &#123; //å‘æµä¸­å‘é€æ¶ˆæ¯ err := stream.Send(&amp;helloworld.HelloRequest&#123;Name: \"stream client rpc \" + strconv.Itoa(n)&#125;) if err != nil &#123; log.Fatalf(\"stream request err: %v\", err) &#125; &#125; //å…³é—­æµå¹¶è·å–è¿”å›çš„æ¶ˆæ¯ res, err := stream.CloseAndRecv() if err != nil &#123; log.Fatalf(\"SayHello get response err: %v\", err) &#125; log.Println(res)&#125; é¡¹ç›®è¿è¡Œå¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚ æœåŠ¡ç«¯ 12345678$ go run server/main.go2023/06/16 20:24:15 server listening at [::]:80802023/06/16 20:24:22 stream client rpc 02023/06/16 20:24:22 stream client rpc 12023/06/16 20:24:22 stream client rpc 22023/06/16 20:24:22 stream client rpc 32023/06/16 20:24:22 stream client rpc 4 å®¢æˆ·ç«¯ 123$ go run client/main.go2023/06/16 20:24:22 message:\"over\" ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»åŒå‘æµå¼rpcã€‚","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc","slug":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc","date":"2023-06-18T07:11:52.000Z","updated":"2023-07-21T05:36:57.829Z","comments":true,"path":"2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc/","link":"","permalink":"https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland grpcï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚ grpcç¯å¢ƒé…ç½®protocå®‰è£…1234$ sudo apt install -y protobuf-compiler$ protoc --versionlibprotoc 3.6.1 å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼šProtocol Buffer Compiler Installation protocolç¼–è¯‘æ’ä»¶å®‰è£…12$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2 å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š 123$ ls $GOPATH/binprotoc-gen-go protoc-gen-go-grpc é¡¹ç›®å¼€å‘é¡¹ç›®æºç åœ°å€ é¡¹ç›®ç›®å½•ç»“æ„123456789101112â”œâ”€â”€ demo_2â”‚ â”œâ”€â”€ clientâ”‚ â”‚ â””â”€â”€ main.goâ”‚ â”œâ”€â”€ go.modâ”‚ â”œâ”€â”€ go.sumâ”‚ â”œâ”€â”€ helloworldâ”‚ â”‚ â”œâ”€â”€ helloworld_grpc.pb.goâ”‚ â”‚ â”œâ”€â”€ helloworld.pb.goâ”‚ â”‚ â””â”€â”€ helloworld.protoâ”‚ â”œâ”€â”€ README.mdâ”‚ â””â”€â”€ serverâ”‚ â””â”€â”€ main.go é¡¹ç›®åˆ›å»º12$ mkdir demo_2 &amp;&amp; cd demo_2$ go mod init å®‰è£…grpcä¾èµ–1$ go get -u google.golang.org/grpc ç¼–å†™protoæ–‡ä»¶æµå¼rpcä½¿ç”¨streamå…³é”®å­—å®šä¹‰ 123456789101112131415161718# helloworld/helloworld.protosyntax = \"proto3\";option go_package = \"/helloworld\";package helloworld;service Hello &#123; rpc SayHello (HelloRequest) returns (stream HelloReply) &#123;&#125;&#125;message HelloRequest &#123; string name = 1;&#125;message HelloReply &#123; string message = 1;&#125; ç”Ÿæˆgoä»£ç 123$ protoc --go_out=. --go_opt=paths=source_relative \\ --go-grpc_out=. --go-grpc_opt=paths=source_relative \\ helloworld/helloworld.proto å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š helloworld_grpc.pb.goå’Œhelloworld.pb.goï¼Œæ³¨æ„ï¼š ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ ç¼–å†™æœåŠ¡ç«¯ä»£ç flagç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š https://pkg.go.dev/flag 1234567891011121314151617181920212223242526272829303132333435363738394041424344// server/main.gopackage mainimport ( \"flag\" \"fmt\" \"github.com/silenceboychen/gostudy/demo_2/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/reflection\" \"log\" \"net\")var ( port = flag.Int(\"port\", 8080, \"The server port\"))type server struct &#123; helloworld.UnimplementedHelloServer&#125;func (s *server) SayHello(in *helloworld.HelloRequest, stream helloworld.Hello_SayHelloServer) error &#123; log.Printf(\"Received: %v\", in.GetName()) for i := 0; i &lt; 5; i++ &#123; stream.Send(&amp;helloworld.HelloReply&#123;Message: fmt.Sprintf(\"hello %s---%d\", in.Name, i)&#125;) &#125; return nil&#125;func main() &#123; flag.Parse() lis, err := net.Listen(\"tcp\", fmt.Sprintf(\":%d\", *port)) if err != nil &#123; log.Fatalf(\"failed to listen: %v\", err) &#125; s := grpc.NewServer() reflection.Register(s) helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;) log.Printf(\"server listening at %v\", lis.Addr()) if err := s.Serve(lis); err != nil &#123; log.Fatalf(\"failed to serve: %v\", err) &#125;&#125; ç¼–å†™å®¢æˆ·ç«¯ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// client/main.gopackage mainimport ( \"context\" \"flag\" \"github.com/silenceboychen/gostudy/demo_2/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" \"io\" \"log\" \"time\")var ( addr = flag.String(\"addr\", \"localhost:8080\", \"the address to connect to\") name = flag.String(\"name\", \"world\", \"Name to greet\"))func main() &#123; flag.Parse() conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials())) if err != nil &#123; log.Fatalf(\"did not connect: %v\", err) &#125; defer conn.Close() c := helloworld.NewHelloClient(conn) ctx, cancel := context.WithTimeout(context.Background(), time.Second) defer cancel() stream, err := c.SayHello(ctx, &amp;helloworld.HelloRequest&#123;Name: *name&#125;) if err != nil &#123; log.Fatalf(\"could not call: %v\", err) &#125; for &#123; res, err := stream.Recv() if err == io.EOF &#123; break &#125; if err != nil &#123; log.Printf(\"stream error: %v\", err) &#125; log.Printf(\"%s\", res.Message) &#125;&#125; é¡¹ç›®è¿è¡Œå¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚ æœåŠ¡ç«¯ 1234$ go run server/main.go2023/06/16 18:56:57 server listening at [::]:80802023/06/16 18:57:02 Received: world å®¢æˆ·ç«¯ 1234567$ go run client/main.go2023/06/16 20:11:55 hello world---02023/06/16 20:11:55 hello world---12023/06/16 20:11:55 hello world---22023/06/16 20:11:55 hello world---32023/06/16 20:11:55 hello world---4 ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»å®¢æˆ·ç«¯æµå¼rpcã€‚","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc","slug":"grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc","date":"2023-06-18T07:09:39.000Z","updated":"2023-07-21T05:36:57.828Z","comments":true,"path":"2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc/","link":"","permalink":"https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc/","excerpt":"","text":"å¼€å‘ç¯å¢ƒï¼š ç³»ç»Ÿï¼š ubuntu20.04 goç‰ˆæœ¬ï¼š 1.19 ç¼–è¾‘å™¨ï¼š goland grpcï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚ grpcç¯å¢ƒé…ç½®protocå®‰è£…1234$ sudo apt install -y protobuf-compiler$ protoc --versionlibprotoc 3.6.1 å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼šProtocol Buffer Compiler Installation protocolç¼–è¯‘æ’ä»¶å®‰è£…12$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2 å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š 123$ ls $GOPATH/binprotoc-gen-go protoc-gen-go-grpc é¡¹ç›®å¼€å‘é¡¹ç›®æºç åœ°å€ é¡¹ç›®ç›®å½•ç»“æ„123456789101112â”œâ”€â”€ demo_1â”‚ â”œâ”€â”€ clientâ”‚ â”‚ â””â”€â”€ main.goâ”‚ â”œâ”€â”€ go.modâ”‚ â”œâ”€â”€ go.sumâ”‚ â”œâ”€â”€ helloworldâ”‚ â”‚ â”œâ”€â”€ helloworld_grpc.pb.goâ”‚ â”‚ â”œâ”€â”€ helloworld.pb.goâ”‚ â”‚ â””â”€â”€ helloworld.protoâ”‚ â”œâ”€â”€ README.mdâ”‚ â””â”€â”€ serverâ”‚ â””â”€â”€ main.go é¡¹ç›®åˆ›å»º12$ mkdir demo_1 &amp;&amp; cd demo_1$ go mod init å®‰è£…grpcä¾èµ–1$ go get -u google.golang.org/grpc ç¼–å†™protoæ–‡ä»¶123456789101112131415161718# helloworld/helloworld.protosyntax = \"proto3\";option go_package = \"/helloworld\";package helloworld;service Hello &#123; rpc SayHello (HelloRequest) returns (HelloReply) &#123;&#125;&#125;message HelloRequest &#123; string name = 1;&#125;message HelloReply &#123; string message = 1;&#125; ç”Ÿæˆgoä»£ç 123$ protoc --go_out=. --go_opt=paths=source_relative \\ --go-grpc_out=. --go-grpc_opt=paths=source_relative \\ helloworld/helloworld.proto å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š helloworld_grpc.pb.goå’Œhelloworld.pb.goï¼Œæ³¨æ„ï¼š ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ ç¼–å†™æœåŠ¡ç«¯ä»£ç flagç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š https://pkg.go.dev/flag 123456789101112131415161718192021222324252627282930313233343536373839404142// server/main.gopackage mainimport ( \"context\" \"flag\" \"fmt\" \"github.com/silenceboychen/gostudy/demo_1/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/reflection\" \"log\" \"net\")var ( port = flag.Int(\"port\", 8080, \"The server port\"))type server struct &#123; helloworld.UnimplementedHelloServer&#125;func (s *server) SayHello(ctx context.Context, in *helloworld.HelloRequest) (*helloworld.HelloReply, error) &#123; log.Printf(\"Received: %v\", in.GetName()) return &amp;helloworld.HelloReply&#123;Message: \"Hello \" + in.GetName()&#125;, nil&#125;func main() &#123; flag.Parse() lis, err := net.Listen(\"tcp\", fmt.Sprintf(\":%d\", *port)) if err != nil &#123; log.Fatalf(\"failed to listen: %v\", err) &#125; s := grpc.NewServer() reflection.Register(s) helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;) log.Printf(\"server listening at %v\", lis.Addr()) if err := s.Serve(lis); err != nil &#123; log.Fatalf(\"failed to serve: %v\", err) &#125;&#125; ç¼–å†™å®¢æˆ·ç«¯ä»£ç 12345678910111213141516171819202122232425262728293031323334353637// client/main.gopackage mainimport ( \"context\" \"flag\" \"github.com/silenceboychen/gostudy/demo_1/helloworld\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" \"log\" \"time\")var ( addr = flag.String(\"addr\", \"localhost:8080\", \"the address to connect to\") name = flag.String(\"name\", \"world\", \"Name to greet\"))func main() &#123; flag.Parse() conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials())) if err != nil &#123; log.Fatalf(\"did not connect: %v\", err) &#125; defer conn.Close() c := helloworld.NewHelloClient(conn) ctx, cancel := context.WithTimeout(context.Background(), time.Second) defer cancel() r, err := c.SayHello(ctx, &amp;helloworld.HelloRequest&#123;Name: *name&#125;) if err != nil &#123; log.Fatalf(\"could not greet: %v\", err) &#125; log.Printf(\"Greeting: %s\", r.GetMessage())&#125; é¡¹ç›®è¿è¡Œå¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚ æœåŠ¡ç«¯ 1234$ go run server/main.go2023/06/16 18:56:57 server listening at [::]:80802023/06/16 18:57:02 Received: world å®¢æˆ·ç«¯ 123$ go run client/main.go2023/06/16 18:57:02 Greeting: Hello world ä»¥ä¸Šä¾¿æ˜¯goå®ç°å•é¡¹rpcçš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ­å–œä½ ï¼Œä»¥åŠæˆåŠŸå…¥é—¨grpcï¼Œä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»æœåŠ¡ç«¯æµå¼rpcã€‚","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"ubuntu20.04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®","slug":"ubuntu20-04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®","date":"2023-06-14T03:00:52.000Z","updated":"2023-07-21T05:36:57.831Z","comments":true,"path":"2023/06/14/ubuntu20-04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®/","link":"","permalink":"https://www.silenceboy.com/2023/06/14/ubuntu20-04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®/","excerpt":"","text":"æœ€è¿‘åœ¨ubuntu20.04ç³»ç»Ÿä¸Šå®‰è£…äº†æœç‹—è¾“å…¥æ³•ä¹‹åï¼Œå‘ç°vscodeï¼Œideaï¼Œgolangç­‰ç¼–è¾‘å™¨çš„å…¨å±€æœç´¢å¿«æ·é”®Ctrl+Shift+Fæ— æ³•ä½¿ç”¨äº†ï¼Œç»æ’æŸ¥å‘ç°æ˜¯å› ä¸ºæœç‹—è¾“å…¥æ³•å ç”¨äº†è¯¥å¿«æ·é”®ï¼Œæ˜¯æœç‹—è¾“å…¥æ³•çš„ç¹ç®€ä½“åˆ‡æ¢å¿«æ·é”®ã€‚æ‰“å¼€æœç‹—è¾“å…¥æ³•çš„è®¾ç½®é¡µé¢å¯ä»¥åœ¨é«˜çº§é€‰é¡¹é‡Œçœ‹åˆ°ã€‚ ä½†æ˜¯åœ¨è®¾ç½®é‡Œå–æ¶ˆç®€ç¹åˆ‡æ¢å¿«æ·é”®çš„å‹¾é€‰ä¿å­˜ä¹‹åå‘ç°æ— æ•ˆæœï¼Œå¿«æ·é”®ä¾ç„¶è¢«å ç”¨ã€‚ æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š ä¿®æ”¹æœç‹—è¾“å…¥æ³•é…ç½®æ–‡ä»¶ 1$ vim ~/.config/sogoupinyin/conf/env.ini æ‰¾åˆ°ShortCutFanJiané…ç½®ï¼Œå°†å€¼æ”¹ä¸º0ï¼›é»˜è®¤1ï¼Œç­‰äºå¼€å¯ï¼›æ”¹ä¸º0è¡¨ç¤ºå…³é—­ æ‰“å¼€ç³»ç»Ÿè¾“å…¥æ³•é…ç½® é™„åŠ ç»„ä»¶ä¸­æ‰¾åˆ°ç®€ç¹è½¬æ¢ï¼Œç‚¹å‡»é…ç½® å°†é»˜è®¤å¿«æ·é”®è®¾ç½®ä¸ºç©º, ä¿å­˜å³å¯ã€‚ å¦‚æœå‘ç°æœªç”Ÿæ•ˆï¼Œéœ€è¦é‡å¯ç”µè„‘ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"}]},{"title":"gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹","slug":"gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹","date":"2023-06-08T05:33:05.000Z","updated":"2023-06-08T05:34:01.833Z","comments":true,"path":"2023/06/08/gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹/","link":"","permalink":"https://www.silenceboy.com/2023/06/08/gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹/","excerpt":"","text":"goç¯å¢ƒæ­å»ºä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚ ä»¥ä¸‹å†…å®¹çš„æ‰§è¡Œç¯å¢ƒä¸ºï¼š ç³»ç»Ÿï¼šubuntu20.04 goç‰ˆæœ¬ï¼šv1.19 é¡¹ç›®åˆ›å»ºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªgoå¼€å‘å®‰å“åº”ç”¨çš„æµ‹è¯•ç›®å½•ï¼š 12$ mkdir $GOPATH/src/goapp &amp;&amp; cd $GOPATH/src/goapp$ go mod init åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å–å®˜æ–¹æä¾›çš„ç¤ºä¾‹é¡¹ç›®ï¼š 1$ go get -d golang.org/x/mobile/example/basic å®‰è£…gomibile12$ go install golang.org/x/mobile/cmd/gomobile@latest$ gomobile init ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰“åŒ…å®‰å“åº”ç”¨ï¼š 1$ gomobile build -target=android -androidapi 19 golang.org/x/mobile/example/basic æ­¤æ—¶ä¼šå‘ç°ä»¥ä¸‹ç›¸å…³é”™è¯¯ï¼š gomobile: could not locate Android SDK: stat /home/test/Android/Sdk: no such file or directory; Android SDK was not found at /home/test/Android/Sdk gomobile: no usable NDK in /home/test/Android/Sdk: open /home/test/Android/Sdk/ndk: no such file or directory, open /home/test/Android/Sdk/ndk-bundle/meta/platforms.json: no such file or directory è¿™æ˜¯å› ä¸ºæœ¬åœ°æ²¡æœ‰é…ç½®å®‰å“å¼€å‘ç¯å¢ƒå¯¼è‡´çš„ã€‚ å®‰å“å¼€å‘ç¯å¢ƒæ­å»ºAndroid Studioå®‰è£…è®¿é—®è°·æ­Œä¸­å›½å¼€å‘è€…ç½‘ç«™ä¸‹è½½ Android Studio ç¼–è¾‘å™¨ï¼šhttps://developer.android.google.cn/studio ä¸‹è½½å®Œæˆåæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 12345678910111213141516# å°†å®‰è£…åŒ…ç§»åˆ°/optç›®å½•ä¸‹ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™$ sudo mv android-studio-2022.2.1.20-linux.tar.gz /opt# è¿›å…¥/optç›®å½•$ cd /opt# è§£å‹æ–‡ä»¶ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™$ sudo tar -xzvf android-studio-2022.2.1.20-linux.tar.gz# è¿è¡ŒAndroid Studio$ ./android-studio/bin/studio.sh==========================================================# å¦‚æœæƒ³åœ¨ä»»æ„ä½ç½®æ‰“å¼€android studioï¼Œå¯é…ç½®è½¯è¿æ¥$ sudo ln -s /opt/android-studio/bin/studio.sh /usr/bin/android-studio# é…ç½®å®Œæˆä»¥ååœ¨ä»»æ„ä½ç½®æ‰§è¡Œandroid-studioå³å¯æ‰“å¼€åº”ç”¨$ android-studio ç¬¬ä¸€æ¬¡æ‰“å¼€android-studioéœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼Œä¸€ç›´é€‰æ‹©ä¸‹ä¸€æ­¥è®¾ç½®å³å¯ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š é€‰æ‹©è‡ªå®šä¹‰å®‰è£… æ’ä»¶å®‰è£…ï¼Œå¯ä»¥å…¨é€‰ æ’ä»¶å®‰è£…å®Œæˆä¹‹åç‚¹å‡»Finishå³å¯æ‰“å¼€åº”ç”¨ã€‚ å®‰è£…NDKAndroid studioå®‰è£…å®Œæˆåå¹¶æ²¡æœ‰ä¸‡äº‹å¤§å‰ï¼Œé»˜è®¤å¹¶æ²¡å®‰è£…NDKï¼Œéœ€è¦è‡ªå·±æ‰‹å·¥å†å®‰è£…ã€‚ ç‚¹å‡»okä¼šè‡ªåŠ¨ä¸‹è½½é€‰æ‹©çš„æ’ä»¶ã€‚ ç¼–è¯‘å®‰å“åº”ç”¨æ­¤æ—¶ç»§ç»­å›åˆ°ä¹‹å‰çš„é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œå®‰å“æ„å»ºå‘½ä»¤ 1$ gomobile build -target=android -androidapi 19 golang.org/x/mobile/example/basic è¿™ä¸€æ¬¡æ²¡æœ‰å‡ºç°æŠ¥é”™ï¼Œå¹¶ä¸”ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªbasic.apkæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å³ä¸ºæ‰“åŒ…æˆåŠŸçš„å®‰å“åº”ç”¨ï¼Œå¯ä»¥å®‰è£…ä¸€ä¸ªå®‰å“æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•äº†ã€‚ å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨æ¨¡æ‹Ÿå™¨æˆ‘é€‰ç”¨äº†Anbox 1$ sudo snap install --devmode --edge anbox å®‰è£…å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®‰å“æ¨¡æ‹Ÿå™¨ï¼š 1$ anbox.appmgr æˆ‘æ¯”è¾ƒé¡ºåˆ©æ²¡æœ‰é‡åˆ°æŠ¥é”™ï¼Œå¦‚æœé‡åˆ°æ¨¡æ‹Ÿå™¨å¯åŠ¨æŠ¥é”™ï¼Œå¯ä»¥å‚è€ƒæ–‡ç« ï¼šhttps://juejin.cn/post/7152407243974148127 è§£å†³ æ‰“å¼€åçš„ç•Œé¢å¦‚ä¸‹ï¼š æµ‹è¯•åº”ç”¨å®‰è£…å®‰å“åº”ç”¨è¿˜éœ€è¦adbå‘½ä»¤ï¼š 1$ sudo apt install android-tools-adb -y ç„¶ååœ¨æœ€å¼€å§‹çš„é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…åº”ç”¨ï¼Œæ­¤æ—¶å®‰å“æ¨¡æ‹Ÿå™¨å¿…é¡»æ˜¯æ‰“å¼€çš„çŠ¶æ€ï¼š 123$ asb install ./basic.apk# æˆ–è€…$ adb install /home/test/go/src/goapp/basic.apk å®‰è£…æˆåŠŸåå³å¯åœ¨æ¨¡æ‹Ÿå™¨ä¸­çœ‹åˆ°è¯¥åº”ç”¨ å•å‡»æ‰“å¼€ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š æ­¤æ–‡ç« ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¸®åŠ©ä½ äº†è§£å¦‚ä½•ä½¿ç”¨golangå¼€å‘å®‰å“åº”ç”¨çš„æµç¨‹ï¼Œæµç¨‹æ‰“é€šä¹‹åï¼Œå¯ä»¥ç»“åˆè‡ªå·±çš„æƒ³æ³•ï¼Œåšä¸€äº›è‡ªå·±çš„åº”ç”¨ã€‚","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"goè¯­è¨€1.18 go:linkname must refer to declared function or variableè§£å†³åŠæ³•","slug":"goè¯­è¨€1-18-go-linkname-must-refer-to-declared-function-or-variableè§£å†³åŠæ³•","date":"2022-07-12T06:13:58.000Z","updated":"2022-07-12T06:14:58.301Z","comments":true,"path":"2022/07/12/goè¯­è¨€1-18-go-linkname-must-refer-to-declared-function-or-variableè§£å†³åŠæ³•/","link":"","permalink":"https://www.silenceboy.com/2022/07/12/goè¯­è¨€1-18-go-linkname-must-refer-to-declared-function-or-variableè§£å†³åŠæ³•/","excerpt":"","text":"åœ¨macosç¯å¢ƒä¸­ï¼Œgo1.18åˆšåˆšéƒ¨ç½²åï¼Œä¼šæŠ¥é”™å¦‚ä¸‹ï¼š 12345678910111213golang.org/x/sys/unix# golang.org/x/sys/unixvendor/golang.org/x/sys/unix/syscall_darwin.1_13.go:29:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.1_13.go:27:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.1_13.go:40:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:28:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:43:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:59:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:75:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:90:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:105:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:121:3: //go:linkname must refer to declared function or variablevendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:121:3: too many errors è§£å†³åŠæ³•å¦‚ä¸‹ï¼š 1.è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1go get -u golang.org/x/sys 2.è¿è¡Œï¼š 1go mod vendor","categories":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"}],"tags":[{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"}]},{"title":"macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«","slug":"macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«","date":"2022-05-20T06:07:27.000Z","updated":"2022-05-20T06:19:34.769Z","comments":true,"path":"2022/05/20/macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«/","link":"","permalink":"https://www.silenceboy.com/2022/05/20/macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«/","excerpt":"","text":"é¦–å…ˆæ‰¾åˆ°å®‰è£…å¤©ç©ºå«å£«çš„ç›®å½•ï¼š/Library/Application Support/SkyGuard ç”µè„‘å…³æœºï¼Œé•¿æŒ‰å¼€æœºé”®ç›´åˆ°è¿›å…¥recoveryæ¨¡å¼, ç‚¹è‡ªå·±çš„ç”¨æˆ·ï¼Œè¾“å…¥å¯†ç ï¼Œç‚¹ä¸‹ä¸€æ­¥ï¼Œç„¶ååˆ°å·¦ä¸Šæ–¹æ‰¾åˆ°ç»ˆç«¯æ‰“å¼€ diskutil list æŸ¥çœ‹ç›®å‰çš„ç£ç›˜, æ‰¾åˆ°æ ‡è®°æœ‰synthesizedçš„ç£ç›˜ï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ç›˜ï¼ˆæœ‰dataå…³é”®å­—ï¼‰ï¼Œè¿™é‡Œå‡è®¾ä¸ºï¼š/dev/disk3s3 æ‰§è¡Œdiskutil mount /dev/disk3s3, å¯èƒ½ä¼šæŠ¥ this is an encrypted and locked APFS Volumeçš„é”™ï¼Œæ ¹æ®æç¤ºæ‰§è¡Œï¼šdiskutil apfs unlockVolume /dev/disk3s3ï¼Œç„¶åè¾“å…¥å¯†ç ã€‚å†æ¬¡æ‰§è¡Œdiskutil mount /dev/disk3s3å³å¯ã€‚ è¿›å…¥/Volumes/Macintosh HD/Library/Application Supportç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°æœ‰SkyGuardæ–‡ä»¶ã€‚ æ‰§è¡Œrm -rf SkyGuardåˆ é™¤å¤©ç©ºä½ç½®æ–‡ä»¶ç›®å½• rebooté‡å¯ç”µè„‘ï¼Œå‘ç°å¤©ç©ºå«å£«å·²æˆåŠŸå¸è½½","categories":[{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/tags/mac/"},{"name":"å¤©ç©ºå«å£«","slug":"å¤©ç©ºå«å£«","permalink":"https://www.silenceboy.com/tags/å¤©ç©ºå«å£«/"}]},{"title":"macå¸è½½jdk","slug":"macå¸è½½jdk","date":"2022-04-29T09:25:19.000Z","updated":"2022-04-29T09:27:28.102Z","comments":true,"path":"2022/04/29/macå¸è½½jdk/","link":"","permalink":"https://www.silenceboy.com/2022/04/29/macå¸è½½jdk/","excerpt":"","text":"åˆ é™¤è¿è¡Œè·¯å¾„å’Œè¿è¡Œç¯å¢ƒç­‰ 123sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.pluginsudo rm -fr /Library/PreferencesPanes/JavaControlPanel.prefPanesudo rm -fr ~/Library/Application\\ Support/Java åˆ é™¤å½“å‰ç‰ˆæœ¬çš„jdk 1sudo rm -rf /Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk æ£€æŸ¥æ˜¯å¦å¸è½½æˆåŠŸ 1java -version","categories":[{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/tags/mac/"},{"name":"jdk","slug":"jdk","permalink":"https://www.silenceboy.com/tags/jdk/"}]},{"title":"dockerè·¨å¹³å°æ‰“åŒ…é—®é¢˜does not match the detected host platform","slug":"dockerè·¨å¹³å°æ‰“åŒ…é—®é¢˜does-not-match-the-detected-host-platform","date":"2022-04-29T03:44:40.000Z","updated":"2022-04-29T03:56:38.616Z","comments":true,"path":"2022/04/29/dockerè·¨å¹³å°æ‰“åŒ…é—®é¢˜does-not-match-the-detected-host-platform/","link":"","permalink":"https://www.silenceboy.com/2022/04/29/dockerè·¨å¹³å°æ‰“åŒ…é—®é¢˜does-not-match-the-detected-host-platform/","excerpt":"","text":"é—®é¢˜æœ€è¿‘åœ¨mac M1ä¸Šæ„å»ºçš„dockeré•œåƒï¼Œå‘å¸ƒåˆ°ubuntu20ç³»ç»Ÿçš„æœåŠ¡å™¨ä¸Šåï¼Œä¸€ç›´è¿è¡Œå¤±è´¥ã€‚è¾“å‡ºä»¥ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š 1The requested image&apos;s platform (linux/arm64) does not match the detected host platform (linux/amd64) and no specific platform was requested åœ¨ä½¿ç”¨docker logs æŸ¥çœ‹dockeræ—¥å¿—çš„æ—¶å€™æç¤ºï¼š 1standard_init_linux.go:228: exec user process caused: exec format errorâ€‹ è§£å†³æ–¹æ¡ˆ mac M1ä¸Šè®¾ç½®â€experimentalâ€: true å®ç°è·¨å¹³å°æ‰“åŒ… docker buildx build â€“platform linux/amd64 -t name .","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/tags/mac/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://www.silenceboy.com/tags/ubuntu/"}]},{"title":"macç”µè„‘M1èŠ¯ç‰‡å¦‚ä½•å®‰è£…ä½ç‰ˆæœ¬nodeç¯å¢ƒ","slug":"macç”µè„‘M1èŠ¯ç‰‡å¦‚ä½•å®‰è£…ä½ç‰ˆæœ¬nodeç¯å¢ƒ","date":"2021-10-22T09:15:17.000Z","updated":"2021-10-22T09:25:13.767Z","comments":true,"path":"2021/10/22/macç”µè„‘M1èŠ¯ç‰‡å¦‚ä½•å®‰è£…ä½ç‰ˆæœ¬nodeç¯å¢ƒ/","link":"","permalink":"https://www.silenceboy.com/2021/10/22/macç”µè„‘M1èŠ¯ç‰‡å¦‚ä½•å®‰è£…ä½ç‰ˆæœ¬nodeç¯å¢ƒ/","excerpt":"","text":"åœ¨mac M1ä¸Šå®‰è£…v14 åŠä»¥ä¸‹çš„è€ç‰ˆæœ¬ Nodeä¼šå‡ºç°é—ªé€€é—®é¢˜ï¼Œç©¶å…¶åŸå› è¿˜æ˜¯å› ä¸ºä½ç‰ˆæœ¬çš„ node å¹¶ä¸æ˜¯åŸºäº arm64 æ¶æ„çš„ï¼Œæ‰€ä»¥ä¸é€‚é… M1 èŠ¯ç‰‡ã€‚åœ¨è¿™é‡Œæ•™å¤§å®¶ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±èƒ½æˆåŠŸå®‰è£…ä¸Šä½ç‰ˆæœ¬ Nodeã€‚ æ–¹æ³•ä¸€åœ¨ç»ˆç«¯ä¸­ï¼Œè¾“å…¥ï¼š 1arch -x86_64 zsh é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥è®© shell è¿è¡Œåœ¨Rosetta2ä¸‹ã€‚ä¹‹åä½ å¯ä»¥é€šè¿‡ nvm install v14 æ¥å®‰è£…ä½ç‰ˆæœ¬ Nodeã€‚åœ¨æ­¤ä¹‹åï¼Œæ‚¨å¯ä»¥ä¸ç”¨åœ¨ Rosetta2 ä¸­å°±å¯ä»¥ä½¿ç”¨å®‰è£…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¯ä»¥å°† Node v15ä¸å…¶ä»–èŠ‚ç‚¹ç‰ˆæœ¬äº’æ¢ä½¿ç”¨ã€‚ æ–¹æ³•äºŒæ–¹æ³•äºŒå°±æ˜¯é€šè¿‡ Rosetta2 æ¥å¯åŠ¨ç»ˆç«¯ï¼Œè¿™æ ·é€šè¿‡ Rosetta2 è½¬è¯‘åˆ° x86 æ¶æ„ä¸­æ‰§è¡Œå®‰è£…ï¼Œä¹Ÿä¸€æ ·å¯ä»¥å®‰è£…æˆåŠŸã€‚ åœ¨ finder ä¸­ï¼Œç‚¹å‡»åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨å®ç”¨å·¥å…·ä¸­æ‰¾åˆ°ç»ˆç«¯ (Terminal) å³é”®ç»ˆç«¯ï¼Œç‚¹å‡»è·å–ä¿¡æ¯ å‹¾é€‰ Open using Rosetta é‡å¯ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œ nvm install v14 å‘½ä»¤","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/tags/mac/"},{"name":"M1","slug":"M1","permalink":"https://www.silenceboy.com/tags/M1/"}]},{"title":"Arch linux i3wmè¿è¡Œä¼ä¸šå¾®ä¿¡å’Œå¾®ä¿¡","slug":"Arch-linux-i3wmè¿è¡Œä¼ä¸šå¾®ä¿¡å’Œå¾®ä¿¡","date":"2021-05-26T14:05:02.000Z","updated":"2021-09-27T07:27:40.435Z","comments":true,"path":"2021/05/26/Arch-linux-i3wmè¿è¡Œä¼ä¸šå¾®ä¿¡å’Œå¾®ä¿¡/","link":"","permalink":"https://www.silenceboy.com/2021/05/26/Arch-linux-i3wmè¿è¡Œä¼ä¸šå¾®ä¿¡å’Œå¾®ä¿¡/","excerpt":"","text":"å½“ä½ è¿è¡Œåœ¨i3wmç¯å¢ƒä¸‹æ—¶ï¼Œè¿è¡Œé€šè¿‡deepin-wineå®‰è£…çš„ä¼ä¸šå¾®ä¿¡å’Œå¾®ä¿¡æ—¶ï¼Œæ‰“å¼€è½¯ä»¶æ—¶ä¼šå‡ºç°é—ªé€€çš„ç°è±¡ï¼Œå¯åŠ¨ä¸äº†è½¯ä»¶ã€‚æˆ–ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œå‘½ä»¤ä¹Ÿå¯åŠ¨ä¸äº†ç¨‹åºï¼Œä¼šå‡ºç°ä»¥ä¸‹æç¤ºï¼š 12345X Error of failed request: BadWindow (invalid Window parameter) Major opcode of failed request: 20 (X_GetProperty) Resource id in failed request: 0x0 Serial number of failed request: 10 Current serial number in output stream: 10 è§£å†³æ–¹æ¡ˆ è¿™ä¸ªé—®é¢˜å…¶å®å’Œ KDE æ— å…³, åº”è¯¥æ˜¯ deepin åœ¨æ‰“åŒ… deepin-wine çš„è¿‡ç¨‹ä¸­æœ‰æ„æˆ–è€…æ— æ„åŠ å…¥äº† GNOME ä¾èµ–ã€‚ æ‰§è¡Œ /usr/lib/gnome-settings-daemon/gsd-xsettings å³å¯.æˆ–è€…åå°è¿è¡Œï¼š 1nohup /usr/lib/gnome-settings-daemon/gsd-xsettings &gt; /dev/null 2&gt;&amp;1 &amp; å¦‚æœ GNOME çš„ç‰ˆæœ¬è¾ƒä½(æ¯”å¦‚Debian 9), æ²¡æœ‰å•ç‹¬çš„ gsd-xsettings å¯æ‰§è¡Œæ–‡ä»¶, åˆ™æ‰§è¡Œ gnome-settings-daemon. ç„¶ååˆ‡æ¢åˆ°å¯¹åº”ç›®å½• cd /opt/deepinwine/apps/Deepin-WXWork æˆ–è€… /opt/deepinwine/apps/Deepin-WeChatè¿è¡Œ ./run.shå³å¯å¯åŠ¨è½¯ä»¶ã€‚ ç”±äºæ¯æ¬¡éƒ½æ‰§è¡Œä¸Šè¾¹çš„å‘½ä»¤å¾ˆç¹çï¼Œå¯ä»¥å°†å…¶åŠ å…¥i3çš„å¯åŠ¨é¡¹ï¼Œæ¯æ¬¡å¼€æœºåˆ¶åŠ¨è®¾ç½®å³å¯ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"},{"name":"i3wm","slug":"i3wm","permalink":"https://www.silenceboy.com/tags/i3wm/"},{"name":"i3","slug":"i3","permalink":"https://www.silenceboy.com/tags/i3/"}]},{"title":"MySQL TEXTæ•°æ®ç±»å‹çš„æœ€å¤§é•¿åº¦","slug":"MySQL-TEXTæ•°æ®ç±»å‹çš„æœ€å¤§é•¿åº¦","date":"2020-12-22T04:33:17.000Z","updated":"2021-09-27T07:27:40.437Z","comments":true,"path":"2020/12/22/MySQL-TEXTæ•°æ®ç±»å‹çš„æœ€å¤§é•¿åº¦/","link":"","permalink":"https://www.silenceboy.com/2020/12/22/MySQL-TEXTæ•°æ®ç±»å‹çš„æœ€å¤§é•¿åº¦/","excerpt":"","text":"ç±»å‹ é•¿åº¦ TINYTEXT 256 bytes TEXT 65,535 bytes ~64kb MEDIUMTEXT 16,777,215 bytes ~16MB LONGTEXT 4,294,967,295 bytes ~4GB","categories":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"}]},{"title":"ubuntu18.04å®‰è£…jdk1.8","slug":"ubuntu18-04å®‰è£…jdk1-8","date":"2020-11-28T06:30:31.000Z","updated":"2021-09-27T07:27:40.445Z","comments":true,"path":"2020/11/28/ubuntu18-04å®‰è£…jdk1-8/","link":"","permalink":"https://www.silenceboy.com/2020/11/28/ubuntu18-04å®‰è£…jdk1-8/","excerpt":"","text":"ä¸‹è½½jdkå®‰è£…åŒ…https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html è§£å‹1tar -zxvf jdk-8u171-linux-x64.tar.gz ç§»åŠ¨åˆ°è‡ªå·±æƒ³æ”¾çš„ä½ç½®12##å°†æ–‡ä»¶ä»ä¸‹è½½ç›®å½• æŒªåˆ°/usr/localä¸‹sudo mv jdk1.8.0_171 /usr/local/jdk1.8 è®¾ç½®ç¯å¢ƒå˜é‡ è®¾ç½®å…¨å±€ç”Ÿæ•ˆ ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ï¼Œä½œç”¨ä¸æ‰€æœ‰ç”¨æˆ·ï¼š vim /etc/profile 1234 export JAVA_HOME=/usr/local/jdk1.8export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=.:$&#123;JAVA_HOME&#125;/bin:$PATH è®¾ç½®å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ ä¿®æ”¹å½“å‰ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œåªä½œç”¨äºå½“å‰ç”¨æˆ·ï¼švim ~/.bashrc 1234 export JAVA_HOME=/usr/local/jdk1.8export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=.:$&#123;JAVA_HOME&#125;/bin:$PATH ä½¿ä¿®æ”¹çš„é…ç½®ç«‹åˆ»ç”Ÿæ•ˆ1234##å¯¹åº”æ–¹æ³•ä¸€ï¼šsource /etc/profile ##å¯¹åº”æ–¹æ³•äºŒï¼šsource ~/.bashrc æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ1java -version","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"ubuntu","slug":"ubuntu","permalink":"https://www.silenceboy.com/tags/ubuntu/"},{"name":"jdk","slug":"jdk","permalink":"https://www.silenceboy.com/tags/jdk/"},{"name":"java","slug":"java","permalink":"https://www.silenceboy.com/tags/java/"}]},{"title":"alsamixeræ§åˆ¶éŸ³é‡","slug":"alsamixeræ§åˆ¶éŸ³é‡","date":"2020-11-28T05:51:40.000Z","updated":"2021-09-27T07:27:40.438Z","comments":true,"path":"2020/11/28/alsamixeræ§åˆ¶éŸ³é‡/","link":"","permalink":"https://www.silenceboy.com/2020/11/28/alsamixeræ§åˆ¶éŸ³é‡/","excerpt":"","text":"è§£é™¤å„å£°é“çš„é™éŸ³ç›®å‰ç‰ˆæœ¬çš„ ALSA å®‰è£…åï¼Œæ‰€æœ‰å£°é“é»˜è®¤æ˜¯é™éŸ³çš„ï¼Œå¿…é¡»æ‰‹åŠ¨è§£é™¤ã€‚ ä½¿ç”¨ alsamixer çš„ ncurses ç•Œé¢ï¼Œé…ç½®ååˆ†ç®€å•ï¼š 1$ alsamixer æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ amixerï¼š 1$ amixer sset Master unmute åœ¨alsamixer ä¸­ï¼Œä¸‹æ–¹æ ‡æœ‰ MM çš„å£°é“æ˜¯é™éŸ³çš„ï¼Œè€Œæ ‡æœ‰ 00 çš„é€šé“å·²ç»å¯ç”¨ã€‚ ä½¿ç”¨ â† å’Œ â†’ æ–¹å‘é”®ï¼Œé€‰ä¸­ Master å’Œ PCM å£°é“ã€‚æŒ‰ä¸‹ m é”®è§£é™¤é™éŸ³ã€‚ä½¿ç”¨ â†‘ æ–¹å‘é”®å¢åŠ éŸ³é‡ï¼Œç›´åˆ°å¢ç›Šå€¼ä¸º0ã€‚è¯¥å€¼æ˜¾ç¤ºåœ¨å·¦ä¸Šæ–¹Item: å­—æ®µåã€‚è¿‡é«˜çš„å¢ç›Šå€¼ä¼šå¯¼è‡´å£°éŸ³å¤±çœŸã€‚ è¦å¯ç”¨éº¦å…‹é£ï¼Œåˆ‡æ¢è‡³ Capture é€‰é¡¹å¡ï¼ŒæŒ‰ä¸‹ F4ï¼ŒæŒ‰ä¸‹ ç©ºæ ¼ å¯ç”¨å…¶ä¸­ä¸€ä¸ªå£°é“å³å¯ã€‚ æŒ‰ä¸‹ Esc é”®é€€å‡º alsamixerã€‚ alsamixer ç»ˆç«¯äº¤äº’å¼è®¾ç½®éŸ³é‡123F6 é€‰æ‹©ç½‘å¡F2 æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿä¸­å·²æœ‰ç½‘å¡ä¿¡æ¯Esc åé€€ 123M é™éŸ³çŠ¶æ€åˆ‡æ¢Q,W,E å¢å¤§ å·¦,å³,é€šé“ çš„éŸ³é‡Z,X,C å‡å° å·¦,å³,é€šé“ çš„éŸ³é‡ amixer å‘½ä»¤è¡Œæ§åˆ¶ç³»ç»Ÿå£°éŸ³1cat /proc/asound/cards # æŸ¥çœ‹ç³»ç»Ÿå£°å¡ è¾“å‡ºå¦‚ä¸‹ï¼š 120 [PCH ]: HDA-Intel - HDA Intel PCH HDA Intel PCH at 0xe1340000 irq 130 è®¾ç½®å£°éŸ³ 1amixer -c 1 -q set Master 2dB+ unmute 12-c åˆ¶å®šå£°å¡id, é»˜è®¤ä¸º0-q å®‰é™æ¨¡å¼ï¼Œä¸è¾“å‡ºç»“æœ","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"}]},{"title":"ä½¿ç”¨npmå®‰è£…ä¾èµ–æ—¶æŠ¥é”™ï¼šgyp: No Xcode or CLT version detected!","slug":"ä½¿ç”¨npmå®‰è£…ä¾èµ–æ—¶æŠ¥é”™ï¼šgyp-No-Xcode-or-CLT-version-detected","date":"2020-05-05T08:47:52.000Z","updated":"2021-09-27T07:27:40.446Z","comments":true,"path":"2020/05/05/ä½¿ç”¨npmå®‰è£…ä¾èµ–æ—¶æŠ¥é”™ï¼šgyp-No-Xcode-or-CLT-version-detected/","link":"","permalink":"https://www.silenceboy.com/2020/05/05/ä½¿ç”¨npmå®‰è£…ä¾èµ–æ—¶æŠ¥é”™ï¼šgyp-No-Xcode-or-CLT-version-detected/","excerpt":"","text":"æœ€è¿‘åœ¨macOSä¸­ä½¿ç”¨npmå®‰è£…æ¨¡å—ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š 1234567891011121314151617181920212223npm WARN deprecated fsevents@1.2.12: fsevents 1 will break on node v14+. Upgrade to fsevents 2 with massive improvements.&gt; fsevents@1.2.12 install /Users/chenhao/outsourcing/egg-car/node_modules/fsevents&gt; node-gyp rebuildNo receipt for &apos;com.apple.pkg.CLTools_Executables&apos; found at &apos;/&apos;.No receipt for &apos;com.apple.pkg.DeveloperToolsCLILeo&apos; found at &apos;/&apos;.No receipt for &apos;com.apple.pkg.DeveloperToolsCLI&apos; found at &apos;/&apos;.gyp: No Xcode or CLT version detected!gyp ERR! configure errorgyp ERR! stack Error: `gyp` failed with exit code: 1gyp ERR! stack at ChildProcess.onCpExit (/Users/chenhao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:351:16)gyp ERR! stack at ChildProcess.emit (events.js:198:13)gyp ERR! stack at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)gyp ERR! System Darwin 19.4.0gyp ERR! command &quot;/Users/chenhao/.nvm/versions/node/v10.16.0/bin/node&quot; &quot;/Users/chenhao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&quot; &quot;rebuild&quot;gyp ERR! cwd /Users/chenhao/outsourcing/egg-car/node_modules/fseventsgyp ERR! node -v v10.16.0gyp ERR! node-gyp -v v5.0.5gyp ERR! not ok ç½‘ä¸ŠæŸ¥æ‰¾è§£å†³æ–¹æ¡ˆï¼Œéƒ½æ˜¯é€šè¿‡æ‰§è¡Œxcode-select --installå‘½ä»¤ä¿®å¤ï¼Œä½†æ˜¯æ‰§è¡Œè¯¥å‘½ä»¤æ—¶ä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š 1xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates æœ€ç»ˆçš„è§£å†³åŠæ³•æ˜¯å…ˆå¸è½½ä¹‹å‰å®‰è£…çš„xcode-selectï¼Œå¹¶é‡æ–°å®‰è£…ï¼š 12$ sudo rm -rf $(xcode-select -print-path)$ xcode-select --install","categories":[{"name":"npm","slug":"npm","permalink":"https://www.silenceboy.com/categories/npm/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://www.silenceboy.com/tags/npm/"}]},{"title":"zshåœ¨scpæ—¶ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ","slug":"zshåœ¨scpæ—¶ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ","date":"2020-03-06T07:14:33.000Z","updated":"2021-09-27T07:27:40.446Z","comments":true,"path":"2020/03/06/zshåœ¨scpæ—¶ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ/","link":"","permalink":"https://www.silenceboy.com/2020/03/06/zshåœ¨scpæ—¶ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"é—®é¢˜scpæ˜¯ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªæœ¬åœ°ä¸è¿œç¨‹æœåŠ¡å™¨ç›¸äº’æ‹·è´æ•°æ®çš„å‘½ä»¤ï¼Œzshæ˜¯æˆ‘æœ€å–œæ¬¢çš„shellï¼Œä½†æ˜¯åœ¨zshä¸‹ä½¿ç”¨scpæ¥æ‹·è´è¿œç¨‹æœåŠ¡å™¨çš„æ–‡ä»¶æ—¶ï¼Œå´å‡ºç°è¿™æ ·çš„é”™è¯¯ã€‚ 12$ scp -r test-server:/etc/nginx/conf.d/* .zsh: no matches found: test-server:/etc/nginx/conf.d/* åŒæ ·åœ°å‘½ä»¤ï¼Œåœ¨bashä¸‹ç¡®å®å¯ä»¥æ‰§è¡Œçš„ï¼Œè¿™ä¸ªåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç”±äºzshä¸ä¼šæŒ‰ç…§è¿œç¨‹åœ°å€ä¸Šçš„æ–‡ä»¶å»æ‰©å±•å‚æ•°ï¼Œå½“ä½ ä½¿ç”¨test-server:/etc/nginx/conf.d/*ï¼Œå› ä¸ºæœ¬åœ°å½“å‰ç›®å½•ä¸­ï¼Œæ˜¯ä¸å­˜åœ¨test-server:/etc/nginx/conf.d/*ï¼Œæ‰€ä»¥åŒ¹é…å¤±è´¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œbash åœ¨åŒ¹é…å¤±è´¥æ—¶å°±ä½¿ç”¨åŸæ¥çš„å†…å®¹ï¼Œzsh åˆ™æŠ¥å‘Šä¸€ä¸ªno matchesçš„é”™è¯¯ã€‚ è§£å†³æ–¹æ¡ˆåœ¨zshä¸­æ‰§è¡Œsetopt nonomatchï¼Œå‘Šè¯‰å®ƒä¸è¦æŠ¥å‘Šno matchesçš„é”™è¯¯ï¼Œè€Œæ˜¯å½“åŒ¹é…å¤±è´¥æ—¶ç›´æ¥ä½¿ç”¨åŸæ¥çš„å†…å®¹ã€‚ å®é™…ä¸Šï¼Œä¸ç®¡æ˜¯ bash è¿˜æ˜¯ zshï¼Œä¸ç®¡è®¾ç½®äº†ä»€ä¹ˆé€‰é¡¹ï¼Œåªè¦æŠŠtest-server:/etc/nginx/conf.d/*åŠ ä¸Šå¼•å·ï¼Œå¦‚&quot;test-server:/etc/nginx/conf.d/*&quot;ï¼Œå°±å¯è§£å†³é—®é¢˜ã€‚ å½“ç„¶æ ¹æœ¬çš„è§£å†³åŠæ³•è¿˜æ˜¯å‘Šè¯‰zshä¸è¦æŠ¥å‘Šno matchesé”™è¯¯ã€‚ æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯ä»¥ä¸€åŠ³æ°¸é€¸ï¼š 123$ echo &quot;setopt nonomatch&quot; &gt;&gt; ~/.zshrcæˆ–$ echo &quot;set -o nonomatch&quot; &gt;&gt; ~/.zshrc","categories":[{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/categories/shell/"}],"tags":[{"name":"scp","slug":"scp","permalink":"https://www.silenceboy.com/tags/scp/"},{"name":"zsh","slug":"zsh","permalink":"https://www.silenceboy.com/tags/zsh/"}]},{"title":"git clone å‡ºç°ssh: connect to host github.com port 22: Connection timed outè§£å†³æ–¹æ¡ˆ","slug":"git-clone-å‡ºç°ssh-connect-to-host-github-com-port-22-Connection-timed-outè§£å†³æ–¹æ¡ˆ","date":"2020-03-04T05:07:40.000Z","updated":"2021-09-27T07:27:40.440Z","comments":true,"path":"2020/03/04/git-clone-å‡ºç°ssh-connect-to-host-github-com-port-22-Connection-timed-outè§£å†³æ–¹æ¡ˆ/","link":"","permalink":"https://www.silenceboy.com/2020/03/04/git-clone-å‡ºç°ssh-connect-to-host-github-com-port-22-Connection-timed-outè§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"ç‰©ç†æœºæœåŠ¡å™¨ï¼Œå®‰è£…gitä¹‹åï¼Œæƒ³ä»githubä¸Šcloneè‡ªå·±çš„é¡¹ç›®è¿è¡Œï¼Œssh keyå·²ç»é…ç½®è¿‡, ä½†åœ¨æ‰§è¡Œgit cloneå‘½ä»¤æ—¶å‡ºç°äº†å¦‚ä¸‹æŠ¥é”™ï¼š 1234ssh: connect to host github.com port 22: Connection timed outfatal: æ— æ³•è¯»å–è¿œç¨‹ä»“åº“ã€‚è¯·ç¡®è®¤æ‚¨æœ‰æ­£ç¡®çš„è®¿é—®æƒé™å¹¶ä¸”ä»“åº“å­˜åœ¨ã€‚ è§£å†³æ–¹æ¡ˆåœ¨ç³»ç»Ÿ~/.sshç›®å½•ä¸‹æ‰§è¡Œtouch configå‘½ä»¤æ–°å»ºconfigæ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶æƒé™ï¼š 1sudo chmod 600 config ç„¶ååœ¨configæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 123456Host github.comUser email@qq.com // æ›¿æ¢æˆè‡ªå·±çš„githubç™»å½•é‚®ç®±Hostname ssh.github.comPreferredAuthentications publickeyIdentityFile ~/.ssh/id_rsaPort 443 ç„¶åè®¾ç½®ï¼š 12git config --global user.name &quot;XXX&quot;git config --global user.email XXX@xx.com æ­¤æ—¶å†å»æ‰§è¡Œgit cloneå‘½ä»¤ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚","categories":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/tags/git/"}]},{"title":"mysql5.7 ibtmp1æ–‡ä»¶è¿‡å¤§","slug":"mysql5-7-ibtmp1æ–‡ä»¶è¿‡å¤§","date":"2019-12-26T08:29:14.000Z","updated":"2021-09-27T07:27:40.442Z","comments":true,"path":"2019/12/26/mysql5-7-ibtmp1æ–‡ä»¶è¿‡å¤§/","link":"","permalink":"https://www.silenceboy.com/2019/12/26/mysql5-7-ibtmp1æ–‡ä»¶è¿‡å¤§/","excerpt":"","text":"æœåŠ¡å™¨ä¸Šçš„ç£ç›˜è¢«å æ»¡ï¼Œé€šè¿‡ä¸€ä¸‹å‘½ä»¤æŸ¥æ‰¾æœåŠ¡å™¨ä¸Šçš„å¤§æ–‡ä»¶ï¼š 1$ sudo find / -type f -size +800M -print0 | xargs -0 du -h | sort -nr ç»è¿‡æ’æŸ¥åå‘ç°ï¼Œ/var/lib/mysqlç›®å½•ä¸‹é¢æœ‰ä¸€ä¸ªibtmp1çš„æ–‡ä»¶ç‰¹åˆ«å¤§ï¼Œæœ‰64G ã€‚ ibtmp1æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼ŸæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£åå‘ç°è¿™æ˜¯éå‹ç¼©çš„innodbä¸´æ—¶è¡¨çš„ç‹¬ç«‹è¡¨ç©ºé—´ã€‚é€šè¿‡innodb_temp_data_file_pathå‚æ•°æŒ‡å®šæ–‡ä»¶çš„è·¯å¾„ï¼Œæ–‡ä»¶åå’Œå¤§å°ï¼Œé»˜è®¤é…ç½®ä¸ºibtmp1:12M:autoextendï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ”¯æŒå¤§æ–‡ä»¶çš„ç³»ç»Ÿè¿™ä¸ªæ–‡ä»¶å¤§å°æ˜¯å¯ä»¥æ— é™å¢é•¿çš„ã€‚ è§£å†³åŠæ³•ï¼š ä¿®æ”¹my.cnfé…ç½®æ–‡ä»¶ï¼š 1innodb_temp_data_file_path = ibtmp1:12M:autoextend:max:5G è®¾ç½®innodb_fast_shutdownå‚æ•° 1SET GLOBAL innodb_fast_shutdown = 0; #InnoDB does a slow shutdown, a full purge and a change buffer merge before shutting down å…³é—­mysqlæœåŠ¡ 1systemctl stop mysqld.service åˆ é™¤ibtmp1æ–‡ä»¶ å¯åŠ¨mysqlæœåŠ¡ 1systemctl start mysqld.service","categories":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"}]},{"title":"pm2æ—¥å¿—æ‹†åˆ†","slug":"pm2æ—¥å¿—æ‹†åˆ†","date":"2019-12-20T03:41:48.000Z","updated":"2021-09-27T07:27:40.444Z","comments":true,"path":"2019/12/20/pm2æ—¥å¿—æ‹†åˆ†/","link":"","permalink":"https://www.silenceboy.com/2019/12/20/pm2æ—¥å¿—æ‹†åˆ†/","excerpt":"","text":"pm2é»˜è®¤ä¼šå°†æ—¥å¿—æ–‡ä»¶å†™å…¥å®¶ç›®å½•ä¸‹çš„ .pm2/logs ç›®å½•ä¸­ï¼Œä½†æ˜¯pm2çš„æ—¥å¿—æ–‡ä»¶ä¸èƒ½è‡ªåŠ¨åˆ†å‰²ï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ªæ–‡ä»¶ä¸æ–­å˜å¤§ï¼Œä¸ä½†å½±å“æ€§èƒ½ï¼ŒæŸ¥çœ‹è¿™äº›æ—¥å¿—ä¹Ÿä¼šå¸¦æ¥éº»çƒ¦ã€‚ pm2çš„æ—¥å¿—åˆ‡å‰²æ¨¡å—pm2-logrotate å®‰è£…pm2-logrotateï¼š 1$ pm2 install pm2-logrotate è®¾ç½®åˆ‡å‰²è§„åˆ™ 12345678910111213141. è®¾ç½®æ–‡ä»¶å¤§å°ä¸º100Mï¼Œå¤§äºç­‰äºå¼€å§‹åˆ‡å‰²pm2 set pm2-logrotate:max_size 100M2.è®¾ç½®æ–‡ä»¶åˆ‡å‰²çš„ç›‘æ§é—´ï¼Œç›‘æ§é—´éš”æ¯”è¾ƒå¤§ï¼Œå¯èƒ½ä¼šä½¿åˆ‡å‰²å‡ºçš„æ–‡ä»¶å¤§å°å’Œmax_sizeæœ‰å‡ºå…¥pm2 set pm2-logrotate:workerInterval 13. è®¾ç½®æ–‡ä»¶æœ€å¤šå¤šå°‘ä¸ªï¼Œè¶…è¿‡åˆ™åˆ é™¤pm2 set pm2-logrotate:retain 104. è®¾ç½®æ–‡ä»¶æ˜¯å¦å‹ç¼©$ pm2 set pm2-logrotate:compress false5. è®¾ç½®æ–‡ä»¶å‘½åæ ¼å¼$ pm2 set pm2-logrotate:dateFormat YYYY-MM-DD_HH-mm-ss æ›´æ–°pm2 æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ä½¿pm2é…ç½®ç”Ÿæ•ˆ 1$ pm2 update","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"pm2","slug":"pm2","permalink":"https://www.silenceboy.com/tags/pm2/"}]},{"title":"sshä½¿ç”¨ProxyCommandè¿æ¥é˜¿é‡Œäº‘å†…ç½‘æœåŠ¡å™¨","slug":"sshä½¿ç”¨ProxyCommandè¿æ¥é˜¿é‡Œäº‘å†…ç½‘æœåŠ¡å™¨","date":"2019-10-21T05:44:57.000Z","updated":"2021-09-27T07:27:40.445Z","comments":true,"path":"2019/10/21/sshä½¿ç”¨ProxyCommandè¿æ¥é˜¿é‡Œäº‘å†…ç½‘æœåŠ¡å™¨/","link":"","permalink":"https://www.silenceboy.com/2019/10/21/sshä½¿ç”¨ProxyCommandè¿æ¥é˜¿é‡Œäº‘å†…ç½‘æœåŠ¡å™¨/","excerpt":"","text":"åœ¨æ²¡æœ‰å‘ç°proxyCommandå‘½ä»¤çš„å¥½å¤„ä¹‹å‰ï¼Œæœ¬åœ°è¿æ¥æƒ³è¦è®¿é—®å†…ç½‘æœåŠ¡å™¨ï¼Œéœ€è¦å…ˆsshè¿æ¥å¼€æ”¾å¤–ç½‘ipå¹¶ä¸”ä¸æˆ‘ä»¬è¦è®¿é—®çš„ç›®æ ‡ä¸»æœºåœ¨åŒä¸€ä¸ªå†…ç½‘ç¯å¢ƒçš„escæœåŠ¡å™¨ï¼Œç„¶åå°†è¯¥æœåŠ¡å™¨ä½œä¸ºè·³æ¿æœºï¼Œåœ¨è¯¥æœåŠ¡å™¨ä¸Šsshè¿æ¥å†…ç½‘æœåŠ¡å™¨ã€‚è¯¥æ“ä½œéå¸¸éº»çƒ¦ã€‚ä½¿ç”¨proxyCommandèƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„è§£å†³è¯¥é—®é¢˜ã€‚ proxyCommandé…ç½®ä¿®æ”¹~/.ssh/configï¼š 123456789Host tiaobanHostname è·³æ¿æœºçš„ipPort è·³æ¿æœºçš„ç«¯å£(å¦‚æœæ˜¯é22çš„éœ€è¦å¡«å†™)User root(å¦‚æœéroot,æ¢æˆè·³æ¿æœºçš„ç”¨æˆ·)Host targetHostname ç›®æ ‡æœºçš„IPPort è·³æ¿æœºçš„ç«¯å£(å¦‚æœæ˜¯é22çš„éœ€è¦å¡«å†™)User root(å¦‚æœéroot,æ¢æˆè·³æ¿æœºçš„ç”¨æˆ·)ProxyCommand ssh -q -x -W %h:%p tiaoban è¿™å„¿çš„%hè¡¨ç¤ºè¦è¿æ¥çš„ç›®æ ‡æœº,ä¹Ÿå°±æ˜¯HostnameæŒ‡å®šçš„ipæˆ–è€…ä¸»æœºå,%pè¡¨ç¤ºè¦è¿æ¥åˆ°ç›®æ ‡æœºçš„ç«¯å£.è¿™å„¿å¯ä»¥ç›´æ¥å†™æ­»å›ºå®šå€¼,ä½†æ˜¯ä½¿ç”¨%hå’Œ%på¯ä»¥ä¿è¯åœ¨Hostnameå’ŒPortå˜åŒ–çš„æƒ…å†µä¸‹ProxyCommandè¿™è¡Œä¸ç”¨è·Ÿç€å˜åŒ–. ç„¶åæˆ‘ä»¬ç›´æ¥ssh target,å¯ä»¥çœ‹åˆ°ç›´æ¥å°±è¿æ¥ä¸Šäº†.","categories":[{"name":"ssh","slug":"ssh","permalink":"https://www.silenceboy.com/categories/ssh/"}],"tags":[{"name":"ssh","slug":"ssh","permalink":"https://www.silenceboy.com/tags/ssh/"}]},{"title":"linux æ·»åŠ åªè¯»ç”¨æˆ·","slug":"linux-æ·»åŠ åªè¯»ç”¨æˆ·","date":"2019-10-16T08:31:43.000Z","updated":"2021-09-27T07:27:40.442Z","comments":true,"path":"2019/10/16/linux-æ·»åŠ åªè¯»ç”¨æˆ·/","link":"","permalink":"https://www.silenceboy.com/2019/10/16/linux-æ·»åŠ åªè¯»ç”¨æˆ·/","excerpt":"","text":"è¿™é‡Œæœªä½¿ç”¨rbashæ–°å»ºç”¨æˆ·ï¼Œä½¿ç”¨rbashæ–°å»ºåªè¯»ç”¨æˆ·ä¸èƒ½ä½¿ç”¨cdç­‰å†…ç½®å‘½ä»¤ã€‚ æ·»åŠ ç”¨æˆ· 1# useradd -m test è®¾ç½®å¯†ç  1# passwd test ä¿®æ”¹ç”¨æˆ·çš„shellé…ç½®æ–‡ä»¶ 12# chown root. /home/test/.bash_profile# chmod 755 /home/test/.bash_profile ä¿®æ”¹/home/test/.bash_profileé…ç½®æ–‡ä»¶ å°†PATHæ”¹ä¸º$HOME/.bin 123456789101112# .bash_profile# Get the aliases and functionsif [ -f ~/.bashrc ]; then . ~/.bashrcfi# User specific environment and startup programs# PATH=$PATH:$HOME/.local/bin:$HOME/binPATH=$HOME/.binexport PATH åˆ›å»ºç”¨æˆ·.binç›®å½• 1# mkdir /home/test/.bin å°†å…è®¸æ‰§è¡Œçš„å‘½ä»¤é“¾æ¥åˆ°/home/test/.binç›®å½• 123456789ln -s /usr/bin/wc /home/test/.bin/wcln -s /usr/bin/tail /home/test/.bin/tailln -s /usr/bin/more /home/test/.bin/moreln -s /usr/bin/cat /home/test/.bin/catln -s /usr/bin/grep /home/test/.bin/grepln -s /usr/bin/find /home/test/.bin/findln -s /usr/bin/pwd /home/test/.bin/pwdln -s /usr/bin/ls /home/test/.bin/lsln -s /usr/bin/less /home/test/.bin/less ä¹‹åä½¿ç”¨åˆ›å»ºçš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œç”¨æˆ·åªæ‹¥æœ‰åªè¯»æƒé™ï¼Œåªèƒ½ä½¿ç”¨è½¯è¿æ¥çš„å‘½ä»¤ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"}]},{"title":"Dockerå¯ç”¨TLSè¿›è¡Œå®‰å…¨é…ç½®","slug":"Dockerå¯ç”¨TLSè¿›è¡Œå®‰å…¨é…ç½®","date":"2019-09-29T01:56:59.000Z","updated":"2021-09-27T07:27:40.435Z","comments":true,"path":"2019/09/29/Dockerå¯ç”¨TLSè¿›è¡Œå®‰å…¨é…ç½®/","link":"","permalink":"https://www.silenceboy.com/2019/09/29/Dockerå¯ç”¨TLSè¿›è¡Œå®‰å…¨é…ç½®/","excerpt":"","text":"ä¹‹å‰å¼€å¯äº†dockerçš„2375 Remote APIï¼Œç”±äºæ²¡æœ‰å¯ç”¨TLSï¼Œå¯¼è‡´æœåŠ¡å™¨è¢«å…¥ä¾µï¼Œå®‰è£…äº†æŒ–çŸ¿ç¨‹åºã€‚æ‰€ä»¥å¦‚æœæƒ³å¼€é€šdockerè¿œç¨‹è®¿é—®ï¼Œå°±å¿…é¡»åšå¥½å®‰å…¨éªŒè¯ã€‚ æ–‡ä¸­å‡ºç°çš„$HOSTæŒ‡çš„æ˜¯ä¸»æœºipï¼Œ å®é™…æ‰§è¡Œæ—¶ç”¨ä¸»æœºipæ›¿æ¢å³å¯ã€‚ åœ¨Dockerå®ˆæŠ¤ç¨‹åºçš„ä¸»æœºä¸Šï¼Œç”ŸæˆCAç§é’¥å’Œå…¬é’¥ï¼š1234567891011121314151617181920212223242526272829// ç”Ÿæˆ CA ç§é’¥root@docker-manager:~# openssl genrsa -aes256 -out ca-key.pem 4096Generating RSA private key, 4096 bit long modulus (2 primes).........................................................................++++.............................................++++e is 65537 (0x010001)// éœ€è¦è¾“å…¥ä¸¤æ¬¡è‡ªå®šä¹‰å¯†ç Enter pass phrase for ca-key.pem:Verifying - Enter pass phrase for ca-key.pem:// ç”Ÿæˆ CA å…¬é’¥root@docker-manager:~# openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem// è¿™é‡Œéœ€è¦è¾“å…¥ç¬¬ä¸€æ­¥è®¾ç½®çš„å¯†ç Enter pass phrase for ca-key.pem:You are about to be asked to enter information that will be incorporatedinto your certificate request.What you are about to enter is what is called a Distinguished Name or a DN.There are quite a few fields but you can leave some blankFor some fields there will be a default value,If you enter &apos;.&apos;, the field will be left blank.-----Country Name (2 letter code) [AU]:CNState or Province Name (full name) [Some-State]:zhejiangLocality Name (eg, city) []:hangzhouOrganization Name (eg, company) [Internet Widgits Pty Ltd]:Docker IncOrganizational Unit Name (eg, section) []:Common Name (e.g. server FQDN or YOUR name) []: $HOSTEmail Address []: åˆ›å»ºæœåŠ¡å™¨å¯†é’¥å’Œè¯ä¹¦ç­¾åè¯·æ±‚(CSR)1234567root@docker-manager:~# openssl genrsa -out server-key.pem 4096Generating RSA private key, 4096 bit long modulus (2 primes)......................................................................................................++++................++++e is 65537 (0x010001)root@docker-manager:~# openssl req -subj &quot;/CN=$HOST&quot; -sha256 -new -key server-key.pem -out server.csr ç”¨CAç­¾ç½²å…¬é’¥ç”±äºå¯ä»¥é€šè¿‡IPåœ°å€å’ŒDNSåç§°å»ºç«‹TLSè¿æ¥ï¼Œå› æ­¤åœ¨åˆ›å»ºè¯ä¹¦æ—¶éœ€è¦æŒ‡å®šIPåœ°å€ã€‚ä¾‹å¦‚ï¼Œå…è®¸ä½¿ç”¨172.16.132.200å’Œ127.0.0.1è¿›è¡Œè¿æ¥ï¼š è¿™é‡Œé‡åˆ°ä¸€ä¸ªå‘ï¼Œå¦‚æœIPåä¸æŒ‡å®šæœ¬æœºipï¼Œè¿œç¨‹æ— æ³•è¿æ¥ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯é…ç½®å“ªé‡Œæœ‰é—®é¢˜ï¼Œç›®å‰æˆ‘ä¼šåœ¨ä¸‹é¢çš„å‘½ä»¤ä¸­æ·»åŠ IP:$HOSTå»è§£å†³é—®é¢˜ 1root@docker-manager:~# echo subjectAltName = DNS:$HOST,IP:172.16.132.200,IP:127.0.0.1 &gt;&gt; extfile.cnf å°†Dockerå®ˆæŠ¤ç¨‹åºå¯†é’¥çš„æ‰©å±•ç”¨æ³•å±æ€§è®¾ç½®ä¸ºä»…ç”¨äºæœåŠ¡å™¨èº«ä»½éªŒè¯ï¼š 1root@docker-manager:~# echo extendedKeyUsage = serverAuth &gt;&gt; extfile.cnf ç”ŸæˆæœåŠ¡ç«¯ç­¾åè¯ä¹¦123456root@docker-manager:~# openssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile extfile.cnfSignature oksubject=CN = 172.16.132.200Getting CA Private Key// è¾“å…¥æœ€å¼€å§‹è®¾ç½®çš„å¯†ç Enter pass phrase for ca-key.pem: åˆ›å»ºå®¢æˆ·ç«¯å¯†é’¥å’Œè¯ä¹¦ç­¾åè¯·æ±‚1234567root@docker-manager:~# openssl genrsa -out key.pem 4096Generating RSA private key, 4096 bit long modulus (2 primes)..++++...............................................................................................................................................................................................................++++e is 65537 (0x010001)root@docker-manager:~# openssl req -subj &apos;/CN=client&apos; -new -key key.pem -out client.csr ä¸ºäº†ä½¿å¯†é’¥é€‚åˆå®¢æˆ·ç«¯èº«ä»½éªŒè¯ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰©å±•é…ç½®æ–‡ä»¶ï¼š 1root@docker-manager:~# echo extendedKeyUsage = clientAuth &gt; extfile-client.cnf ç”Ÿæˆå®¢æˆ·ç«¯ç­¾åè¯ä¹¦123456root@docker-manager:~# openssl x509 -req -days 365 -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out cert.pem -extfile extfile-client.cnfSignature oksubject=CN = clientGetting CA Private Key// è¾“å…¥æœ€å¼€å§‹è®¾ç½®çš„å¯†ç Enter pass phrase for ca-key.pem: åˆ é™¤å’Œä¿®æ”¹æ–‡ä»¶æƒé™ç”Ÿæˆåcert.pemï¼Œserver-cert.pemæ‚¨å¯ä»¥å®‰å…¨åœ°åˆ é™¤ä¸¤ä¸ªè¯ä¹¦ç­¾åè¯·æ±‚å’Œæ‰©å±•é…ç½®æ–‡ä»¶ï¼š 12345root@docker-manager:~# rm -v client.csr server.csr extfile.cnf extfile-client.cnfremoved &apos;client.csr&apos;removed &apos;server.csr&apos;removed &apos;extfile.cnf&apos;removed &apos;extfile-client.cnf&apos; ä¸ºäº†ä¿æŠ¤æ‚¨çš„é’¥åŒ™å…é­æ„å¤–æŸåï¼Œè¯·åˆ é™¤å…¶å†™æƒé™ã€‚è¦ä½¿å®ƒä»¬ä»…ä¾›æ‚¨é˜…è¯»ï¼Œè¯·æŒ‰ä»¥ä¸‹æ–¹å¼æ›´æ”¹æ–‡ä»¶æ¨¡å¼ï¼š 1234root@docker-manager:~# chmod -v 0400 ca-key.pem key.pem server-key.pemmode of &apos;ca-key.pem&apos; changed from 0600 (rw-------) to 0400 (r--------)mode of &apos;key.pem&apos; changed from 0600 (rw-------) to 0400 (r--------)mode of &apos;server-key.pem&apos; changed from 0600 (rw-------) to 0400 (r--------) è¯ä¹¦å¯ä»¥åœ¨ä¸–ç•ŒèŒƒå›´å†…è¯»å–ï¼Œä½†æ‚¨å¯èƒ½å¸Œæœ›åˆ é™¤å†™è®¿é—®æƒé™ä»¥é˜²æ­¢æ„å¤–æŸåï¼š 1234root@docker-manager:~# chmod -v 0444 ca.pem server-cert.pem cert.pemmode of &apos;ca.pem&apos; changed from 0644 (rw-r--r--) to 0444 (r--r--r--)mode of &apos;server-cert.pem&apos; changed from 0644 (rw-r--r--) to 0444 (r--r--r--)mode of &apos;cert.pem&apos; changed from 0644 (rw-r--r--) to 0444 (r--r--r--) ä¿®æ”¹dockeré…ç½®å¹¶é‡å¯dockerç¼–è¾‘dockeré…ç½®æ–‡ä»¶ï¼ˆæˆ‘çš„æ˜¯ubuntuæœºå™¨ï¼‰ï¼švim /lib/systemd/system/docker.service æ·»åŠ å¦‚ä¸‹è¡Œï¼š 1ExecStart=/usr/bin/dockerd --tlsverify --tlscacert=/root/docker/ca.pem --tlscert=/root/docker/server-cert.pem --tlskey=/root/docker/server-key.pem -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375 é‡å¯dockeræœåŠ¡ï¼š 12systemctl daemon-reloadsystemctl restart docker æŸ¥çœ‹ç«¯å£å·ï¼š 1234567root@docker-manager:~# netstat -plntActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp6 0 0 :::80 :::* LISTEN 858/nginx: master p tcp6 0 0 :::25 :::* LISTEN 1662/master tcp6 0 0 :::2375 :::* LISTEN 25582/dockerd tcp6 0 0 :::2377 :::* LISTEN 25582/dockerd å®¢æˆ·ç«¯è¿œç¨‹å®‰å…¨è¿æ¥å°† ca.pem cert.pem key.pemä¸‰ä¸ªæ–‡ä»¶é€šè¿‡ scp ä¸‹è½½åˆ° å®¢æˆ·ç«¯æœºå™¨ã€‚ è¿œç¨‹è¿æ¥å‘½ä»¤ï¼Œè·¯å¾„æ ¹æ®å®é™…æƒ…å†µå¡«å†™ï¼š 123456docker --tlsverify \\ --tlscacert=/home/docker/ca.pem \\ --tlscert=/home/docker/cert.pem \\ --tlskey=/home/docker/key.pem \\ -H=172.16.132.200:2375 \\ info æŠŠå¯†é’¥æ”¾å…¥ ~/.docker æ–‡ä»¶å¤¹ä¸­ï¼š æ¯æ¬¡æ“ä½œéœ€è¦è·Ÿé‚£ä¹ˆå¤šå‚æ•°ï¼Œå¤ªéº»çƒ¦äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠca.pem cert.pem key.pemä¸‰ä¸ªæ–‡ä»¶æ”¾å…¥å®¢æˆ·ç«¯~/.dockerä¸­ï¼Œç„¶åé…ç½®ç¯å¢ƒå˜é‡å°±å¯ä»¥ç®€åŒ–å‘½ä»¤äº†ã€‚ 123$ export DOCKER_HOST=tcp://172.16.132.200:2375 DOCKER_TLS_VERIFY=1$ docker info","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"}]},{"title":"dockerå®‰è£…jiraå¹¶ç ´è§£","slug":"dockerå®‰è£…jiraå¹¶ç ´è§£","date":"2019-09-03T12:15:22.000Z","updated":"2021-09-27T07:27:40.438Z","comments":true,"path":"2019/09/03/dockerå®‰è£…jiraå¹¶ç ´è§£/","link":"","permalink":"https://www.silenceboy.com/2019/09/03/dockerå®‰è£…jiraå¹¶ç ´è§£/","excerpt":"","text":"ä¸‹è½½é•œåƒ1$ docker pull cptactionhank/atlassian-jira è¿è¡Œå®¹å™¨12$ docker volume create jira_home$ docker run -d -p 8080:8080 --name jira --restart always -v jira_home:/var/atlassian/jira cptactionhank/atlassian-jira:latest ä¸‹è½½ç ´è§£æ–‡ä»¶123$ wget https://github.com/silenceboychen/some-software/raw/master/Jira/mysql-connector-java-5.1.25-bin.jar$ wget https://github.com/silenceboychen/some-software/raw/master/Jira/atlassian-universal-plugin-manager-plugin-2.22.4.jar$ wget https://github.com/silenceboychen/some-software/raw/master/Jira/atlassian-extras-3.2.jar æ·»åŠ mysqlé©±åŠ¨ç¨‹åºmysqlé…ç½® 12$ docker cp mysql-connector-java-5.1.25-bin.jar jira:/opt/atlassian/jira/atlassian-jira/WEB-INF/lib/$ docker restart jira nginxé…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657upstream jira&#123; server 127.0.0.1:8080;&#125;# httpé…ç½®#server &#123;# listen 80;# server_name jira.domain.com;# access_log /var/log/nginx/jira.domain.com-access.log;# error_log /var/log/nginx/jira.domain.com-error.log;# location / &#123;# proxy_pass_header Server;# proxy_set_header Host $http_host;# proxy_set_header X-Real-IP $remote_addr;# proxy_set_header X-Scheme $scheme;# proxy_pass http://jira;# &#125;#&#125;# httpsé…ç½®server &#123; #ä¾¦å¬443ç«¯å£ï¼Œè¿™ä¸ªæ˜¯sslè®¿é—®ç«¯å£ listen 443; #å®šä¹‰ä½¿ç”¨ è®¿é—®åŸŸå server_name jira.iblackvip.com; access_log /var/log/nginx/jira.domain.com.access.log; error_log /var/log/nginx/jira.domain.com.error.log; ssl on; ssl_certificate /etc/nginx/cert/jira.domain.com.pem; ssl_certificate_key /etc/nginx/cert/jira.domain.com.key; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #æŒ‰ç…§è¿™ä¸ªåè®®é…ç½® ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½® ssl_prefer_server_ciphers on; location / &#123; proxy_pass_header Server; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Scheme $scheme; proxy_pass http://jira; &#125; gzip on; gzip_min_length 1k; gzip_buffers 4 16k; gzip_comp_level 5; gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php;&#125;server &#123; # 80ç«¯å£æ˜¯httpæ­£å¸¸è®¿é—®çš„æ¥å£ listen 80; server_name jira.domain.com; # åœ¨è¿™é‡Œï¼Œæˆ‘åšäº†httpså…¨åŠ å¯†å¤„ç†ï¼Œåœ¨è®¿é—®httpçš„æ—¶å€™è‡ªåŠ¨è·³è½¬åˆ°https rewrite ^(.*) https://$host$1 permanent;&#125; Webè®¾ç½® æµè§ˆå™¨è®¿é—®JiraWebï¼Œè¯­è¨€å¯ä»¥è®¾ä¸ºä¸­æ–‡ï¼Œé€‰æ‹©ã€Œæˆ‘å°†è®¾ç½®å®ƒè‡ªå·±ã€â€”â€”ã€Œä¸‹ä¸€æ­¥ã€ æ•°æ®åº“è®¾ç½®ï¼Œæ•°æ®åº“ç±»å‹é€‰æ‹©ã€ŒMySQLã€ï¼Œæ¥ç€å¡«å…¥ä½ çš„MySQLè¿æ¥ä¿¡æ¯ï¼ˆéœ€è¦ä½ åœ¨ä½ çš„MySQLæ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®åº“ï¼Œæ•°æ®åº“çš„å­—ç¬¦ç±»å‹å¿…é¡»æ˜¯utf8ï¼‰ï¼Œæµ‹è¯•å¯ä»¥è¿æ¥ä¹‹åç‚¹å‡»ã€Œä¸‹ä¸€æ­¥ã€ è®¾ç½®åº”ç”¨ç¨‹åºçš„å±æ€§â€”â€”ã€Œä¸‹ä¸€æ­¥ã€ ç”³è¯·è®¸å¯è¯å…³é”®å­—ï¼Œç‚¹å‡»ã€Œç”ŸæˆJiraè¯•ç”¨è®¸å¯è¯ã€ éœ€è¦æ³¨å†Œè´¦å·ï¼Œæ³¨å†Œå®Œä¹‹åé‡æ–°å›åˆ°è¿™ä¸ªé¡µé¢ï¼Œé€‰æ‹©ç›¸å…³ä¿¡æ¯ï¼Œç‚¹å‡»ã€ŒGenerate Licenseã€ ç‚¹å‡»ã€ŒYesã€ é¡µé¢å°±ä¼šå¸¦ç€ä½ çš„è®¸å¯è¯å…³é”®å­—å›åˆ°Jiraçš„è®¾ç½®é¡µé¢ï¼Œæ¥ç€ç‚¹å‡»ã€Œä¸‹ä¸€æ­¥ã€ ç­‰å¾…ä¸€ä¼šå°±è¿›å…¥è®¾ç½®ç®¡ç†å‘˜é¡µé¢ï¼Œå¡«å…¥ä¸€äº›ä¿¡æ¯å³å¯ï¼Œæ¥ç€ã€Œä¸‹ä¸€æ­¥ã€ ç‚¹å‡»ã€Œå®Œæˆã€å³å®Œæˆè®¾ç½® ç ´è§£jiraæ‹·è´æ–‡ä»¶åˆ°å®¹å™¨å†…ï¼š 12$ docker cp atlassian-extras-3.2.jar jira:/opt/atlassian/jira/atlassian-jira/WEB-INF/lib/$ docker cp atlassian-universal-plugin-manager-plugin-2.22.4.jar jira:/opt/atlassian/jira/atlassian-jira/WEB-INF/atlassian-bundled-plugins/ é‡å¯å®¹å™¨ï¼Œç ´è§£ç»“æŸï¼š 1$ docker restart jira æŸ¥çœ‹jiraé¡µé¢è®¾ç½®-ã€‹åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°jiraæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ°2033å¹´ã€‚","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"jira","slug":"jira","permalink":"https://www.silenceboy.com/tags/jira/"}]},{"title":"linuxç³»ç»Ÿä¸­rootç”¨æˆ·è¢«æç¤ºï¼šOperation not permitted","slug":"linuxç³»ç»Ÿä¸­rootç”¨æˆ·è¢«æç¤ºï¼šOperation-not-permitted","date":"2019-08-27T08:01:26.000Z","updated":"2021-09-27T07:27:40.442Z","comments":true,"path":"2019/08/27/linuxç³»ç»Ÿä¸­rootç”¨æˆ·è¢«æç¤ºï¼šOperation-not-permitted/","link":"","permalink":"https://www.silenceboy.com/2019/08/27/linuxç³»ç»Ÿä¸­rootç”¨æˆ·è¢«æç¤ºï¼šOperation-not-permitted/","excerpt":"","text":"é—®é¢˜åœ¨ä¿®æ”¹æ–‡ä»¶æƒé™æ—¶é‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š 12root@docker-manager:~/.ssh# chmod 600 authorized_keys chmod: changing permissions of &apos;authorized_keys&apos;: Operation not permitted è§£å†³æ–¹æ³•è¿™é‡Œæ¶‰åŠåˆ°chattrå’Œlsattrçš„çŸ¥è¯†ï¼š chattræ˜¯ç”¨æ¥æ›´æ”¹æ–‡ä»¶å±æ€§ï¼Œlsattrå¯ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶çš„å±æ€§ï¼Œæ‰§è¡Œå‘½ä»¤lsattr authorized_keysä¾¿å¯ä»¥çœ‹åˆ°å½“å‰æ–‡ä»¶çš„å±æ€§ï¼› 12root@docker-manager:~/.ssh# lsattr authorized_keys ----ia--------e--- authorized_keys å¯ä»¥å‘ç°å½“å‰æ–‡ä»¶æœ‰ä¸ªiå±æ€§ï¼ŒæŸ¥é˜…å‘½ä»¤å¸®åŠ©æ–‡æ¡£å¯ä»¥çœ‹åˆ°æœ‰iå±æ€§çš„æ–‡ä»¶æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œæ›´ä¸å¯è¢«åˆ é™¤ï¼Œå³ä½¿æ˜¯rootç”¨æˆ·ä¹Ÿä¸å¯ã€‚ è¿™é‡Œåªéœ€è¦å»é™¤iå±æ€§å°±å¯ä»¥ä¿®æ”¹æ–‡ä»¶æƒé™ã€‚ 123root@docker-manager:~/.ssh# chattr -i authorized_keys root@docker-manager:~/.ssh# lsattr authorized_keys -----a--------e--- authorized_keys chattrå‘½ä»¤Linux chattrå‘½ä»¤ç”¨äºæ”¹å˜æ–‡ä»¶å±æ€§ã€‚ è¿™é¡¹æŒ‡ä»¤å¯æ”¹å˜å­˜æ”¾åœ¨ext2æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•å±æ€§ï¼Œè¿™äº›å±æ€§å…±æœ‰ä»¥ä¸‹8ç§æ¨¡å¼ï¼š 12345678aï¼šè®©æ–‡ä»¶æˆ–ç›®å½•ä»…ä¾›é™„åŠ ç”¨é€”ã€‚bï¼šä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åå­˜å–æ—¶é—´ã€‚cï¼šå°†æ–‡ä»¶æˆ–ç›®å½•å‹ç¼©åå­˜æ”¾ã€‚dï¼šå°†æ–‡ä»¶æˆ–ç›®å½•æ’é™¤åœ¨å€¾å€’æ“ä½œä¹‹å¤–ã€‚iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•ã€‚sï¼šä¿å¯†æ€§åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚Sï¼šå³æ—¶æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•ã€‚uï¼šé¢„é˜²æ„å¤–åˆ é™¤ã€‚ å‚æ•° 1234567891011-R é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚-v&lt;ç‰ˆæœ¬ç¼–å·&gt; è®¾ç½®æ–‡ä»¶æˆ–ç›®å½•ç‰ˆæœ¬ã€‚-V æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚+&lt;å±æ€§&gt; å¼€å¯æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚-&lt;å±æ€§&gt; å…³é—­æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚=&lt;å±æ€§&gt; æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"}]},{"title":"éƒ¨ç½²Dockeré›†ç¾¤å¹¶ä½¿ç”¨Portainerç®¡ç†","slug":"éƒ¨ç½²Dockeré›†ç¾¤å¹¶ä½¿ç”¨Portainerç®¡ç†","date":"2019-08-14T04:34:06.000Z","updated":"2021-09-27T07:27:40.449Z","comments":true,"path":"2019/08/14/éƒ¨ç½²Dockeré›†ç¾¤å¹¶ä½¿ç”¨Portainerç®¡ç†/","link":"","permalink":"https://www.silenceboy.com/2019/08/14/éƒ¨ç½²Dockeré›†ç¾¤å¹¶ä½¿ç”¨Portainerç®¡ç†/","excerpt":"","text":"åœ¨æœ‰å¤šå°Dockerçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œé›†ç¾¤ç®¡ç†å°±ååˆ†é‡è¦äº†ï¼ŒPortainerä¹Ÿæ”¯æŒé›†ç¾¤ç®¡ç†ï¼ŒPortainerå¯ä»¥å’ŒSwarmä¸€èµ·æ¥è¿›è¡Œé›†ç¾¤ç®¡ç†æ“ä½œã€‚ ç¯å¢ƒè¦æ±‚ éœ€è¦æå‰å®‰è£…dockerç¯å¢ƒï¼Œdockerå®‰è£…æ•™ç¨‹ã€‚ ä½¿ç”¨dockerå®‰è£…portainerï¼Œ å®‰è£…æ•™ç¨‹ æ­å»ºSwarmé›†ç¾¤ç¯å¢ƒåŸºæœ¬ç¯å¢ƒ ç”¨ä¸¤å°æœºå™¨æ¥æ­å»º(éƒ½æ˜¯ubuntu18.04ç³»ç»Ÿ) 12172.16.132.200 docker-manager172.16.132.201 dcoker-worker01 ä¿®æ”¹ä¸¤å°æœºå™¨çš„ä¸»æœºåå¹¶åšhosts 172.16.132.200æœºå™¨ 12345# hostnamectl set-hostname docker-manager# echo &quot;docker-manager&quot; &gt; /etc/hostname# vim /etc/hosts172.16.132.200 docker-manager172.16.132.201 dcoker-worker01 172.16.132.201æœºå™¨ 12345# hostnamectl set-hostname docker-worker01# echo &quot;docker-worker01&quot; &gt; /etc/hostname# vim /etc/hosts172.16.132.200 docker-manager172.16.132.201 dcoker-worker01 å¼€é€šå¯¹å¤–2375ç«¯å£ï¼ˆæ–¹ä¾¿portainerç®¡ç†ï¼‰12345678910111213// å…ˆåšå¤‡ä»½# cp /lib/systemd/system/docker.service /lib/systemd/system/docker.service.bak # vim /lib/systemd/system/docker.service æ‰¾åˆ°ExecStartè¡Œæ”¹æˆè¿™æ ·çš„ï¼š ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375# systemctl daemon-reload# systemctl restart docker é‡å¯dockeræœåŠ¡ï¼Œä½¿ç”¨service docker restartä¹Ÿå¯ä»¥# netstat -plnt æŸ¥çœ‹ç«¯å£å·ä½¿ç”¨Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 20917/nginx: master tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 742/sshd tcp6 0 0 :::2375 :::* LISTEN 5836/dockerd tcp6 0 0 :::7946 :::* LISTEN 5836/dockerd tcp6 0 0 :::80 :::* LISTEN 20917/nginx: master Swarmé›†ç¾¤åˆ›å»ºåˆå§‹åŒ–Swarm 12345678# docker swarm init --advertise-addr 172.16.132.200Swarm initialized: current node (7ggeai3dlqn0j8gkxjs46y250) is now a manager.To add a worker to this swarm, run the following command: docker swarm join --token SWMTKN-1-0n04bao3bkte48prmcf1xfmlfrk9zh19b9u16ysb63yhvgjiyi-3w0rd58keboh52zul8xcjfrof 172.16.132.200:2377To add a manager to this swarm, run &apos;docker swarm join-token manager&apos; and follow the instructions. ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œè¯¥æœºå™¨è‡ªåŠ¨åŠ å…¥åˆ°swarmé›†ç¾¤ã€‚è¿™ä¸ªä¼šåˆ›å»ºä¸€ä¸ªé›†ç¾¤tokenï¼Œè·å–å…¨çƒå”¯ä¸€çš„ tokenï¼Œä½œä¸ºé›†ç¾¤å”¯ä¸€æ ‡è¯†ã€‚åç»­å°†å…¶ä»–èŠ‚ç‚¹åŠ å…¥é›†ç¾¤éƒ½ä¼šç”¨åˆ°è¿™ä¸ªtokenå€¼ã€‚ 123456789--advertise-addr æŒ‡å®šä¸å…¶ä»– node é€šä¿¡çš„åœ°å€ã€‚docker swarm init è¾“å‡ºå‘Šè¯‰æˆ‘ä»¬ï¼šâ‘  swarm åˆ›å»ºæˆåŠŸï¼Œswarm-manager æˆä¸º manager nodeã€‚â‘¡ æ·»åŠ  worker node éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚â‘¢ æ·»åŠ  manager node éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ æ·»åŠ é›†ç¾¤èŠ‚ç‚¹ åœ¨docker-worker01æœºå™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ·»åŠ é›†ç¾¤èŠ‚ç‚¹çš„æ“ä½œå‘½ä»¤: 1# docker swarm join --token SWMTKN-1-0n04bao3bkte48prmcf1xfmlfrk9zh19b9u16ysb63yhvgjiyi-3w0rd58keboh52zul8xcjfrof 172.16.132.200:2377 å¦‚åç»­è¦åŠ å…¥å…¶ä»–æ›´å¤šçš„èŠ‚ç‚¹,æ·»åŠ æ“ä½œä¹Ÿæ˜¯æ‰§è¡Œè¿™ä¸ªå‘½ä»¤. æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ åœ¨docker-manageræœºå™¨ä¸Šæ‰§è¡ŒæŸ¥çœ‹,å› ä¸ºæ­¤æ—¶å®ƒæ˜¯swarmé›†ç¾¤çš„leaderèŠ‚ç‚¹: 1234root@docker-manager:~# docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUS ENGINE VERSION7ggeai3dlqn0j8gkxjs46y250 * docker-manager Ready Active Leader 18.09.71v09483w8dczd36bmtruzm2ix docker-node01 Ready Active 19.03.1 æœ€åæŸ¥çœ‹ä¸‹ä¸¤ä¸ªæœºå™¨ä¸Šçš„2375ç«¯å£æ˜¯å¦éƒ½å·²ç»å¼€å¯äº† 1234567[root@docker-manager ~]# lsof -i:2375COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEdockerd 13785 root 5u IPv6 4518841 0t0 TCP *:2375 (LISTEN)[root@docker-woeker01 ~]# lsof -i:2375COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEdockerd-c 2966 root 5u IPv6 3602947 0t0 TCP *:2375 (LISTEN) éƒ¨ç½²Portainer12345$ docker volume create portainer_data$ docker run -d -p 8000:8000 -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES9b051147a4c2 portainer/portainer &quot;/portainer&quot; 20 hours ago Up 18 hours 0.0.0.0:9000-&gt;9000/tcp portainer è®¿é—®http://172.16.132.200:9000, åŒæ ·é¦–æ¬¡ç™»é™†éœ€è¦æ³¨å†Œç”¨æˆ·ï¼Œç»™adminç”¨æˆ·è®¾ç½®å¯†ç ï¼š é›†ç¾¤æ¨¡å¼, è¿™æ ·ä¸€å®šè¦é€‰æ‹©Remote, è¾“å…¥docker-worker01çš„ipï¼Œç„¶åç‚¹å‡»Connectã€‚ åŒæ ·ç‚¹å‡»å·¦è¾¹æ çš„â€Endpointsâ€ - â€œ+add endpointâ€, æ·»åŠ é›†ç¾¤èŠ‚ç‚¹: æ·»åŠ ä¹‹å,ç‚¹å‡»å·¦è¾¹æ çš„â€Homeâ€, å³è¾¹å°±å¯ä»¥çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯äº†,å¯ä»¥è¿›è¡Œåˆ‡æ¢æ“ä½œ.","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"portainer","slug":"portainer","permalink":"https://www.silenceboy.com/tags/portainer/"}]},{"title":"ubuntu18.04å®‰è£…mysqlå¹¶å…è®¸è¿œç¨‹è®¿é—®","slug":"ubuntu18-04å®‰è£…mysqlå¹¶å…è®¸è¿œç¨‹è®¿é—®","date":"2019-07-23T10:29:37.000Z","updated":"2021-09-27T07:27:40.445Z","comments":true,"path":"2019/07/23/ubuntu18-04å®‰è£…mysqlå¹¶å…è®¸è¿œç¨‹è®¿é—®/","link":"","permalink":"https://www.silenceboy.com/2019/07/23/ubuntu18-04å®‰è£…mysqlå¹¶å…è®¸è¿œç¨‹è®¿é—®/","excerpt":"","text":"å®‰è£…1$ apt-get install mysql-server mysql-client å­—ç¬¦é›†ä¿®æ”¹utf8è¿›å…¥mysqlå‘½ä»¤ç»ˆç«¯ï¼šï¼ˆé»˜è®¤rootå¯†ç ä¸ºç©ºï¼‰: 1$ mysql -u root -p 12345678910111213mysql&gt; show variables like &apos;char%&apos;;+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | latin1 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | latin1 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+ 12345678mysql&gt; show variables like &apos;collation%&apos;;+----------------------+-------------------+| Variable_name | Value |+----------------------+-------------------+| collation_connection | utf8_general_ci || collation_database | latin1_swedish_ci || collation_server | latin1_swedish_ci |+----------------------+-------------------+ ä¿®æ”¹å­—ç¬¦é›†ï¼š 123456$ vim /etc/mysql/mysql.conf.d/mysqld.cnf// åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šcollation-server = utf8_unicode_ciinit-connect=&apos;SET NAMES utf8&apos;character-set-server = utf8 é‡å¯åå­—ç¬¦é›†ä¿®æ”¹ä¸ºutf8ï¼š 1$ service mysql restart ä¿®æ”¹ç«¯å£å·ä¿®æ”¹mysqlé…ç½®æ–‡ä»¶ï¼Œç„¶åé‡å¯å³å¯ç”Ÿæ•ˆï¼š 1234$ vim /etc/mysql/mysql.conf.d/mysqld.cnf// ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼šport = 6033 ç™»å½•æƒé™é—®é¢˜æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š 12345678910mysql&gt; SELECT User,Host FROM mysql.user;+------------------+-----------+| User | Host |+------------------+-----------+| debian-sys-maint | localhost || mysql.session | localhost || mysql.sys | localhost || root | localhost |+------------------+-----------+4 rows in set (0.00 sec) åˆ é™¤rootè´¦å·ï¼š 123456789101112mysql&gt; DROP USER &apos;root&apos;@&apos;localhost&apos;;Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT User,Host FROM mysql.user;+------------------+-----------+| User | Host |+------------------+-----------+| debian-sys-maint | localhost || mysql.session | localhost || mysql.sys | localhost |+------------------+-----------+3 rows in set (0.00 sec) é‡æ–°åˆ›å»ºrootï¼š 12345678910111213mysql&gt; CREATE USER &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT User,Host FROM mysql.user;+------------------+-----------+| User | Host |+------------------+-----------+| root | % || debian-sys-maint | localhost || mysql.session | localhost || mysql.sys | localhost |+------------------+-----------+4 rows in set (0.00 sec) æˆæƒï¼š 12345mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; WITH GRANT OPTION;Query OK, 0 rows affected (0.01 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) é€€å‡ºmysqlï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 12$ vim /etc/mysql/mysql.conf.d/mysqld.cnfæ³¨é‡Šè¿™ä¸€è¡Œï¼šbind-address:127.0.0.1 é‡æ–°å¯åŠ¨mysql: 1$ service mysql restart","categories":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://www.silenceboy.com/tags/ubuntu/"}]},{"title":"dockerå®‰è£…gitlab","slug":"dockerå®‰è£…gitlab","date":"2019-07-15T02:49:01.000Z","updated":"2021-09-27T07:27:40.438Z","comments":true,"path":"2019/07/15/dockerå®‰è£…gitlab/","link":"","permalink":"https://www.silenceboy.com/2019/07/15/dockerå®‰è£…gitlab/","excerpt":"","text":"dockerå®‰è£…gitlabGitLab åˆ†ä¸º ç¤¾åŒºç‰ˆï¼ˆCommunity Editionï¼Œç¼©å†™ä¸º CEï¼‰å’Œ ä¼ä¸šç‰ˆï¼ˆEnterprise Editionï¼Œç¼©å†™ä¸º EEï¼‰ã€‚ç¤¾åŒºç‰ˆæ˜¯å…è´¹çš„ï¼Œè€Œä¼ä¸šç‰ˆåŒ…å«ä¸€äº›æ”¶è´¹æœåŠ¡ï¼Œä¸€èˆ¬æ¥è¯´ä¸ªäººå¼€å‘è€…ç”¨ç¤¾åŒºç‰ˆå°±è¶³å¤Ÿäº†ã€‚ ä¸‹è½½é•œåƒ é¦–å…ˆéœ€è¦å…ˆä¸‹è½½ GitLab CE çš„é•œåƒï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œä¸‹è½½ï¼Œå› ä¸ºæ–‡ä»¶è¾ƒå¤§ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œè€å¿ƒç­‰å¾…å³å¯ã€‚ 12# ä¸åŠ  tag åˆ™é»˜è®¤ä¸ºæœ€æ–°ç‰ˆæœ¬ latest$ docker pull gitlab/gitlab-ce å¯åŠ¨è¿è¡Œ123456789$ docker run --detach \\ --hostname gitlab.example.com \\ --publish 8443:443 --publish 8880:80 --publish 8222:22 \\ --name gitlab \\ --restart always \\ --volume /srv/gitlab/config:/etc/gitlab \\ --volume /srv/gitlab/logs:/var/log/gitlab \\ --volume /srv/gitlab/data:/var/opt/gitlab \\ gitlab/gitlab-ce:latest è¯´æ˜: â€“hostname gitlab.example.com: è®¾ç½®ä¸»æœºåæˆ–åŸŸå â€“publish 8443:443ï¼šå°†httpï¼š443æ˜ å°„åˆ°å¤–éƒ¨ç«¯å£8443 â€“publish 8880:80ï¼šå°†webï¼š80æ˜ å°„åˆ°å¤–éƒ¨ç«¯å£8880 â€“publish 8222:22ï¼šå°†sshï¼š22æ˜ å°„åˆ°å¤–éƒ¨ç«¯å£8222 â€“name gitlab: è¿è¡Œå®¹å™¨å â€“restart always: è‡ªåŠ¨é‡å¯ â€“volume /srv/gitlab/config:/etc/gitlab: æŒ‚è½½ç›®å½• â€“volume /srv/gitlab/logs:/var/log/gitlab: æŒ‚è½½ç›®å½• â€“volume /srv/gitlab/data:/var/opt/gitlab: æŒ‚è½½ç›®å½• è¿è¡ŒæˆåŠŸä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼š 1$ docker ps å¯ä»¥çœ‹åˆ° GitLab å·²ç»åœ¨è¿è¡Œäº†ï¼Œæœ‰ä¸€ä¸ªå±æ€§ STATUS ä¸º health: startingï¼Œè¯´æ˜ gitlab çš„æœåŠ¡æ­£åœ¨å¯åŠ¨ä¸­ï¼Œè¿˜æ²¡æœ‰å¯åŠ¨å®Œæ¯•ã€‚ç­‰è¿™ä¸ªçŠ¶æ€å˜æˆ healthy æ—¶åˆ™è¯´æ˜å·²ç»éƒ¨ç½²å®Œæˆï¼Œå¯ä»¥è®¿é—®äº†ã€‚ è®¿é—®gitlabå¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®http://ip:8880, å³å¯è®¿é—®ã€‚ä¸ºäº†ä½¿ç”¨åŸŸåè®¿é—®ï¼Œéœ€è¦é…ç½®nginxï¼š 1234567891011121314151617upstream gitlab&#123; server 127.0.0.1:8880;&#125;server &#123; listen 80; server_name gitlab.example.com; access_log /var/log/nginx/gitlab.example.com-access.log; error_log /var/log/nginx/gitlab.example.com-error.log; location / &#123; proxy_pass_header Server; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Scheme $scheme; proxy_pass http://gitlab; &#125;&#125; nginxé‡å¯é…ç½®ç”Ÿæ•ˆåï¼Œæµè§ˆå™¨è®¿é—®http://gitlab.example.com å³å¯æ­£å¸¸è®¿é—®ã€‚ é¦–æ¬¡è®¿é—®éœ€è¦ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç ï¼Œè®¾ç½®å®Œæˆåéœ€è¦ç™»å½•ï¼Œé»˜è®¤ç”¨æˆ·åä¸ºï¼šrootï¼Œ å¯†ç ä¸ºåˆšåˆšè®¾ç½®çš„å¯†ç ã€‚ é…ç½®é‚®ä»¶æœåŠ¡å™¨æƒ³è¦è®© GitLab ç»™ä½ å‘é€é‚®ä»¶ï¼Œè¿˜è¦é…ç½®ä¸€ä¸‹é‚®ä»¶æœåŠ¡å™¨ï¼Œè¿™é‡Œä»¥QQé‚®ç®±çš„ IMAP/SMTPæœåŠ¡ æ¥é…ç½®ã€‚ æ‰“å¼€é‚®ç®±-&gt;è®¾ç½®-&gt;è´¦æˆ·ï¼Œç„¶åå¼€å¯ IMAP/SMTPæœåŠ¡ï¼Œç„¶åæ ¹æ®æ–‡æ¡£è·å– æˆæƒç  ï¼Œè¿™æ­¥æ¯”è¾ƒé‡è¦ã€‚ ç„¶åè·³è½¬è‡³æŒ‚è½½ç›®å½• /srv/gitlab/config/ ç¼–è¾‘gitlab.rb æ–‡ä»¶ï¼Œæ‰¾åˆ° Email Settingsçš„æ³¨é‡Šä½ç½®ï¼Œç„¶åä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š 1234567891011### Email Settingsgitlab_rails[&apos;smtp_enable&apos;] = true # å¼€å¯ SMTP åŠŸèƒ½gitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.qq.com&quot;gitlab_rails[&apos;smtp_port&apos;] = 465 # ç«¯å£ä¸å¯ä»¥é€‰æ‹©587ï¼Œæµ‹è¯•è¿‡ä¼šå‘é€é‚®ä»¶å¤±è´¥gitlab_rails[&apos;smtp_user_name&apos;] = &quot;test@qq.com&quot; # ä½ çš„é‚®ç®±è´¦å·gitlab_rails[&apos;smtp_password&apos;] = &quot;1324dasd&quot; # æˆæƒç ï¼Œä¸æ˜¯å¯†ç gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = truegitlab_rails[&apos;smtp_tls&apos;] = truegitlab_rails[&apos;gitlab_email_from&apos;] = &apos;test@qq.com&apos; # å‘ä»¶äººä¿¡æ¯ï¼Œå¿…é¡»è·Ÿâ€˜smtp_user_nameâ€™ä¿æŒä¸€è‡´ï¼Œå¦åˆ™æŠ¥é”™gitlab_rails[&apos;smtp_domain&apos;] = &quot;qq.com&quot; # ä¿®æ”¹å¹¶ä¸å½±å“ é…ç½®å®Œæˆåä¿å­˜ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆã€‚ 1$ docker exec gitlab gitlab-ctl reconfigure ä½¿é…ç½®ç”Ÿæ•ˆä¹‹åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ gitlab è‡ªå¸¦çš„å·¥å…·è¿›è¡Œä¸€ä¸‹æµ‹è¯•ã€‚ä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 12345678# å¼€å¯ gitlab çš„ bash å·¥å…·$ docker exec -it gitlab bash# å¼€å¯ gitlab-rails å·¥å…·$ gitlab-rails console production# å‘é€é‚®ä»¶è¿›è¡Œæµ‹è¯•Notify.test_email(&apos;test_001@123.com&apos;, &apos;Message Subject&apos;, &apos;Message Body&apos;).deliver_now æµ‹è¯•å®Œæˆä¹‹åé€€å‡ºgitlabçš„bashå·¥å…·ï¼Œé‡å¯ gitlab å³å¯ã€‚ 1$ docker restart gitlab ä¿®æ”¹SSHå› ä¸ºé¡¹ç›®å¯åŠ¨æ—¶gitlabå†…éƒ¨çš„22ç«¯å£å·æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£å·æ˜¯8222ï¼Œæ‰€ä»¥éœ€è¦é…ç½®gitlabçš„sshç«¯å£å·ï¼š æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼Œå°†ç«¯å£å·ä¿®æ”¹ä¸º8222. 1gitlab_rails[&apos;gitlab_shell_ssh_port&apos;] = 8222 é…ç½®å®Œæˆåä¿å­˜ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆã€‚ 12$ docker exec gitlab gitlab-ctl reconfigure$ docker restart gitlab é…ç½® Git ä»“åº“è®¿é—®è·¯å¾„åœ¨ä¹‹å‰ç¬¬ä¸€æ¬¡è¿è¡Œ gitlab å®¹å™¨çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªå‚æ•° hostname ä¸º gitlab.example.com , å¦‚æœé…ç½®äº†åŸŸåå¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ï¼Œå¦‚æœä½ æ²¡æœ‰é…ç½®ç›¸åº”åŸŸåçš„è¯ï¼Œä½ çš„ä»“åº“çš„åœ°å€å°†ä¼šå˜ä¸ºä¸‹é¢è¿™æ ·ï¼š 12ssh : git@gitlab.example.com:test/test.githttpï¼šgitlab.example.com/test/test.git å¦‚æœåŸŸåä¸å­˜åœ¨çš„è¯ï¼Œè¿™ä¸ªåœ°å€æ˜¯æ— æ³•è¿›è¡Œ clone çš„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æˆ IP æˆ– ä½ é…ç½®äº†çš„åŸŸåæ¥è®¿é—®ã€‚ æ‰“å¼€æ–‡ä»¶ /srv/gitlab/config/gitlab.rb æ–‡ä»¶å¹¶æ‰¾åˆ° 1# external_url &apos;GENERATED_EXTERNAL_URL&apos; è¿™è¡Œï¼Œå»æ‰æ³¨é‡Šï¼Œå¹¶æŒ‰ç…§ä¸‹é¢çš„æ ¼å¼ä¿®æ”¹ã€‚ 1234567891011# ip å½¢å¼external_url &apos;http://192.168.1.44&apos;# åŸŸåå½¢å¼external_url &apos;http://JemGeek.com&apos;# å­åŸŸåexternal_url &apos;http://gitlab.JemGeek.com&apos;# å…¶ä»–å½¢å¼external_url &apos;http://JemGeek.com/gitlab&apos; ä»¥ä¸Šå½¢å¼éƒ½æ˜¯å¯ä»¥çš„ã€‚ä¿®æ”¹å®Œæˆåï¼Œè¾“å…¥å‘½ä»¤: 1$ docker exec gitlab gitlab-ctl reconfigure ä½¿é…ç½®ç”Ÿæ•ˆï¼Œç„¶åé‡å¯ gitlab å³å¯ã€‚ å‡çº§å‚ç…§å®˜æ–¹çš„è¯´æ˜ï¼Œ å°†åŸæ¥çš„å®¹å™¨åœæ­¢ï¼Œ ç„¶ååˆ é™¤ï¼š 12$ docker stop gitlab$ docker rm gitlab ç„¶åé‡æ–°æ‹‰ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒä¸‹æ¥ï¼Œ 1$ docker pull gitlab/gitlab-ce ä½¿ç”¨åŸæ¥çš„è¿è¡Œå‘½ä»¤è¿è¡Œï¼š 12345678910$ docker run --detach \\ --hostname gitlab.example.com \\ --publish 8443:443 --publish 8880:80 --publish 8222:22 \\ --name gitlab \\ --restart always \\ --volume /srv/gitlab/config:/etc/gitlab \\ --volume /srv/gitlab/logs:/var/log/gitlab \\ --volume /srv/gitlab/data:/var/opt/gitlab \\ --privileged=true \\ gitlab/gitlab-ce:latest GitLab åœ¨åˆæ¬¡è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨å‡çº§ï¼Œ ä¸ºäº†é¢„é˜²ä¸‡ä¸€ï¼Œ è¿˜æ˜¯å»ºè®®å…ˆå¤‡ä»½ä¸€ä¸‹ /srv/gitlab/ è¿™ä¸ªç›®å½•ã€‚ å¤§ç‰ˆæœ¬å‡çº§ï¼ˆä¾‹å¦‚ä» 8.7.x å‡çº§åˆ° 8.8.xï¼‰ç”¨ä¸Šé¢çš„æ“ä½œæœ‰å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œ å¦‚æœå‡ºç°é”™è¯¯å¯ä»¥å°è¯•ç™»å½•åˆ°å®¹å™¨å†…éƒ¨, ä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 12$ gitlab-ctl reconfigure$ gitlab-ctl restart","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"gitlab","slug":"gitlab","permalink":"https://www.silenceboy.com/tags/gitlab/"}]},{"title":"jsæ‰“å°å¸¦é¢œè‰²çš„ console ä¿¡æ¯","slug":"jsæ‰“å°å¸¦é¢œè‰²çš„-console-ä¿¡æ¯","date":"2019-07-12T06:30:24.000Z","updated":"2021-09-27T07:27:40.441Z","comments":true,"path":"2019/07/12/jsæ‰“å°å¸¦é¢œè‰²çš„-console-ä¿¡æ¯/","link":"","permalink":"https://www.silenceboy.com/2019/07/12/jsæ‰“å°å¸¦é¢œè‰²çš„-console-ä¿¡æ¯/","excerpt":"","text":"æ‰“å°çº¢è‰²çš„hello world: 1console.log(`\\x1b[31mhello world\\x1b[31m`) ä»¥ä¸‹æ˜¯å¯ä»¥ä½¿ç”¨çš„æ–‡æœ¬å‘½ä»¤çš„å‚è€ƒï¼š å‰æ™¯è‰²ï¼ˆæ–‡å­—é¢œè‰²ï¼‰ï¼š 12345678\\x1b[30m = é»‘è‰²\\x1b[31m = çº¢è‰²\\x1b[32m = ç»¿è‰²\\x1b[33m = é»„è‰²\\x1b[34m = è“è‰²\\x1b[35m = æ´‹çº¢è‰²\\x1b[36m = é’è‰²\\x1b[37m = ç™½è‰² èƒŒæ™¯è‰²ï¼š 12345678\\x1b[40m = é»‘è‰²\\x1b[41m = çº¢è‰²\\x1b[42m = ç»¿è‰²\\x1b[43m = é»„è‰²\\x1b[44m = è“è‰²\\x1b[45m = æ´‹çº¢è‰²\\x1b[46m = é’è‰²\\x1b[47m = ç™½è‰² å…¶ä»–ï¼š 1234567\\x1b[0m = æ¸…é™¤æ ·å¼\\x1b[1m = åŠ ç²—\\x1b[2m = åŠé€æ˜\\x1b[4m = ä¸‹åˆ’çº¿\\x1b[5m = é—ªåŠ¨\\x1b[7m = å–åï¼šèƒŒæ™¯è‰²å˜å‰æ™¯è‰² å‰æ™¯è‰²å˜èƒŒæ™¯è‰²\\x1b[8m = çœ‹ä¸è§ ä½†ä½ç½®è¿˜ç•™ç€","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"eval()ä¸new Function()","slug":"eval-ä¸new-Function","date":"2019-04-14T12:55:54.000Z","updated":"2021-09-27T07:27:40.439Z","comments":true,"path":"2019/04/14/eval-ä¸new-Function/","link":"","permalink":"https://www.silenceboy.com/2019/04/14/eval-ä¸new-Function/","excerpt":"","text":"evalevalæ¥å—å­—ç¬¦ä¸²å‚æ•°ï¼Œè§£æå…¶ä¸­çš„jsä»£ç ã€‚å¦‚æœç¼–è¯‘å¤±è´¥ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™æ‰§è¡Œå…¶ä¸­çš„ä»£ç ï¼Œè®¡ç®—è¿”å›å€¼ã€‚ 12eval(&apos;2+2&apos;); // 4eval(&apos;console.log(&quot;ok&quot;)&apos;); // ok åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸è¿™æ ·è½¬æ¢JSONã€‚ 12var jsonStr = &apos;&#123; &quot;age&quot;: 20, &quot;name&quot;: &quot;jack&quot; &#125;&apos;;eval(&apos;(&apos; + jsonStr + &apos;)&apos;); ä¸ºä»€ä¹ˆè¦åŠ æ‹¬å·å‘¢ï¼Ÿ å› ä¸ºjsä¸­{}é€šå¸¸æ˜¯è¡¨ç¤ºä¸€ä¸ªè¯­å¥å—ï¼Œevalåªä¼šè®¡ç®—è¯­å¥å—å†…çš„å€¼è¿›è¡Œè¿”å›ã€‚åŠ ä¸Šæ‹¬å·å°±å˜æˆä¸€ä¸ªæ•´ä½“çš„è¡¨è¾¾å¼ã€‚ 12console.log( eval(&apos;&#123;&#125;&apos;) ); // undefindconsole.log( eval(&apos;(&#123;&#125;)&apos;) ); // Object &#123;&#125; ä½¿ç”¨evaléœ€è¦æ³¨æ„æ‰§è¡Œä½œç”¨åŸŸ 1234567var s = 1;function a() &#123; eval(&apos;var s=2&apos;); console.log(s);&#125;a(); // 2console.log(s); // 1 åœ¨å±€éƒ¨ç¯å¢ƒä½¿ç”¨evalä¾¿ä¼šåˆ›å»ºå±€éƒ¨å˜é‡ã€‚å¯ä»¥æ˜¾ç¤ºæŒ‡å®ševalè°ƒç”¨è€…æ¥æ”¹å˜ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚ 1234567var s = &apos;global&apos;;function a() &#123; eval(&apos;var s = &quot;local&quot;&apos;); console.log(s); // local console.log(eval(&apos;s&apos;)); // local console.log(window.eval(&apos;s&apos;)); // global&#125; Functionåœ¨ä¹‹å‰æˆ‘å¯¹äºFunctionçš„äº†è§£åªé™äºâ€œå®šä¹‰æ–¹æ³•çš„ä¸€ç§éä¸»æµæ–¹å¼â€ã€‚å´å¿½ç•¥äº†Functionä¸evalç›¸åŒçš„å­—ç¬¦ä¸²å‚æ•°ç‰¹æ€§ã€‚ è¯­æ³•ï¼švar func = new Function(arg1, arg2, ..., functionBody); å®ä¾‹ï¼š 12var add = new Function(&apos;a&apos;, &apos;b&apos;, &apos;return a+b;&apos;);console.log( add(2, 3) ); // 5 ç”±äºå…¶å½¢å‚ä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹å¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨1ä¸ªå­—ç¬¦ä¸²æ¥æè¿°å¤šä¸ªå½¢å‚ã€‚ 12var add = new Function(&apos;a, b&apos;, &apos;return a+b;&apos;);console.log( add(2, 3) ); // 5 åœ¨è½¬æ¢JSONçš„å®é™…åº”ç”¨ä¸­ï¼Œåªéœ€è¦è¿™ä¹ˆåšã€‚ 12var jsonStr = &apos;&#123; &quot;age&quot;: 20, &quot;name&quot;: &quot;jack&quot; &#125;&apos;, json = (new Function(&apos;return &apos; + jsonStr))(); eval ä¸ Function éƒ½æœ‰ç€åŠ¨æ€ç¼–è¯‘jsä»£ç çš„ä½œç”¨ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç¼–ç¨‹ä¸­å¹¶ä¸æ¨èä½¿ç”¨ã€‚å¦‚æœå¯ä»¥ï¼Œè¯·ç”¨æ›´å¥½çš„æ–¹æ³•æ›¿ä»£ã€‚ åœ¨ä¸€äº›ç‰¹æ®Šçš„è¿ç”¨åœºåˆï¼Œä¹Ÿæœ‰ä¸€äº›åˆç†è¿ç”¨çš„å®è·µã€‚æ¯”å¦‚æ¨¡æ¿è§£æç­‰ã€‚","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"jså®ç°å‡¯æ’’å¯†ç  (Caesars Cipher)","slug":"jså®ç°å‡¯æ’’å¯†ç -Caesars-Cipher","date":"2019-04-04T09:31:04.000Z","updated":"2021-09-27T07:27:40.441Z","comments":true,"path":"2019/04/04/jså®ç°å‡¯æ’’å¯†ç -Caesars-Cipher/","link":"","permalink":"https://www.silenceboy.com/2019/04/04/jså®ç°å‡¯æ’’å¯†ç -Caesars-Cipher/","excerpt":"","text":"å‡¯æ’’å¯†ç Caesar cipherï¼Œåˆå«ç§»ä½å¯†ç ã€‚ç§»ä½å¯†ç ä¹Ÿå°±æ˜¯å¯†ç ä¸­çš„å­—æ¯ä¼šæŒ‰ç…§æŒ‡å®šçš„æ•°é‡æ¥åšç§»ä½ã€‚ä¸€ä¸ªå¸¸è§çš„æ¡ˆä¾‹å°±æ˜¯ROT13å¯†ç ï¼Œå­—æ¯ä¼šç§»ä½13ä¸ªä½ç½®ã€‚ç”±â€™Aâ€™ â†” â€˜Nâ€™, â€˜Bâ€™ â†” â€˜Oâ€™ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ‰€æœ‰çš„å­—æ¯éƒ½æ˜¯å¤§å†™ï¼Œä¸è¦è½¬åŒ–ä»»ä½•éå­—æ¯å½¢å¼çš„å­—ç¬¦(ä¾‹å¦‚ï¼šç©ºæ ¼ï¼Œæ ‡ç‚¹ç¬¦å·)ï¼Œé‡åˆ°è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œè·³è¿‡å®ƒä»¬ã€‚ åˆ¤æ–­æ˜¯å¦ä¸ºå¤§å†™ä¹Ÿä¸éš¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ .charCodeAt() è¿”å›çš„ ASCII ç æ¥åˆ¤æ–­ è‡³äºåŠ å¯†çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ†æƒ…å†µè®¨è®ºï¼š å¦‚æœå½“å‰å­—ç¬¦ä¸º A - M ä¹‹é—´ï¼Œå¯¹åº”çš„ ASCII ç èŒƒå›´å°±æ˜¯ 65 - 77ï¼Œé‚£ä¹ˆ ROT13 åŠ å¯†åº”è¯¥ç»™å®ƒçš„ ASCII ç åŠ  13 å¦‚æœå½“å‰å­—ç¬¦ä¸º N - Z ä¹‹é—´ï¼Œå¯¹åº”çš„ ASCII ç èŒƒå›´å°±æ˜¯ 78 - 90ï¼Œé‚£ä¹ˆ ROT13 åŠ å¯†åº”è¯¥ç»™å®ƒçš„ ASCII ç å‡ 13 å¦‚æœå½“å‰å­—ç¬¦ä¸ºå…¶ä»– (å°å†™ï¼Œç©ºæ ¼æˆ–ç‰¹æ®Šç¬¦å·)ï¼Œé‚£å°±ä¸åº”è¯¥æ‰§è¡Œä»»ä½•æ“ä½œ 12345678910111213141516171819function rot13(str) &#123; let result = &quot;&quot;; for (let i = 0; i &lt; str.length; i++) &#123; const currentCode = str[i].charCodeAt(); if (currentCode &gt; 90 || currentCode &lt; 65) &#123; // éå¤§å†™å­—ç¬¦ result += String.fromCharCode(currentCode); &#125; else if (currentCode &lt; 78) &#123; // å¤§å†™å­—ç¬¦ A - M result += String.fromCharCode(currentCode + 13); &#125; else &#123; // å¤§å†™å­—ç¬¦ N - Z result += String.fromCharCode(currentCode - 13); &#125; &#125; return result;&#125; é€šè¿‡æ±‚ä½™æ•°æ¥è¿›è¡Œä¼˜åŒ–ï¼š 123function rot13(str) &#123; return str.replace(/[A-Z]/g, char =&gt; String.fromCharCode(char.charCodeAt() % 26 + 65));&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/categories/ç®—æ³•/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/tags/ç®—æ³•/"}]},{"title":"ä½¿ç”¨gitè¿›è¡Œè¿œç¨‹åˆ†æ”¯åŒæ­¥","slug":"ä½¿ç”¨gitè¿›è¡Œè¿œç¨‹åˆ†æ”¯åŒæ­¥","date":"2019-04-03T02:48:12.000Z","updated":"2021-09-27T07:27:40.446Z","comments":true,"path":"2019/04/03/ä½¿ç”¨gitè¿›è¡Œè¿œç¨‹åˆ†æ”¯åŒæ­¥/","link":"","permalink":"https://www.silenceboy.com/2019/04/03/ä½¿ç”¨gitè¿›è¡Œè¿œç¨‹åˆ†æ”¯åŒæ­¥/","excerpt":"","text":"åœ¨gité¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgit remote show originå‘½ä»¤ï¼š 12345678910111213âœ api git:(419788c) âœ— git remote show origin* remote origin Fetch URL: git@github.com:silenceboychen/blog.git Push URL: git@github.com:silenceboychen/blog.git HEAD branch: master Remote branches: alibeta tracked dev tracked master tracked production tracked refs/remotes/origin/feat-10.9 stale (use &apos;git remote prune&apos; to remove) refs/remotes/origin/feat-docker stale (use &apos;git remote prune&apos; to remove) refs/remotes/origin/feat_avatar stale (use &apos;git remote prune&apos; to remove) å¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›çŠ¶æ€ä¸ºstaleçš„åˆ†æ”¯ï¼Œè¿™äº›åˆ†æ”¯éƒ½å·²ç»è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯æˆ‘ä»¬æœ¬æœºä¸Šè¿˜æœ‰è®°å½•ï¼Œè¿™äº›è®°å½•ä¸ä¼šé€šè¿‡git pullè‡ªåŠ¨æ¸…é™¤ã€‚ ä¸ºäº†åˆ é™¤è¿™äº›åˆ†æ”¯ï¼Œå®ç°å’Œè¿œç¨‹åˆ†æ”¯çš„åŒæ­¥ï¼Œå¯ä»¥æ‰§è¡Œgit remote prune origin 123456âœ api git:(419788c) âœ— git remote prune originPruning originURL: git@github.com:silenceboychen/blog.git * [pruned] origin/feat-10.9 * [pruned] origin/feat-docker * [pruned] origin/feat_avatar å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°é‚£äº›æ— æ•ˆåˆ†æ”¯å·²ç»åœ¨æœ¬æœºè¢«åˆ é™¤ï¼š 1234567891011121314âœ api git:(419788c) âœ— git remote show origin* remote origin Fetch URL: git@github.com:silenceboychen/blog.git Push URL: git@github.com:silenceboychen/blog.git HEAD branch: master Remote branches: alibeta tracked dev tracked master tracked production tracked Local branch configured for &apos;git pull&apos;: master merges with remote master Local ref configured for &apos;git push&apos;: master pushes to master (local out of date)","categories":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/tags/git/"}]},{"title":"å…³äºjsçš„æµ…æ‹·è´ä¸æ·±æ‹·è´","slug":"å…³äºjsçš„æµ…æ‹·è´ä¸æ·±æ‹·è´","date":"2019-04-02T03:10:59.000Z","updated":"2021-09-27T07:27:40.447Z","comments":true,"path":"2019/04/02/å…³äºjsçš„æµ…æ‹·è´ä¸æ·±æ‹·è´/","link":"","permalink":"https://www.silenceboy.com/2019/04/02/å…³äºjsçš„æµ…æ‹·è´ä¸æ·±æ‹·è´/","excerpt":"","text":"æµ…æ‹·è´å’Œæ·±æ‹·è´åªé’ˆå¯¹åƒObject, Arrayè¿™æ ·çš„å¤æ‚å¯¹è±¡çš„.ç®€å•æ¥è¯´ï¼Œæµ…æ‹·è´åªæ‹·è´ä¸€å±‚å¯¹è±¡çš„å±æ€§ï¼Œè€Œæ·±æ‹·è´åˆ™é€’å½’æ‹·è´äº†æ‰€æœ‰å±‚çº§ã€‚ æµ…æ‹·è´é€šè¿‡ Object.assign æ¥å®ç°æµ…æ‹·è´ã€‚123456let a = &#123; num: 1&#125;let b = Object.assign(&#123;&#125;, a)a.num = 2console.log(b.num) // 1 é€šè¿‡å±•å¼€è¿ç®—ç¬¦(â€¦)æ¥å®ç°æµ…æ‹·è´123456let a = &#123; num: 1&#125;let b = &#123;...a&#125;a.num = 2console.log(b.num) // 1 é€šè¿‡å±æ€§èµ‹å€¼æ¥å®ç°æµ…æ‹·è´:123456789101112const obj = &#123; a:1, arr: [2,3] &#125;;const shallowObj = shallowCopy(obj);function shallowCopy(src) &#123; var dst = &#123;&#125;; for (var prop in src) &#123; if (src.hasOwnProperty(prop)) &#123; dst[prop] = src[prop]; &#125; &#125; return dst;&#125; è¯¥æ–¹æ³•ä½“ç°äº†æµ…æ‹·è´çš„é—®é¢˜ï¼å› ä¸ºæµ…æ‹·è´åªä¼šå°†å¯¹è±¡çš„å„ä¸ªå±æ€§è¿›è¡Œä¾æ¬¡æ‹·è´ï¼Œå¹¶ä¸ä¼šè¿›è¡Œé€’å½’æ‹·è´ï¼Œè€Œ JavaScript å­˜å‚¨å¯¹è±¡éƒ½æ˜¯å­˜åœ°å€çš„ï¼Œæ‰€ä»¥æµ…æ‹·è´ä¼šå¯¼è‡´ obj.arr å’Œ shallowObj.arr æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€ï¼ å¯¼è‡´çš„ç»“æœå°±æ˜¯ï¼š 12shallowObj.arr[1] = 5;obj.arr[1] // = 5 è¿™ç§æƒ…å†µå°±éœ€è¦ç”¨åˆ°æ·±æ‹·è´äº†ï¼ æ·±æ‹·è´é€šè¿‡JSONåºåˆ—åŒ–å®ç°æ·±æ‹·è´è®¸å¤šJavaScriptæ¡†æ¶éƒ½æå‡ºäº†è‡ªå·±çš„è§£å†³åŠæ³•,ä½†æ˜¯Javascriptåº”è¯¥é‡‡ç”¨é‚£ç§æ–¹æ³•ä½œä¸ºæ ‡å‡†å‘? åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œ,è¿™ä¸ªé—®é¢˜éƒ½æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆ.å¯¹äºJSONå®‰å…¨(ä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²å¹¶ä¸”å¯ä»¥æ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²è§£æå‡ºä¸€ä¸ªç»“æ„å’Œå€¼å®Œå…¨ä¸€æ ·çš„å¯¹è±¡)çš„å¯¹è±¡æ¥è¯´,æœ‰ä¸€ç§å·§å¦™çš„å¤åˆ¶æ–¹æ³•: var newObj = JSON.parse(JSON.stringify(someObj)); å½“ç„¶,è¿™ç§æ–¹æ³•éœ€è¦ä¿è¯å¯¹è±¡æ˜¯JSONå®‰å…¨çš„,æ‰€ä»¥åªé€‚ç”¨äºéƒ¨åˆ†æƒ…å†µ. ä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š) è¯¥æ–¹æ³•çš„å±€é™æ€§: ä¼šå¿½ç•¥ undefined ä¼šå¿½ç•¥ symbol ä¸èƒ½åºåˆ—åŒ–å‡½æ•° ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ é€’å½’å®Œæˆæ·±æ‹·è´1234567891011121314function deepCopy(obj)&#123; //åˆ¤æ–­æ˜¯å¦æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œ if(typeof obj == &quot;object&quot;)&#123; //å¤æ‚æ•°æ®ç±»å‹ var result = obj.constructor == Array ? [] : &#123;&#125;; for(let i in obj)&#123; result[i] = typeof obj[i] == &quot;object&quot; ? deepCopy(obj[i]) : obj[i]; &#125; &#125;else &#123; //ç®€å•æ•°æ®ç±»å‹ ç›´æ¥ == èµ‹å€¼ var result = obj; &#125; return result;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"Linux Shell >/dev/null 2>&1 &å«ä¹‰","slug":"Linux-Shell-dev-null-2-1-å«ä¹‰","date":"2019-04-01T10:04:28.000Z","updated":"2021-09-27T07:27:40.437Z","comments":true,"path":"2019/04/01/Linux-Shell-dev-null-2-1-å«ä¹‰/","link":"","permalink":"https://www.silenceboy.com/2019/04/01/Linux-Shell-dev-null-2-1-å«ä¹‰/","excerpt":"","text":"shellä¸­å¯èƒ½ç»å¸¸èƒ½çœ‹åˆ°ï¼šecho log &gt; /dev/null 2&gt;&amp;1 &amp;!, ä½†å…·ä½“ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Œå¾ˆå¤šäººéƒ½ä¸ç†è§£ï¼Œä¸‹é¢å¯¹æ­¤è¿›è¡Œä¸€ä¸€è®²è§£ï¼š &gt;: ä»£è¡¨é‡å®šå‘åˆ°å“ªé‡Œï¼Œä¾‹å¦‚ï¼šecho &quot;123&quot; &gt; /home/123.txt, è¡¨ç¤ºå°†å­—ç¬¦ä¸²&#39;123&#39;å†™å…¥æ–‡ä»¶/home/123.txtä¸­, /dev/null: ä»£è¡¨ç©ºè®¾å¤‡æ–‡ä»¶. %&gt;: ç”¨æ¥å®šä¹‰è¾“å‡ºå½¢å¼ï¼Œå…¶ä¸­&#39;%&#39;æœ‰å‡ ç§å¯é€‰å€¼: 0: æ ‡å‡†è¾“å…¥ 1: è¡¨ç¤ºstdoutæ ‡å‡†è¾“å‡ºï¼Œç³»ç»Ÿé»˜è®¤å€¼æ˜¯1ï¼Œæ‰€ä»¥&quot;&gt;/dev/null&quot;ç­‰åŒäº&quot;1&gt;/dev/nullâ€œ 2: è¡¨ç¤ºstderræ ‡å‡†é”™è¯¯ &amp;: è¡¨ç¤ºç­‰åŒäºçš„æ„æ€ï¼Œ2&gt;&amp;1ï¼Œè¡¨ç¤º2çš„è¾“å‡ºé‡å®šå‘ç­‰åŒäº1 æ‰€ä»¥&gt; /dev/null 2&gt;&amp;1å¯ä»¥åˆ†ä¸¤æ­¥ç†è§£ä¸º: 1 &gt; /dev/null: é¦–å…ˆè¡¨ç¤ºæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸è¾“å‡ºä»»ä½•ä¿¡æ¯åˆ°ç»ˆç«¯ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚ 2&gt;&amp;1: æ¥ç€ï¼Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ï¼ˆç­‰åŒäºï¼‰æ ‡å‡†è¾“å‡ºï¼Œå› ä¸ºä¹‹å‰æ ‡å‡†è¾“å‡ºå·²ç»é‡å®šå‘åˆ°äº†ç©ºè®¾å¤‡æ–‡ä»¶ï¼Œæ‰€ä»¥æ ‡å‡†é”™è¯¯è¾“å‡ºä¹Ÿé‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ã€‚ æœ€åä¸€ä¸ª&amp;! ï¼Œ æ˜¯è®©è¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œï¼Œå¹¶ä¸”å…³é—­ç»ˆç«¯åä¸é€€å‡ºã€‚","categories":[{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/categories/shell/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"},{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/tags/shell/"}]},{"title":"[è½¬]Node.jsçš„æ¨¡å—-exportså’Œmodule.exports","slug":"è½¬-Node-jsçš„æ¨¡å—-exportså’Œmodule-exports","date":"2019-03-26T03:41:32.000Z","updated":"2021-09-27T07:27:40.449Z","comments":true,"path":"2019/03/26/è½¬-Node-jsçš„æ¨¡å—-exportså’Œmodule-exports/","link":"","permalink":"https://www.silenceboy.com/2019/03/26/è½¬-Node-jsçš„æ¨¡å—-exportså’Œmodule-exports/","excerpt":"","text":"åŸæ–‡é“¾æ¥ï¼š http://zhanglun.xyz/2014/04/26/%E8%AF%91-node-js%E7%9A%84%E6%A8%A1%E5%9D%97-exports-%E5%92%8C-module-exports/ exports å’Œ module.exports æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä½ ä¸€å®šå¾ˆç†Ÿæ‚‰ Node.js æ¨¡å—ä¸­çš„ç”¨æ¥åœ¨ä½ çš„æ¨¡å—ä¸­åˆ›å»ºå‡½æ•°çš„ exports å¯¹è±¡ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚ åˆ›å»ºä¸€ä¸ªå«åš rocker.js çš„æ–‡ä»¶ï¼š 123exports.name = function() &#123; console.log(&apos;My name is Lemmy Kilmister&apos;);&#125;; ç„¶åå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨ rocker.js : 12var rocker = require(&apos;./rocker.js&apos;);rocker.name(); // &apos;My name is Lemmy Kilmister&apos; ä½†æ˜¯ï¼Œmodule.exports åˆ°åº•ä»€ä¹ˆï¼Ÿå®ƒæ˜¯åˆæ³•çš„å—ï¼Ÿ ä»¤äººåƒæƒŠçš„æ˜¯ï¼šmodule.exports æ˜¯çœŸå®å­˜åœ¨çš„ã€‚exports åªä¸è¿‡æ˜¯ module.exports çš„å¸®æ‰‹è€Œå·²ã€‚ä½ çš„æ¨¡å—ç›´æ¥è¿”å›è¿”å› module.exports ç»™è°ƒç”¨è€…ï¼Œè€Œä¸æ˜¯ exports ã€‚æ‰€æœ‰çš„ exports åšçš„å·¥ä½œå®é™…ä¸Šæ˜¯æ”¶é›†å±æ€§ï¼Œå¦‚æœ module.exports å½“å‰æ²¡æœ‰ä»»ä½•å±æ€§ï¼Œexportsä¾¿å°†æ”¶é›†åˆ°çš„å±æ€§æ·»åŠ åˆ° module.exports ä¸Šã€‚å¦‚æœ module.exportså·²ç»å­˜åœ¨è‹¥å¹²å±æ€§ï¼Œæ‰€ä»¥ exports ä¸Šçš„å±æ€§éƒ½ä¼šè¢«å¿½ç•¥ã€‚ ä¿®æ”¹ rocker.js æ–‡ä»¶ï¼š 1234module.exports = &apos;ROCK IT!&apos;;exports.name = function() &#123; console.log(&apos;My name is Lemmy Kilmister&apos;);&#125;; åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨ rocker.js: 12var rocker = require(&apos;./rocker.js&apos;);rocker.name(); // TypeError: Object ROCK IT! has no method &apos;name&apos; ä¸Šè¿°ä¾‹å­ä¸­çš„ rocker æ¨¡å—å®Œå…¨å°† exports.name å¿½ç•¥äº†ï¼Œåªè¿”å›äº†ä¸€ä¸ª String å­—ç¬¦ä¸²ï¼šâ€˜ROCK IT!â€™ ã€‚ ä»è¿™ä¸ªä¾‹å­ä½ å¤§æ¦‚æ˜ç™½äº†ï¼šä½ çš„æ¨¡å—å¹¶ä¸ä¸€å®šæ€»æ˜¯ä¸€ä¸ªæ¨¡å—çš„å®ä¾‹(module instance)ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„ JavaScript å¯¹è±¡â€”â€”boolean, number, date, JSON, string, function, array å’Œå…¶ä»–çš„ã€‚ä½ çš„æ¨¡å—å¯ä»¥æ˜¯ä»»ä½•ä½ è®¾ç½®çš„ module.exports çš„å€¼ã€‚å¦‚æœä½ æ²¡æœ‰æ˜ç¡®åœ°ä¸º module.exports è®¾ç½®ä»»ä½•å€¼ï¼Œé‚£ä¹ˆ exports ä¸­çš„å±æ€§ä¼šè‡ªåŠ¨æ·»åŠ åˆ° module.exports ä¸­ï¼Œç„¶åå¹¶è¿”å›å®ƒã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„æ¨¡å—æ˜¯ä¸€ä¸ªç±»ï¼š 1234567module.exports = function(name, age) &#123; this.name = name; this.age = age; this.about = function() &#123; console.log(this.name +&apos; is &apos;+ this.age +&apos; years old&apos;); &#125;;&#125;; è€Œä½ å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ï¼š 123var Rocker = require(&apos;./rocker.js&apos;);var r = new Rocker(&apos;Ozzy&apos;, 62);r.about(); // Ozzy is 62 years old åœ¨è¿™æ—¶å€™ä½ çš„æ¨¡å—æ˜¯ä¸€ä¸ªæ•°ç»„ï¼š 1234567module.exports = [ &apos;Lemmy Kilmister&apos;, &apos;Ozzy Osbourne&apos;, &apos;Ronnie James Dio&apos;, &apos;Steven Tyler&apos;, &apos;Mick Jagger&apos;]; è€Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š 12var rocker = require(&apos;./rocker.js&apos;);console.log(&apos;Rockin in heaven: &apos; + rocker[2]); //Rockin in heaven: Ronnie James Dio ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ç‚¹ä»€ä¹ˆï¼šå¦‚æœä½ æƒ³è®©ä½ çš„æ¨¡å—è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ç±»å‹ï¼Œæ¯”å¦‚æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆä½ å¾—ä½¿ç”¨ module.exports ï¼›å¦‚æœä½ åªæƒ³æ¨¡å—ä½œä¸ºä¸€ä¸ªå…¸å‹çš„æ¨¡å—å®ä¾‹ï¼ˆmodule instanceï¼‰ï¼Œé‚£ä¹ˆå°±ç”¨exportsã€‚ æŠŠå±æ€§æ·»åŠ åˆ° module.exports ä¸­å’Œæ·»åŠ åˆ° exports ä¸­çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚æ¯”å¦‚åƒè¿™æ ·ï¼š 123module.exports.name = function() &#123; console.log(&apos;My name is Lemmy Kilmister&apos;);&#125;; å…¶å®å’Œä¸‹é¢çš„æ˜¯ä¸€æ ·çš„ï¼š 123exports.name = function() &#123; console.log(&apos;My name is Lemmy Kilmister&apos;);&#125;; ä½†æ˜¯è¦æ³¨æ„ï¼Œä»–ä»¬ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚å°±åƒä¹‹å‰è¯´çš„ä¸€æ ·ï¼Œexports åªä¸è¿‡æ˜¯ module.exports çš„å¸®æ‰‹è€Œå·²ã€‚è¯è™½å¦‚æ­¤ï¼Œexportsè¿˜æ˜¯æ¨èçš„å¯¹è±¡ï¼Œé™¤éä½ æƒ³æŠŠä½ æ¨¡å—çš„å¯¹è±¡ç±»å‹ä»ä¼ ç»Ÿçš„æ¨¡å—å®ä¾‹ï¼ˆmodule instanceï¼‰ä¿®æ”¹ä¸ºå…¶ä»–çš„ã€‚ åªè¦ä½ æ²¡æœ‰ä½¿ç”¨èµ‹å€¼è¿ç®—é‡å†™module.exportså¯¹è±¡ï¼Œä»»ä½•æ·»åŠ åˆ° module.exportså’Œexportsçš„å±æ€§éƒ½èƒ½å¤Ÿåœ¨ requireæ¨¡å—ä¸­ã€‚ æ¯”å¦‚è¿™æ˜¯ä½ çš„æ¨¡å—ä¸­çš„å†…å®¹ï¼š 12module.exports.age = 68;exports.name = &apos;Lemmy Kilmister&apos;; ä¸‹é¢çš„ä»£ç å¯ä»¥å¾ˆå¥½çš„å·¥ä½œï¼š 12var rocker = require(&apos;./rocker.js&apos;);console.log(&apos;%s is %s&apos;, rocker.name, rocker.age); // Lemmy Kilmister is 68 ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨ä½ çš„æ¨¡å—ä¸­é‡å†™äº†module.exportsä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œä»£ç ä¾¿ä¼šå‡ºé”™ï¼š 123module.exports = &apos;LOL&apos;;module.exports.age = 68;exports.name = &apos;Lemmy Kilmister&apos;; æˆ–è€…è¿™æ ·ï¼š 123module.exports.age = 68;exports.name = &apos;Lemmy Kilmister&apos;;module.exports = &apos;WTF&apos;; é¡ºåºæ²¡æœ‰å…³ç³»ï¼Œrocker.age å’Œ rocker.name å°†æ˜¾ç¤ºä¸º undefinedã€‚ å¹¶ä¸”æ³¨æ„ï¼šåªæ˜¯å› ä¸º module.exports å’Œ exports éƒ½èƒ½è¾“å‡ºæ¨¡å—ï¼Œå¹¶ä¸æ„å‘³è¿™ä½ å¯ä»¥ç»„åˆä½¿ç”¨ã€‚æˆ‘çš„å»ºè®®æ˜¯ï¼ŒåšæŒä½¿ç”¨ exports.*ï¼Œæ˜ç™½module.exports æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ç†è§£exportså’Œmodule.exportsä¹‹é—´çš„ä¸åŒï¼Œå¹¶ä¸”èƒ½è¿›ä¸€æ­¥çš„ç†è§£æ¨¡å—åœ¨Node.jsä¸­æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"å…³äºLibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443é”™è¯¯çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ","slug":"å…³äºLibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443é”™è¯¯çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ","date":"2019-03-23T04:54:30.000Z","updated":"2021-09-27T07:27:40.447Z","comments":true,"path":"2019/03/23/å…³äºLibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443é”™è¯¯çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"https://www.silenceboy.com/2019/03/23/å…³äºLibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443é”™è¯¯çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"é”™è¯¯æ¥æºä½¿ç”¨ä½¿ç”¨hexoéƒ¨ç½²åšå®¢æ˜¯ï¼Œé‡åˆ°ä»¥ä¸‹é”™è¯¯: 123456fatal: unable to access &apos;https://github.com/silenceboychen/silenceboychen.github.io.git/&apos;: LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443FATAL Something&apos;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.htmlError: Spawn failed at ChildProcess.&lt;anonymous&gt; (/Users/chenhao/new_start/nodejs/blog/node_modules/hexo-util/lib/spawn.js:52:19) at ChildProcess.emit (events.js:182:13) at Process.ChildProcess._handle.onexit (internal/child_process.js:239:12) ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šæ–¹æ¡ˆä¸€å–æ¶ˆhttpä»£ç†ï¼š 12$ git config --global --unset http.proxy$ git config --global --unset https.proxy è®¾ç½®env GIT_SSL_NO_VERIFYä¸ºtrueç„¶åå†æ¬¡éƒ¨ç½²ï¼š 1$ env GIT_SSL_NO_VERIFY=true hexo d é—®é¢˜è§£å†³ã€‚ æ–¹æ¡ˆäºŒåœ¨hexoé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­æŠŠä»“åº“é“¾æ¥åœ°å€ç”±httpsä¿®æ”¹ä¸ºsshçš„åœ°å€ã€‚","categories":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/tags/git/"},{"name":"hexo","slug":"hexo","permalink":"https://www.silenceboy.com/tags/hexo/"}]},{"title":"ç»Ÿè®¡æŒ‡å®šç›®å½•é‡Œçš„ä»£ç è¡Œæ•°","slug":"ç»Ÿè®¡æŒ‡å®šç›®å½•é‡Œçš„ä»£ç è¡Œæ•°","date":"2019-03-21T01:34:04.000Z","updated":"2021-09-27T07:27:40.448Z","comments":true,"path":"2019/03/21/ç»Ÿè®¡æŒ‡å®šç›®å½•é‡Œçš„ä»£ç è¡Œæ•°/","link":"","permalink":"https://www.silenceboy.com/2019/03/21/ç»Ÿè®¡æŒ‡å®šç›®å½•é‡Œçš„ä»£ç è¡Œæ•°/","excerpt":"","text":"codeLineCountä¸€ä¸ªç”¨æ¥ç»Ÿè®¡é¡¹ç›®å†…ä»£ç è¡Œæ•°çš„å·¥å…·. Installation1$ npm install -g code-rows-count or 1$ yarn global add code-rows-count Usage123456789$ codeLineCount -hUsage: codeLineCount [options]Options: -V, --version output the version number -p, --filePath [filePath] æ–‡ä»¶è·¯å¾„ -i, --ignoreFile [ignoreFile] å¿½ç•¥æ–‡ä»¶ -h, --help output usage information -p: éœ€è¦ç»Ÿè®¡ä»£ç è¡Œæ•°é¡¹ç›®çš„ç»å¯¹è·¯å¾„ -i: ä¸éœ€è¦å‚ä¸ç»Ÿè®¡çš„é¡¹ç›®å†…çš„æ–‡ä»¶å, å¤šä¸ªæ–‡ä»¶åä½¿ç”¨é€—å·åˆ†å‰² example: 12345678910111213141516$ codeLineCount -p /home/silence/nodejs/test -i node_modules,yarn.lock,.git,package.json.lockæ–‡ä»¶è·¯å¾„:/home/silence/nodejs/test/color.js, æ–‡ä»¶è¡Œæ•°:19æ–‡ä»¶è·¯å¾„:/home/silence/nodejs/test/commander.js, æ–‡ä»¶è¡Œæ•°:14æ–‡ä»¶è·¯å¾„:/home/silence/nodejs/test/http.js, æ–‡ä»¶è¡Œæ•°:6æ–‡ä»¶è·¯å¾„:/home/silence/nodejs/test/package.json, æ–‡ä»¶è¡Œæ•°:6æ–‡ä»¶è·¯å¾„:/home/silence/nodejs/test/aaa/color.js, æ–‡ä»¶è¡Œæ•°:19------------------åˆ†å‰²çº¿start------------------done, æ€»è€—æ—¶: 5 msæ€»æ–‡ä»¶æ•°:5, æ€»ä»£ç è¡Œæ•°: 64------------------åˆ†å‰²çº¿end------------------","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"express.jsä¸­é—´ä»¶è¯´æ˜","slug":"express-jsä¸­é—´ä»¶è¯´æ˜","date":"2019-03-19T01:39:06.000Z","updated":"2021-09-27T07:27:40.439Z","comments":true,"path":"2019/03/19/express-jsä¸­é—´ä»¶è¯´æ˜/","link":"","permalink":"https://www.silenceboy.com/2019/03/19/express-jsä¸­é—´ä»¶è¯´æ˜/","excerpt":"","text":"expressçš„æ–°å¼€å‘äººå‘˜å¾€å¾€å¯¹è·¯ç”±å¤„ç†ç¨‹åºå’Œä¸­é—´ä»¶ä¹‹é—´çš„åŒºåˆ«æ„Ÿåˆ°å›°æƒ‘ã€‚å› æ­¤ä»–ä»¬ä¹Ÿå¯¹app.use(),app.all(),app.get(),app.post(),app.delete()å’Œapp.put()æ–¹æ³•çš„åŒºåˆ«æ„Ÿåˆ°å›°æƒ‘ã€‚ åœ¨æœ¬æ–‡ä¸­,æˆ‘å°†è§£é‡Šä¸­é—´ä»¶å’Œè·¯ç”±å¤„ç†ç¨‹åºä¹‹é—´çš„åŒºåˆ«ã€‚ä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨app.use(),app.all(),app.get(),app.post(),app.delete()å’Œapp.put()æ–¹æ³•ã€‚ è·¯ç”±å¤„ç†app.use(),app.all(),app.get(),app.post(),app.delete()å’Œapp.put()å…¨éƒ¨æ˜¯ç”¨æ¥å®šä¹‰è·¯ç”±çš„ã€‚è¿™äº›æ–¹æ³•éƒ½ç”¨äºå®šä¹‰è·¯ç”±ã€‚è·¯ç”±ç”¨äºå¤„ç†HTTPè¯·æ±‚ã€‚è·¯ç”±æ˜¯è·¯å¾„å’Œå›è°ƒçš„ç»„åˆï¼Œåœ¨è¯·æ±‚çš„è·¯å¾„åŒ¹é…æ—¶æ‰§è¡Œã€‚å›è°ƒè¢«ç§°ä¸ºè·¯ç”±å¤„ç†ç¨‹åºã€‚ å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯å¤„ç†ä¸åŒç±»å‹çš„HTTPè¯·æ±‚ã€‚ä¾‹å¦‚ï¼š app.get()æ–¹æ³•ä»…ä»…å¤„ç†getè¯·æ±‚ï¼Œè€Œapp.all()å¤„ç†GETã€POSTç­‰è¯·æ±‚ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­,å¦‚ä½•å®šä¹‰ä¸€ä¸ªè·¯ç”±ï¼š 1234567var app = require(&quot;express&quot;)();app.get(&quot;/&quot;, function(req, res, next)&#123; res.send(&quot;Hello World!!!!&quot;);&#125;);app.listen(8080); æ¯ä¸ªè·¯ç”±å¤„ç†ç¨‹åºéƒ½è·å¾—å¯¹å½“å‰æ­£åœ¨æä¾›çš„HTTPè¯·æ±‚çš„è¯·æ±‚å’Œå“åº”å¯¹è±¡çš„å¼•ç”¨ã€‚ å¯ä»¥ä¸ºå•ä¸ªHTTPè¯·æ±‚æ‰§è¡Œå¤šä¸ªè·¯ç”±å¤„ç†ç¨‹åºã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213var app = require(&quot;express&quot;)();app.get(&quot;/&quot;, function(req, res, next)&#123; res.write(&quot;Hello&quot;); next();&#125;);app.get(&quot;/&quot;, function(req, res, next)&#123; res.write(&quot; World !!!&quot;); res.end();&#125;);app.listen(8080); è¿™é‡Œç¬¬ä¸€ä¸ªå¥æŸ„å†™å…¥ä¸€äº›å“åº”ï¼Œç„¶åè°ƒç”¨next()ã€‚ next()æ–¹æ³•ç”¨äºè°ƒç”¨ä¸è·¯å¾„è·¯å¾„åŒ¹é…çš„ä¸‹ä¸€ä¸ªè·¯ç”±å¤„ç†ç¨‹åºã€‚ è·¯ç”±å¤„ç†ç¨‹åºå¿…é¡»ç»“æŸè¯·æ±‚æˆ–è°ƒç”¨ä¸‹ä¸€ä¸ªè·¯ç”±å¤„ç†ç¨‹åºã€‚ æˆ‘ä»¬è¿˜å¯ä»¥å°†å¤šä¸ªè·¯ç”±å¤„ç†ç¨‹åºä¼ é€’ç»™app.all()ï¼Œapp.get()ï¼Œapp.post()ï¼Œapp.delete()å’Œapp.put()æ–¹æ³•ã€‚ è¿™æ˜¯ä¸€ä¸ªè¯æ˜è¿™ä¸€ç‚¹çš„ä¾‹å­ï¼š 1234567891011var app = require(&quot;express&quot;)();app.get(&quot;/&quot;, function(req, res, next)&#123; res.write(&quot;Hello&quot;); next();&#125;, function(req, res, next)&#123; res.write(&quot; World !!!&quot;); res.end();&#125;);app.listen(8080); ä¸­é—´ä»¶ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªä½äºå®é™…è¯·æ±‚å¤„ç†ç¨‹åºä¹‹ä¸Šçš„å›è°ƒã€‚å®ƒé‡‡ç”¨ä¸è·¯ç”±å¤„ç†ç¨‹åºç›¸åŒçš„å‚æ•°ã€‚ è¦äº†è§£ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¸¦æœ‰dashboardå’Œprofileé¡µé¢çš„ç¤ºä¾‹ç«™ç‚¹ã€‚è¦è®¿é—®è¿™äº›é¡µé¢ï¼Œç”¨æˆ·å¿…é¡»ç™»å½•ã€‚è¿˜ä¼šè®°å½•å¯¹è¿™äº›é¡µé¢çš„è¯·æ±‚ã€‚ ä»¥ä¸‹æ˜¯è¿™äº›é¡µé¢çš„è·¯ç”±å¤„ç†ç¨‹åºçš„ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435var app = require(&quot;express&quot;)();function checkLogin()&#123; return false;&#125;function logRequest()&#123; console.log(&quot;New request&quot;);&#125;app.get(&quot;/dashboard&quot;, function(req, res, next)&#123; logRequest(); if(checkLogin())&#123; res.send(&quot;This is the dashboard page&quot;); &#125; else&#123; res.send(&quot;You are not logged in!!!&quot;); &#125;&#125;);app.get(&quot;/profile&quot;, function(req, res, next)&#123; logRequest(); if(checkLogin())&#123; res.send(&quot;This is the dashboard page&quot;); &#125; else&#123; res.send(&quot;You are not logged in!!!&quot;); &#125;&#125;);app.listen(8080); è¿™é‡Œçš„é—®é¢˜æ˜¯æœ‰å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œå³æˆ‘ä»¬ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨logRequest()å’ŒcheckLogin()å‡½æ•°ã€‚è¿™ä¹Ÿä½¿å¾—æ›´æ–°ä»£ç å˜å¾—å›°éš¾ã€‚å› æ­¤ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¿™ä¸¤æ¡è·¯å¾„ç¼–å†™ä¸€æ¡é€šç”¨è·¯å¾„ã€‚ è¿™æ˜¯é‡å†™çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233var app = require(&quot;express&quot;)();function checkLogin()&#123; return false;&#125;function logRequest()&#123; console.log(&quot;New request&quot;);&#125;app.get(&quot;/*&quot;, function(req, res, next)&#123; logRequest(); next();&#125;)app.get(&quot;/*&quot;, function(req, res, next)&#123; if(checkLogin())&#123; next(); &#125; else&#123; res(&quot;You are not logged in!!!&quot;); &#125;&#125;)app.get(&quot;/dashboard&quot;, function(req, res, next)&#123; res.send(&quot;This is the dashboard page&quot;);&#125;);app.get(&quot;/profile&quot;, function(req, res, next)&#123; res.send(&quot;This is the dashboard page&quot;);&#125;);app.listen(8080); è¿™é‡Œçš„ä»£ç çœ‹èµ·æ¥æ›´æ¸…æ™°ï¼Œæ›´æ˜“äºç»´æŠ¤å’Œæ›´æ–°ã€‚è¿™é‡Œå°†å‰ä¸¤ä¸ªå®šä¹‰çš„è·¯ç”±å¤„ç†ç¨‹åºç§°ä¸ºä¸­é—´ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä¸å¤„ç†è¯·æ±‚ï¼Œè€Œæ˜¯è´Ÿè´£é¢„å¤„ç†è¯·æ±‚ã€‚ Expressä¸ºæˆ‘ä»¬æä¾›äº†app.use()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸“é—¨ç”¨äºå®šä¹‰ä¸­é—´ä»¶ã€‚ app.use()æ–¹æ³•å¯èƒ½çœ‹èµ·æ¥ä¸app.all()ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨å¾ˆå¤šå·®å¼‚ï¼Œè¿™ä½¿å¾—app.use()éå¸¸é€‚åˆäºå£°æ˜ä¸­é—´ä»¶ã€‚è®©æˆ‘ä»¬çœ‹çœ‹app.use()æ–¹æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š app.use() å’Œ app.all() çš„ä¸åŒ:CALLBACKapp.use()åªéœ€è¦ä¸€ä¸ªå›è°ƒï¼Œè€Œapp.all()å¯ä»¥è¿›è¡Œå¤šæ¬¡å›è°ƒã€‚ PATHapp.use()åªæŸ¥çœ‹urlæ˜¯å¦ä»¥æŒ‡å®šè·¯å¾„å¼€å¤´,app.all()åŒ¹é…å®Œæ•´è·¯å¾„ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜: 1234567891011121314app.use( &quot;/product&quot; , mymiddleware);// will match /product// will match /product/cool// will match /product/fooapp.all( &quot;/product&quot; , handler);// will match /product// won&apos;t match /product/cool &lt;-- important// won&apos;t match /product/foo &lt;-- importantapp.all( &quot;/product/*&quot; , handler);// won&apos;t match /product &lt;-- Important// will match /product/cool// will match /product/foo NEXT()ä¸­é—´ä»¶å†…çš„next()è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±å¤„ç†ç¨‹åºï¼Œå…·ä½“å–å†³äºæ¥ä¸‹æ¥å£°æ˜çš„é‚£ä¸ªã€‚ä½†æ˜¯è·¯ç”±å¤„ç†ç¨‹åºä¸­çš„next()ä»…è°ƒç”¨ä¸‹ä¸€ä¸ªè·¯ç”±å¤„ç†ç¨‹åºã€‚å¦‚æœæ¥ä¸‹æ¥æœ‰ä¸­é—´ä»¶ï¼Œåˆ™è·³è¿‡å®ƒã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨æ‰€æœ‰è·¯ç”±å¤„ç†ç¨‹åºä¹‹å‰å£°æ˜ä¸­é—´ä»¶ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜: 1234567891011121314151617181920212223242526272829var express = require(&apos;express&apos;);var app = express();app.use(function frontControllerMiddlewareExecuted(req, res, next)&#123; console.log(&apos;(1) this frontControllerMiddlewareExecuted is executed&apos;); next();&#125;);app.all(&apos;*&apos;, function(req, res, next)&#123; console.log(&apos;(2) route middleware for all method and path pattern &quot;*&quot;, executed first and can do stuff before going next&apos;); next();&#125;);app.all(&apos;/hello&apos;, function(req, res, next)&#123; console.log(&apos;(3) route middleware for all method and path pattern &quot;/hello&quot;, executed second and can do stuff before going next&apos;); next();&#125;);app.use(function frontControllerMiddlewareNotExecuted(req, res, next)&#123; console.log(&apos;(4) this frontControllerMiddlewareNotExecuted is not executed&apos;); next();&#125;);app.get(&apos;/hello&apos;, function(req, res)&#123; console.log(&apos;(5) route middleware for method GET and path patter &quot;/hello&quot;, executed last and I do my stuff sending response&apos;); res.send(&apos;Hello World&apos;);&#125;);app.listen(80); ç°åœ¨æˆ‘ä»¬çœ‹åˆ°äº†app.use()æ–¹æ³•çš„å”¯ä¸€æ€§ä»¥åŠå®ƒç”¨äºå£°æ˜ä¸­é—´ä»¶çš„åŸå› ã€‚ è®©æˆ‘ä»¬é‡å†™æˆ‘ä»¬çš„ç¤ºä¾‹ç«™ç‚¹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334var app = require(&quot;express&quot;)();function checkLogin()&#123; return false;&#125;function logRequest()&#123; console.log(&quot;New request&quot;);&#125;app.use(function(req, res, next)&#123; logRequest(); next();&#125;)app.use(function(req, res, next)&#123; if(checkLogin())&#123; next(); &#125; else&#123; res.send(&quot;You are not logged in!!!&quot;); &#125;&#125;)app.get(&quot;/dashboard&quot;, function(req, res, next)&#123; res.send(&quot;This is the dashboard page&quot;);&#125;);app.get(&quot;/profile&quot;, function(req, res, next)&#123; res.send(&quot;This is the dashboard page&quot;);&#125;);app.listen(8080);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"express.js","slug":"express-js","permalink":"https://www.silenceboy.com/tags/express-js/"},{"name":"middleware","slug":"middleware","permalink":"https://www.silenceboy.com/tags/middleware/"}]},{"title":"nodejså®ç°tail -fåŠŸèƒ½","slug":"nodejså®ç°tail-fåŠŸèƒ½","date":"2019-03-15T01:37:54.000Z","updated":"2021-09-27T07:27:40.443Z","comments":true,"path":"2019/03/15/nodejså®ç°tail-fåŠŸèƒ½/","link":"","permalink":"https://www.silenceboy.com/2019/03/15/nodejså®ç°tail-fåŠŸèƒ½/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&apos;use strict&apos;;const fs = require(&apos;fs&apos;);/** * tailf * * @param &#123;String&#125; filename æ–‡ä»¶å * @param &#123;Number&#125; delay è¯»å–ä¸åˆ°å†…å®¹æ—¶ç­‰å¾…çš„æ—¶é—´ï¼Œms * @param &#123;Function&#125; onError æ“ä½œå‡ºé”™æ—¶çš„å›è°ƒå‡½æ•°ï¼ŒonError(err) * @param &#123;Function&#125; onData è¯»å–åˆ°æ–‡ä»¶å†…å®¹æ—¶çš„å›è°ƒå‡½æ•°ï¼ŒonData(data) */function tailf(filename, delay, onError, onData) &#123; // æ¯æ¬¡è¯»å–æ–‡ä»¶å—å¤§å°ï¼Œ16K const CHUNK_SIZE = 16 * 1024; // æ‰“å¼€æ–‡ä»¶ï¼Œè·å–æ–‡ä»¶å¥æŸ„ fs.open(filename, &apos;r&apos;, (err, fd) =&gt; &#123; if (err) return onError(err); // æ–‡ä»¶å¼€å§‹ä½ç½® fs.fstat(fd, (err, stats) =&gt; &#123; if (err) return onError(err); // æ–‡ä»¶å¼€å§‹ä½ç½® let position = stats.size; // å¾ªç¯è¯»å– const loop = () =&gt; &#123; const buf = Buffer.alloc(CHUNK_SIZE); fs.read(fd, buf, 0, CHUNK_SIZE, position, (err, bytesRead, buf) =&gt; &#123; if (err) return onError(err); // å®é™…è¯»å–çš„å†…å®¹é•¿åº¦ä»¥ bytesRead ä¸ºå‡† // å¹¶ä¸”æ›´æ–° position ä½ç½® position += bytesRead; onData(buf.slice(0, bytesRead)); if (bytesRead &lt; CHUNK_SIZE) &#123; // å¦‚æœå½“å‰å·²åˆ°è¾¾æ–‡ä»¶æœ«å°¾ï¼Œåˆ™å…ˆç­‰å¾…ä¸€æ®µæ—¶é—´å†ç»§ç»­ // setTimeout(loop, delay); &#125; else &#123; loop(); &#125; &#125;); &#125;; loop(); // ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå¦‚æœæ”¶åˆ° change äº‹ä»¶åˆ™å°è¯•è¯»å–æ–‡ä»¶å†…å®¹ fs.watch(filename, (event, filename) =&gt; &#123; if (event === &apos;change&apos;) &#123; loop(); &#125; &#125;); &#125;); &#125;);&#125;const filename = process.argv[2];if (filename) &#123; tailf(filename, 100, err =&gt; &#123; if (err) console.error(err); &#125;, data =&gt; &#123; process.stdout.write(data); &#125;);&#125; else &#123; console.log(&apos;ä½¿ç”¨æ–¹æ³•ï¼š node tailf &lt;æ–‡ä»¶å&gt;&apos;);&#125;","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"tailf","slug":"tailf","permalink":"https://www.silenceboy.com/tags/tailf/"}]},{"title":"åœ¨dockerä¸­æ‰§è¡Œgitlab-runner","slug":"åœ¨dockerä¸­æ‰§è¡Œgitlab-runner","date":"2018-05-20T03:45:45.000Z","updated":"2021-09-27T07:27:40.447Z","comments":true,"path":"2018/05/20/åœ¨dockerä¸­æ‰§è¡Œgitlab-runner/","link":"","permalink":"https://www.silenceboy.com/2018/05/20/åœ¨dockerä¸­æ‰§è¡Œgitlab-runner/","excerpt":"","text":"ç¯å¢ƒ:ubuntu 16.04 LTSç›®çš„ï¼šä½¿ç”¨Dockerå®‰è£…å’Œé…ç½®GitLab Runnerï¼Œæ­å»ºGitLab CIæŒç»­é›†æˆç¯å¢ƒã€‚ å®‰è£…gitlab-runner1234$ docker run -d --name gitlab-runner --restart always \\ -v /srv/gitlab-runner/config:/etc/gitlab-runner \\ -v /var/run/docker.sock:/var/run/docker.sock \\ gitlab/gitlab-runner:latest å‚æ•°è¯´æ˜ï¼š -d: è®¾ç½®å®¹å™¨åå°è¿è¡Œ â€“nameï¼šå®¹å™¨åç§° -restart alwaysï¼šæ¯æ¬¡å¯åŠ¨å®¹å™¨å°±é‡å¯ gitlab-runner -v: å…±äº«ç›®å½•æŒ‚è½½ å®‰è£…å¥½åï¼Œæ‰§è¡Œ$ docker ps æŸ¥çœ‹å®¹å™¨æ˜¯å¦è¿è¡Œã€‚ æ³¨å†Œå’Œåˆå§‹åŒ–1$ docker exec -it gitlab-runner gitlab-ci-multi-runner register gitlab-runner registeræ˜¯è¿›å…¥gitlab-runnerå®¹å™¨çš„æ‰§è¡Œå‘½ä»¤ï¼Œç”¨äºæ³¨å†Œå’Œåˆå§‹åŒ–gitlab-runnerã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„é…ç½®ï¼šæ³¨æ„ï¼šdocker imageä¸ºæ»¡è¶³ä½ é¡¹ç›®æ„å»ºæ‰€éœ€ç¯å¢ƒçš„é•œåƒã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–è¾‘vim /srv/gitlab-runner/config/config.tomlï¼Œæ‰‹åŠ¨ä¿®æ”¹é…ç½®ï¼š12345678910111213141516171819concurrent = 1check_interval = 0[[runners]] name = &quot;test&quot; url = &quot;https://xxxx.oooo.com&quot; token = &quot;3894a417b64744e942008bcc51123a&quot; executor = &quot;docker&quot; builds_dir = &quot;/gitlab/runner-builds&quot; cache_dir = &quot;/gitlab/runner-cache&quot; [runners.docker] tls_verify = false image = &quot;node:latest&quot; privileged = false disable_cache = false volumes = [&quot;/data/gitlab-runner:/gitlab&quot;] shm_size = 0 pull_policy = &quot;if-not-present&quot; [runners.cache] gitlab-ci tokenå¯ä»¥ä»gitlabä¸Šçš„é¡¹ç›®çš„CIè®¾ç½®ä¸­è·å¾—ã€‚builds_dir ä¸ºæ–‡ä»¶å­˜æ”¾ä½ç½®volumes æŒ‚è½½ç›®å½•pull_policy è®¾ç½®gitlabæ˜¯å¦ä»è¿œç¨‹æ‹‰å»image,å¦‚æœiamgeæ˜¯æœ¬åœ°çš„éœ€è¦é…ç½®è¯¥å±æ€§çš„å€¼ä¸º: if-not-present æˆ–è€… never åˆ›å»º.gitlab-ci.ymlæ–‡ä»¶æˆ‘çš„é¡¹ç›®ä¸ºnodejsé¡¹ç›®ï¼Œä»¥ä¸‹ä¸ºæµ‹è¯•é…ç½®ã€‚ 1234567891011121314151617181920212223stages: - installcache: key: $&#123;CI_BUILD_REF_NAME&#125; paths: - node_modules/job-install: stage: install script: - whoami - echo $SHELL - rm -rf node_modules/ - pwd - source ~/.bashrc - nvm use 8 - node -v - yarn only: - preview tags: - test é…ç½®å¥½gitlab-ciæ–‡ä»¶ä¹‹åï¼Œæäº¤ä¿®æ”¹ï¼Œå¹¶å°†æœ€æ–°çš„ä¿®æ”¹æ¨é€åˆ°origin/previewåˆ†æ”¯ï¼Œå³å¯è§¦å‘CI:123456789101112131415161718192021222324252627282930313233343536Running with gitlab-runner 10.2.0 (0a75cdd1) on test (3894a417)Using Docker executor with image followme/node:v1 ...Using docker image sha256:07e33b24b6a9bebc0e0d8ba24f15b4b3c0f6fcf321a3809371a6211ac1afc38e for predefined container...Using locally found image version due to if-not-present pull policyUsing docker image followme/node:v1 ID=sha256:c99c549e8227e2323d1cebb6f988d5d8f6de7f77e1967fe0f02878b85cb72b0f for build container...Running on runner-3894a417-project-643-concurrent-0 via 304e3efed168...Cloning repository...Cloning into &apos;/gitlab/runner-builds/3894a417/0/Frontend/api-member&apos;...Checking out 311e85cb as preview...Skipping Git submodules setupChecking cache for preview...Successfully extracted cache$ whoamiroot$ echo $SHELL/bin/bash$ rm -rf node_modules/$ pwd/gitlab/runner-builds/3894a417/0/Frontend/api-member$ source ~/.bashrc$ nvm use 8Now using node v8.3.0 (npm v5.3.0)$ node -vv8.3.0$ yarnyarn install v1.3.2[1/4] Resolving packages...[2/4] Fetching packages...[3/4] Linking dependencies...[4/4] Building fresh packages...Done in 7.21s.Creating cache preview...node_modules/: found 5627 matching files Created cacheJob succeeded æ³¨æ„ï¼šä¹‹å‰æˆ‘æ˜¯åœ¨Ubuntu14.04ç‰ˆæœ¬çš„ç³»ç»Ÿä¸Šåšè¿™äº›é…ç½®ï¼Œä½†æ˜¯å½“æ‰§è¡ŒCIçš„æ—¶å€™æ€»ä¼šé‡åˆ°ä»¥ä¸‹æŠ¥é”™:ERROR: Preparation failed: Error reading remote info: json: cannot unmarshal number into Go struct field Info.Debug of type bool å°†ç³»ç»Ÿå‡çº§ä¸º16.04åè§£å†³è¯¥é—®é¢˜","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"gitlab-runner","slug":"gitlab-runner","permalink":"https://www.silenceboy.com/tags/gitlab-runner/"}]},{"title":"mysqlï¼Œsql serverç­‰æ•°æ®åº“è¿æ¥é›†æˆåº“","slug":"mysqlï¼Œsql-serverç­‰æ•°æ®åº“è¿æ¥é›†æˆåº“","date":"2018-04-08T09:33:08.000Z","updated":"2021-09-27T07:27:40.443Z","comments":true,"path":"2018/04/08/mysqlï¼Œsql-serverç­‰æ•°æ®åº“è¿æ¥é›†æˆåº“/","link":"","permalink":"https://www.silenceboy.com/2018/04/08/mysqlï¼Œsql-serverç­‰æ•°æ®åº“è¿æ¥é›†æˆåº“/","excerpt":"","text":"åœ°å€: https://github.com/fmfe/lib-sql Installation1$ npm install @fmfe/lib-sql or 1$ yarn add @fmfe/lib-sql Usageæœ‰ä¸¤ç§ä¼ å…¥é…ç½®ä¿¡æ¯çš„æ–¹å¼: ä½¿ç”¨configæ¥ç®¡ç†æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶.å‡è®¾æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸€ä¸ªconfigç›®å½•,configç›®å½•é‡Œæœ‰ä¸€ä¸ªdev.jsonæ–‡ä»¶. config/dev.json 12345678910111213141516171819202122&#123; &quot;mysql&quot;: &#123; &quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 3306, &quot;database&quot;: &quot;test&quot;, &quot;user&quot;: &quot;root&quot;, &quot;password&quot;: &quot;123456&quot; &#125;, &quot;mssql&quot;: &#123; &quot;user&quot;: &quot;sa&quot;, &quot;password&quot;: &quot;123456&quot;, &quot;server&quot;: &quot;127.0.0.1&quot;, &quot;database&quot;: &quot;test&quot;, &quot;port&quot;: 1433, &quot;pool&quot;: &#123; &quot;min&quot;: 0, &quot;max&quot;: 10, &quot;idleTimeoutMillis&quot;: 3000 &#125; &#125;&#125; mysql.js 12345678910111213141516171819202122232425262728293031const &#123; mysql &#125; = require(&apos;@fmfe/lib-sql&apos;);const mysqlPool = mysql.init();const _getNewSqlParamEntity = mysql._getNewSqlParamEntity;// æ‰§è¡Œå•æ¡sqlè¯­å¥ // mysql.exec(mysqlPool, sql, params);async function exec() &#123; const sql1 = &apos;select * from ?? limit 2&apos;; const data = await mysql.exec(mysqlPool, sql1, [&apos;tbl_user&apos;]);&#125;// æ‰§è¡Œmysqläº‹åŠ¡,å¯ä»¥ä¼ å…¥å¤šæ¡å¢/åˆ /æ”¹sqlè¯­å¥ // mysql.exectrans(mysqlpool, sqlParamsEntity);async function execTrans() &#123; const sqlParamsEntity = []; const sql1 = &apos;insert into ?? (name, age, sex) values (?, ?, ?)&apos;; const param1 = [&apos;tbl_user&apos;, &apos;aaa&apos;, 20, 1]; sqlParamsEntity.push(_getNewSqlParamEntity(sql1, param1)); const sql2 = &apos;insert into ?? (name, age, sex) values (?, ?, ?)&apos;; const param2 = [&apos;tbl_user&apos;, &apos;bbb&apos;, 22, 0]; sqlParamsEntity.push(_getNewSqlParamEntity(sql2, param2)); const sql3 = &apos;update ?? set age = ? where id = ?&apos;; const param3 = [&apos;tbl_user&apos;, 10, 1]; sqlParamsEntity.push(_getNewSqlParamEntity(sql3, param3)); // .... const data = await mysql.execTrans(mysqlPool, sqlParamsEntity); &#125; mssql.js 1234567891011121314151617181920212223const &#123; mssql &#125; = require(&apos;@fmfe/lib-sql&apos;);const _getNewSqlParamEntity = mssql._getNewSqlParamEntity;// æ‰§è¡Œå•æ¡è¯­å¥ // mssql.exec(sql)async function exec() &#123; const sql1 = &apos;select Top 3 name, age, sex from tbl_user order by age desc&apos;; const data = await mssql.exec(sql1); &#125;// æ‰§è¡Œsql server äº‹åŠ¡, æœ€å¥½æ‰§è¡Œå¢/åˆ /æ”¹è¯­å¥,è¿™é‡Œåªæ˜¯ç”¨selectæ¼”ç¤ºä½¿ç”¨æ–¹æ³•// mssql.exectrans(sqlParamsEntity); async function exectrans() &#123; const sqlParamsEntity = []; const sql1 = &apos;select * from tbl_user where id = 1&apos;; sqlParamsEntity.push(_getNewSqlParamEntity(sql1)); const sql2 = &apos;select * from tbl_user where id = 2&apos;; sqlParamsEntity.push(_getNewSqlParamEntity(sql2)); // ... const data = await mssql.execTrans(sqlParamsEntity); &#125; ç”±äºä½¿ç”¨configç®¡ç†é…ç½®æ–‡ä»¶, è¿è¡Œé¡¹ç›®æ—¶é€šè¿‡ä½¿ç”¨å‘½ä»¤: NODE_ENV=dev node ..., @fmfe/lib-sqlå³å¯è‡ªåŠ¨è·å–åˆ°æ•°æ®åº“ç›¸å…³é…ç½®. é€šè¿‡ä¼ å…¥é…ç½®æ–‡ä»¶æ¥è°ƒç”¨åº“æˆ‘ä»¬å¼•ç”¨ä¸Šè¾¹çš„ä»£ç ç¤ºä¾‹,åªéœ€åšä¸€ç‚¹æ”¹åŠ¨: mysql.js åªéœ€åœ¨åˆå§‹åŒ–æ—¶ä¼ å…¥mysqlæ•°æ®åº“é…ç½®å°±å¥½. 1234567891011const &#123; mysql &#125; = require(&apos;@fmfe/lib-sql&apos;);const mysqlPool = mysql.init(&#123; host: &apos;127.0.0.1&apos;, port: 3306, database: &apos;test&apos;, user: &apos;root&apos;, password: &apos;123456&apos;&#125;);...... mssql.js åœ¨æ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥é…ç½® 123456789101112131415161718192021222324const &#123; mssql &#125; = require(&apos;@fmfe/lib-sql&apos;);const config = &#123; user: &apos;sa&apos;, password: &apos;123456&apos;, server: &apos;127.0.0.1&apos;, database: &apos;test&apos;, port: 1433, pool: &#123; min: 0, max: 10, idleTimeoutMillis: 3000 &#125; &#125;async function exec() &#123; ...... const data = await mssql.exec(sql1, config); &#125;async function exectrans() &#123; ...... const data = await mssql.execTrans(sqlParamsEntity, config); &#125;","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"sql server","slug":"sql-server","permalink":"https://www.silenceboy.com/tags/sql-server/"}]},{"title":"dockeræ­å»ºç§æœ‰ä»“åº“ã€è‡ªç­¾å‘è¯ä¹¦ã€ç™»å½•è®¤è¯","slug":"dockeræ­å»ºç§æœ‰ä»“åº“ã€è‡ªç­¾å‘è¯ä¹¦ã€ç™»å½•è®¤è¯","date":"2018-03-28T01:24:21.000Z","updated":"2021-09-27T07:27:40.439Z","comments":true,"path":"2018/03/28/dockeræ­å»ºç§æœ‰ä»“åº“ã€è‡ªç­¾å‘è¯ä¹¦ã€ç™»å½•è®¤è¯/","link":"","permalink":"https://www.silenceboy.com/2018/03/28/dockeræ­å»ºç§æœ‰ä»“åº“ã€è‡ªç­¾å‘è¯ä¹¦ã€ç™»å½•è®¤è¯/","excerpt":"","text":"dockerå®˜æ–¹æ–‡æ¡£å¯¹å¦‚ä½•æ­å»ºç§æœ‰ä»“åº“è¯´çš„å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œæˆ‘åœ¨è¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹ä½¿ç”¨è‡ªç­¾å‘è¯ä¹¦å¦‚ä½•æ­å»ºç§æœ‰ä»“åº“å¹¶è®¤è¯æˆåŠŸã€‚ å‡è®¾registryçš„åŸŸåä¸ºï¼šregistry.domain.comã€‚ ç”Ÿæˆè‡ªç­¾å‘è¯ä¹¦ã€‚12&gt; mkdir -p certs&gt; openssl req -newkey rsa:2048 -nodes -sha256 -keyout certs/domain.key -x509 -days 365 -out certs/domain.crt æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œç”Ÿæˆè¯ä¹¦ï¼ŒCommon Nameé‚£é‡Œè¦è¾“å…¥æˆ‘ä»¬registryçš„åŸŸåï¼Œç”Ÿæˆçš„è¯ä¹¦åªå¯¹è¯¥åŸŸåæœ‰æ•ˆã€‚å…¶ä»–çš„å¯ä»¥ä»»æ„å¡«ã€‚ç”Ÿæˆåå¯ä»¥åœ¨certsç›®å½•ä¸‹æŸ¥çœ‹åˆ°è¯ä¹¦ã€‚ ç”Ÿæˆé‰´æƒå¯†ç æ–‡ä»¶ æ³¨æ„ä½¿ç”¨æ—¶usernameæ›¿æ¢ä¸ºä½ è‡ªå·±çš„ç”¨æˆ·åï¼Œpasswordæ›¿æ¢ä¸ºä½ è‡ªå·±çš„å¯†ç ã€‚123$ mkdir auth$ docker run --entrypoint htpasswd registry:2 -Bbn username password &gt; auth/htpasswd$ ls auth å¯åŠ¨Registry1234567891011docker run -d -p 5000:5000 --restart=always --name registry \\ -v `pwd`/auth:/auth \\ -e &quot;REGISTRY_AUTH=htpasswd&quot; \\ -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \\ -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\ -v `pwd`/data:/var/lib/registry \\ -v `pwd`/certs:/certs \\ -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/domain.crt \\ -e REGISTRY_HTTP_TLS_KEY=/certs/domain.key \\ registry:2199ad0b3591fb9613b21b1c96f017267f3c39661a7025d30df636c6805e7ab50 å¦‚æœæ²¡æœ‰registryé•œåƒä¼šè‡ªåŠ¨ä¸‹è½½ç„¶åå¯åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„åŠ é€Ÿå™¨ã€‚ç°åœ¨å®Œæˆäº†registryæœåŠ¡å™¨çš„æ­å»ºï¼Œå¯ä»¥å°è¯•pull imageåˆ°registryï¼š123$ docker pull busybox // ä»å®˜æ–¹æ‹‰å»é•œåƒä½œä¸ºæˆ‘ä»¬çš„æµ‹è¯•é•œåƒ$ docker tag busybox:latest registry.domain.com:5000/busybox:latest // ä¸ºbusyboxæ‰“tag,tagçš„å‰ç¼€ä¸€å®šè¦ä¸ºæˆ‘ä»¬registryæœåŠ¡å™¨çš„åŸŸåã€‚$ docker push registry.domain.com:5000/busybox:latest // å°†é•œåƒæ¨é€åˆ°æˆ‘ä»¬çš„registryæœåŠ¡å™¨ å¦‚æœç›´æ¥è¿™æ ·å»pushï¼Œä¼šå¤±è´¥ï¼Œå¹¶ä¸”å‡ºç° no basic auth credentialsçš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰è¿›è¡Œç™»å½•è®¤è¯ã€‚12345$ docker login registry.domain.com:5000$ Username: username$ Password: passwordWARNING: login credentials saved in ~/.docker/config.jsonLogin Succeeded ç™»å½•æˆåŠŸåå†æ¬¡æ‰§è¡Œpushæ“ä½œï¼Œä¼šå‡ºç°x509: certificate signed by unknown authorityçš„æŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºdocker clientè®¤ä¸ºserverä¼ è¾“è¿‡æ¥çš„è¯ä¹¦çš„ç­¾ç½²æ–¹æ˜¯ä¸€ä¸ªunknown authorityï¼ˆæœªçŸ¥çš„CAï¼‰ï¼Œå› æ­¤éªŒè¯å¤±è´¥ã€‚æˆ‘ä»¬éœ€è¦è®©docker clientå®‰è£…æˆ‘ä»¬çš„CAè¯ä¹¦ï¼š123$ sudo mkdir -p /etc/docker/certs.d/registry.domain.com:5000$ sudo cp certs/domain.crt /etc/docker/certs.d/registry.domain.com:5000/ca.crt$ sudo service docker restart //å®‰è£…è¯ä¹¦åï¼Œé‡å¯Docker Daemon å†æ¬¡æ‰§è¡Œpushæ“ä½œï¼ŒæˆåŠŸæ¨é€ï¼š1234$ docker push registry.domain.com:5000/busybox:latestThe push refers to a repository [registry.domain.com:5000/busybox]0271b8eebde3: Pushedlatest: digest: sha256:3571ca1b0e90e159de4fc07b3bf94ef189a0645314704f629204adb7035ecf45 size: 527 è¿™é‡Œéœ€è¦æ³¨æ„ï¼šå¦‚æœä½¿ç”¨è‡ªç­¾ç½²çš„è¯ä¹¦ï¼Œé‚£ä¹ˆæ‰€æœ‰è¦ä¸Registryäº¤äº’çš„Dockerä¸»æœºéƒ½éœ€è¦å®‰è£…registry.domain.comçš„ca.crt(domain.crt)ã€‚ä½†å¦‚æœä½ ä½¿ç”¨çŸ¥åCAï¼Œè¿™ä¸€æ­¥ä¹Ÿå°±å¯ä»¥å¿½ç•¥ã€‚å¦‚æœæ˜¯MacOSç‰ˆçš„dockerä¹Ÿæ˜¯ä¸€æ ·çš„æ“ä½œï¼Œå°½ç®¡å®ƒè¿/etc/dockeréƒ½ä¸å­˜åœ¨,ä¸€æ ·å»åˆ›å»ºç›®å½•å°±å¥½äº†ã€‚åªæ˜¯macOSçš„ç”¨æˆ·æƒ³è¦è®¤è¯ç”Ÿæ•ˆéœ€è¦æ‰§è¡Œé¢å¤–çš„å‘½ä»¤ï¼š1$ sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain /etc/docker/certs.d/registry.domain.com:5000/ca.crt æ­¤æ—¶åœ¨macä¸Šæ‰§è¡Œdocker loginæ‰å¯æˆåŠŸã€‚","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"}]},{"title":"å®¹è”äº‘å‘é€çŸ­ä¿¡æ¨¡å—","slug":"å®¹è”äº‘å‘é€çŸ­ä¿¡æ¨¡å—","date":"2018-01-28T01:22:30.000Z","updated":"2021-09-27T07:27:40.447Z","comments":true,"path":"2018/01/28/å®¹è”äº‘å‘é€çŸ­ä¿¡æ¨¡å—/","link":"","permalink":"https://www.silenceboy.com/2018/01/28/å®¹è”äº‘å‘é€çŸ­ä¿¡æ¨¡å—/","excerpt":"","text":"rongSMSä¸€ä¸ªnodejså®ç°çš„å®¹è”äº‘å‘é€çŸ­ä¿¡æ¨¡æ¿æ¨¡å—ï¼ˆäº‘è”äº‘å®˜æ–¹æ²¡æœ‰æä¾›nodejså®ç°çš„ç‰ˆæœ¬ï¼‰ï¼Œæ”¯æŒnode7.6ä»¥ä¸Šç‰ˆæœ¬ã€‚æ”¯æŒæ‰€æœ‰çŸ­ä¿¡æ¨¡æ¿ã€‚ä¸€äº›å¸¸ç”¨çš„å®¹è”äº‘è¿”å›ç ï¼š code å«ä¹‰ 000000 å‘é€æˆåŠŸ 160038 çŸ­ä¿¡éªŒè¯ç å‘é€è¿‡é¢‘ç¹ 160040 è¯¥æ‰‹æœºå·çŸ­ä¿¡éªŒè¯ç å‘é€æ¬¡æ•°è¶…è¿‡å½“æ—¥é™åˆ¶ Installation1$ npm install rongsms or 1$ yarn add rongsms Usage12345678910111213141516const rongSms = require(&apos;rongSms&apos;);//ç”ŸæˆéªŒè¯ç ï¼Œåœ¨å‘é€éªŒè¯ç æ˜¯å¯ä»¥ç”¨æ¥ç”Ÿæˆ6ä½éªŒè¯ç ã€‚å¦‚æœä¸æ˜¯å‘é€éªŒè¯ç å¯ä»¥ä¸ç”¨ã€‚const code = rongSms.generate_code();//åˆå§‹åŒ–//account_sid: ä¸»è´¦æˆ·sidï¼Œç™»é™†äº‘é€šè®¯ç½‘ç«™åï¼Œå¯åœ¨æ§åˆ¶å°é¦–é¡µçœ‹åˆ°å¼€å‘è€…ä¸»è´¦å·ACCOUNT SID//account_tokenï¼š ä¸»è´¦æˆ·Tokenï¼Œç™»é™†äº‘é€šè®¯ç½‘ç«™åï¼Œå¯åœ¨æ§åˆ¶å°é¦–é¡µçœ‹åˆ°å¼€å‘è€…ä¸»è´¦å·AUTH TOKENã€‚//app_id: è¯·ä½¿ç”¨ç®¡ç†æ§åˆ¶å°ä¸­å·²åˆ›å»ºåº”ç”¨çš„APPIDã€‚rongSms.init_sms(account_sid, account_token, app_id);//å‘é€çŸ­ä¿¡//phone:æ¥å—çŸ­ä¿¡æ‰‹æœºå·//arr: æ•°ç»„ï¼Œå¯¹åº”çŸ­ä¿¡æ¨¡æ¿ä¸­çš„æ›¿æ¢å†…å®¹ã€‚å¦‚çŸ­ä¿¡æ¨¡æ¿ä¸ºï¼šæ‚¨çš„éªŒè¯ç ä¸º&#123;1&#125;ï¼Œè¯·äº&#123;2&#125;å†…æ­£ç¡®è¾“å…¥ï¼Œå¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥æ­¤çŸ­ä¿¡ã€‚arrå–å€¼ä¸ºï¼š[&apos;123456&apos;, &apos;10åˆ†é’Ÿ&apos;]//template_idï¼šæ¨¡æ¿idrongSms.send_sms(phone, arr, template_id);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"npm","slug":"npm","permalink":"https://www.silenceboy.com/tags/npm/"},{"name":"sms","slug":"sms","permalink":"https://www.silenceboy.com/tags/sms/"}]},{"title":"æ­å»ºshadowsockæœåŠ¡å™¨","slug":"æ­å»ºshadowsockæœåŠ¡å™¨","date":"2018-01-19T01:37:28.000Z","updated":"2021-09-27T07:27:40.448Z","comments":true,"path":"2018/01/19/æ­å»ºshadowsockæœåŠ¡å™¨/","link":"","permalink":"https://www.silenceboy.com/2018/01/19/æ­å»ºshadowsockæœåŠ¡å™¨/","excerpt":"","text":"å®‰è£…Debian / Ubuntu: 12$ apt-get install python-pip$ pip install shadowsocks CentOS: 12$ yum install python-setuptools &amp;&amp; easy_install pip$ pip install shadowsocks å¯åŠ¨ æœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼å¯åŠ¨ ç›´æ¥å¯åŠ¨ï¼š 1ssserver -p 8388 -k password -m rc4-md5 -d start ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨ï¼š æ‰§è¡Œvim /etc/shadowsocks.jsonæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 123456789&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:8388, &quot;local_address&quot;: &quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;mypassword&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;rc4-md5&quot;&#125; å¤šç”¨æˆ·é…ç½®å¦‚ä¸‹ï¼š 1234567891011121314&#123; &quot;server&quot;:&quot;0.0.0.0&quot;ï¼Œ &quot;local_address&quot;: &quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;port_password&quot;: &#123; &quot;8388&quot;: &quot;password&quot;, &quot;8387&quot;: &quot;password&quot;, &quot;8386&quot;: &quot;password&quot;, &quot;8385&quot;: &quot;password&quot; &#125;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;rc4-md5&quot;, &quot;fast_open&quot;: false &#125; ç„¶åé€šè¿‡æ‰§è¡Œä¸€ä¸‹å‘½ä»¤å¯åŠ¨ï¼š å¦‚æœè¦åœæ­¢è¿è¡Œï¼Œå°†å‘½ä»¤ä¸­çš„startæ”¹æˆstopã€‚ 1$ ssserver -c /etc/shadowsocks.json -d start TIPS: åŠ å¯†æ–¹å¼æ¨èä½¿ç”¨rc4-md5ï¼Œå› ä¸º RC4 æ¯” AES é€Ÿåº¦å¿«å¥½å‡ å€ï¼Œå¦‚æœç”¨åœ¨è·¯ç”±å™¨ä¸Šä¼šå¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ã€‚æ—§çš„ RC4 åŠ å¯†ä¹‹æ‰€ä»¥ä¸å®‰å…¨æ˜¯å› ä¸º Shadowsocks åœ¨æ¯ä¸ªè¿æ¥ä¸Šé‡å¤ä½¿ç”¨ keyï¼Œæ²¡æœ‰ä½¿ç”¨ IVã€‚ç°åœ¨å·²ç»é‡æ–°æ­£ç¡®å®ç°ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚æ›´å¤šå¯ä»¥çœ‹ issueã€‚ å¼€æœºè‡ªå¯ç¼–è¾‘ä¸€ä¸‹/etc/supervisord.confæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1$ vim /etc/supervisord.conf æŠŠä¸‹é¢çš„å†…å®¹ç²˜è´´åˆ°æ–‡ä»¶å°¾éƒ¨çš„ç©ºè¡Œå¤„ï¼Œç„¶åä¿å­˜ï¼š 1234567[program:shadowsocks]command=ssserver -c /etc/shadowsocks.jsonautostart=trueautorestart=trueuser=rootlog_stderr=truelogfile=/var/log/shadowsocks.log æ¥ä¸‹æ¥éœ€è¦ç¼–è¾‘ä¸€ä¸‹/etc/rc.localæ–‡ä»¶ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1$ vi /etc/rc.local è¯·æŠŠä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°æ–‡ä»¶ä¸­éƒ¨çš„ç©ºç™½å¤„ï¼Œç„¶åä¿å­˜ 1$ service supervisord start å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œé‡å¯ä¹‹åï¼Œshadowsockä¼šè‡ªåŠ¨è¿è¡Œã€‚ é—®é¢˜ å¦‚æœé€šè¿‡å®¢æˆ·ç«¯å§‹ç»ˆä»£ç†å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹æ³•æŸ¥æ‰¾é—®é¢˜ã€‚ 1.å®¢æˆ·ç«¯é€šè¿‡ telnet ip port ç¡®è®¤ ss-server æ˜¯å¦æ­£å¸¸å¼€å¯ï¼Œå¦‚æœæ²¡æœ‰æ­£å¸¸å¼€å¯ï¼Œæœ‰å¯èƒ½æ˜¯è®¾å®šçš„ç«¯å£æ²¡æœ‰å¼€æ”¾ï¼Œ 1$ iptables -A INPUT -p tcp --dport 8388 -j ACCEPT æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œå°† 8388 ä¿®æ”¹ä¸ºä½ è®¾å®šçš„ç«¯å£å³å¯ã€‚ 2.å¦‚æœç¬¬ä¸€æ­¥ä¸­è¿æ¥æ­£å¸¸ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹ ss-server çš„æ—¥å¿— 1$ ssserver -c /etc/shadowsocks.json --log-file /var/log/shadowsocks.log -d start å¯åŠ¨çš„æ—¶å€™æ·»åŠ  --log-file å‚æ•°ï¼Œç„¶åé€šè¿‡ 1$ tail -f /var/log/shadowsocks.log æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼Œä¸€èˆ¬å¯ä»¥çœ‹å‡ºä¸€ç‚¹ç«¯å€ªã€‚","categories":[{"name":"shadowsock","slug":"shadowsock","permalink":"https://www.silenceboy.com/categories/shadowsock/"}],"tags":[{"name":"shadowsock","slug":"shadowsock","permalink":"https://www.silenceboy.com/tags/shadowsock/"}]},{"title":"æ­å»ºæŒ‡å®šç‰ˆæœ¬nodeç¯å¢ƒçš„dockeré•œåƒ","slug":"æ­å»ºæŒ‡å®šç‰ˆæœ¬nodeç¯å¢ƒçš„dockeré•œåƒ","date":"2017-12-07T09:36:12.000Z","updated":"2021-09-27T07:27:40.448Z","comments":true,"path":"2017/12/07/æ­å»ºæŒ‡å®šç‰ˆæœ¬nodeç¯å¢ƒçš„dockeré•œåƒ/","link":"","permalink":"https://www.silenceboy.com/2017/12/07/æ­å»ºæŒ‡å®šç‰ˆæœ¬nodeç¯å¢ƒçš„dockeré•œåƒ/","excerpt":"","text":"åŸºäºubuntu16.04çš„dockeré•œåƒå»æ‰“åŒ…å®‰è£…äº†nodejsç¯å¢ƒçš„dockeré•œåƒ å‰ç½®æ¡ä»¶1.è·å–ubuntu16.04é•œåƒ1# docker pull ubuntu:16.04 2.åŸºäºubuntu16.04é•œåƒå¯åŠ¨å®¹å™¨1# docker run -ti --name ubuntu ubuntu:16.04 /bin/bash ä»æºä»£ç å®‰è£…Node.JS å®‰è£…nodeè¿‡ç¨‹å‡åœ¨å®¹å™¨å†…è¿›è¡Œ 1.æ›´æ–°æºå¹¶å®‰è£…å¿…è¦å·¥å…·12# apt-get update# apt-get install git wget python gcc make g++ 2.è·å–æŒ‡å®šç‰ˆæœ¬çš„nodeæºä»£ç  è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨v8.9.0ç‰ˆ,ç›®å‰ä¸ºé•¿æœŸæ”¯æŒç‰ˆ,å¯ä»¥ä½¿ç”¨ä¸¤ä¸­è·å–æºç çš„æ–¹å¼.123# wget http://nodejs.org/dist/v8.9.0/node-v8.9.0.tar.gz# tar zxvf node-v8.9.0.tar.gz# mv node-v8.9.0 node or1# git clone -b v8.9.0 git@github.com:nodejs/node.git 3.ä¿®æ”¹ç›®å½•æƒé™1# chmod -R 755 node 4.ç¼–è¯‘å®‰è£…node1234# cd node# ./configure# make# make install 5.æŸ¥çœ‹nodeç‰ˆæœ¬12# node --versionv8.9.0 å®‰è£…å®Œæˆåé€€å‡ºé•œåƒ åˆ©ç”¨åŒ…ç®¡ç†å™¨å®‰è£…Node.JS å®‰è£…åœ¨é•œåƒå†…è¿›è¡Œ 1.æ›´æ–°æºå¹¶å®‰è£…å¿…è¦å·¥å…· setup_8.xä¸ºå®‰è£…8.xç‰ˆæœ¬,è‹¥å®‰è£…9.xç‰ˆæœ¬ä¸º:setup_9.x123# apt-get update# apt-get install curl# curl -sL https://deb.nodesource.com/setup_8.x | bash - 2.å®‰è£…nodejs1# apt-get install -y nodejs 3.æŸ¥çœ‹nodeç‰ˆæœ¬12# node --versionv8.9.0 å®‰è£…å®Œæˆåé€€å‡ºé•œåƒ ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ æ³¨æ„: åœ¨ä¸Šä¸€æ­¥å·²ç»é€€å‡ºå®¹å™¨,ä¸‹é¢çš„æ“ä½œæ˜¯åœ¨æœ¬æœºä¸Šè¿›è¡Œçš„. 1.æ‰§è¡Œdocker ps -a æŸ¥çœ‹nameä¸ºubuntuçš„ID 2.åˆ›å»ºæ–°çš„é•œåƒ12$ docker commit -a &quot;author&quot; -m &quot;commit message&quot; b0084b239645 xxx/node8.9:v1sha256:bc03d86ef63bab18deafe643f99b2aa1da5697860e1432102dbbcbb281fdf335 -a: ä½œè€…ä¿¡æ¯ -m: æäº¤ä¿¡æ¯ b0084b239645: docker ps -aä¸­æŸ¥çœ‹çš„ID xxx/node8.9:v1: æ–°çš„é•œåƒåç§° 3.ä¸Šä¼ åˆ°é•œåƒä»“åº“ é•œåƒåˆ¶ä½œå®Œæˆå¯ä»¥å°†é•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“,ä¾¿äºä»¥åä½¿ç”¨,å¯ä»¥æŒ‡å®šä»“åº“åœ°å€,ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ä»“åº“.1$ docker push xxx/node8.9:v1","categories":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"ä½¿ç”¨Dockerfileéƒ¨ç½²nodejsæœåŠ¡","slug":"ä½¿ç”¨Dockerfileéƒ¨ç½²nodejsæœåŠ¡","date":"2017-12-04T09:49:49.000Z","updated":"2021-09-27T07:27:40.446Z","comments":true,"path":"2017/12/04/ä½¿ç”¨Dockerfileéƒ¨ç½²nodejsæœåŠ¡/","link":"","permalink":"https://www.silenceboy.com/2017/12/04/ä½¿ç”¨Dockerfileéƒ¨ç½²nodejsæœåŠ¡/","excerpt":"","text":"åˆå§‹åŒ–Dockerfileå‡è®¾æˆ‘ä»¬çš„é¡¹ç›®åä¸ºexpress,åœ¨expressé¡¹ç›®ä¸­åˆ›å»ºç¼–è¾‘Dockerfileæ–‡ä»¶ï¼š123456789101112131415$ vim DockerfileFROM node:latestRUN mkdir -p /home/www/expressWORKDIR /home/www/expressCOPY . /home/www/expressRUN npm installEXPOSE 3000ENTRYPOINT [&quot;npm&quot;, &quot;run&quot;]CMD [&quot;start&quot;] è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ä»¥ä¸‹å‘½ä»¤ï¼š FROM node:latest - æŒ‡å®šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„nodeåŸºç¡€é•œåƒ RUN mkdir -p /home/www/express - åœ¨å®¹å™¨å†…åˆ›å»º/home/www/expressç›®å½• WORKDIR /home/www/express - å°†å®¹å™¨å†…å·¥ä½œç›®å½•è®¾ç½®ä¸º/home/www/express COPY . /home/www/express - å°†å®¿ä¸»æœºå½“å‰ç›®å½•ä¸‹å†…å®¹å¤åˆ¶åˆ°é•œåƒ/home/www/expressç›®å½•ä¸‹ RUN npm install - npm installå®‰è£…åº”ç”¨æ‰€éœ€çš„NPMåŒ… EXPOSE 3000 - å¯¹å¤–å¼€æ”¾å®¹å™¨çš„3000ç«¯å£ ENTRYPOINT [&quot;npm&quot;, &quot;run&quot;] - å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ã€‚ä¸å¯è¢«docker runæä¾›çš„å‚æ•°è¦†ç›– CMD [&quot;start&quot;] - åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯è¢«docker runæä¾›çš„å‚æ•°è¦†ç›– æ„å»ºé•œåƒç¼–å†™å®ŒDockerfileæ–‡ä»¶åï¼Œå°±å¯ä»¥é€šè¿‡docker buildå‘½ä»¤æ¥æ„å»ºé•œåƒï¼š1$ sudo docker build -t test/express . æˆ‘ä»¬é€šè¿‡-tå‚æ•°ï¼Œå°†é•œåƒå‘½åä¸ºtest/expressã€‚æ„å»ºè¿‡ç¨‹ç±»ä¼¼å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536Sending build context to Docker daemon 29.7 kBStep 1/8 : FROM registry.src.followme.com:5000/node:v1 ---&gt; c99c549e8227Step 2/8 : RUN mkdir -p /home/www/express-app ---&gt; Running in 8be9a90629b0 ---&gt; b9f584851225Removing intermediate container 8be9a90629b0Step 3/8 : WORKDIR /home/www/express-app ---&gt; 5072c31f9dd9Removing intermediate container e9dbf4ce3d8bStep 4/8 : COPY . /home/www/express-app ---&gt; a4d1725f15edRemoving intermediate container 30aa49765015Step 5/8 : RUN yarn ---&gt; Running in f181c243deaayarn install v1.3.2[1/4] Resolving packages...[2/4] Fetching packages...[3/4] Linking dependencies...[4/4] Building fresh packages...Done in 9.46s. ---&gt; d390931d73e6Removing intermediate container f181c243deaaStep 6/8 : EXPOSE 3000 ---&gt; Running in 94101ab38864 ---&gt; 43199a8a5a90Removing intermediate container 94101ab38864Step 7/8 : ENTRYPOINT npm run ---&gt; Running in 80b1318962cf ---&gt; 6b203c50e855Removing intermediate container 80b1318962cfStep 8/8 : CMD start ---&gt; Running in a9909e537f59 ---&gt; d56eae48377cRemoving intermediate container a9909e537f59Successfully built d56eae48377c è¿è¡Œå®¹å™¨é•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥é€šè¿‡æ‰€æ„å»ºçš„é•œåƒåˆ›å»º/è¿è¡Œå®¹å™¨ï¼Œä»è€Œå®ç°expressåº”ç”¨çš„ Docker åŒ–éƒ¨æš‘ã€‚ ä½¿ç”¨tets/expressé•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ï¼š1$ sudo docker run -d --name experss-app -p 3000:3000 test/express åœ¨ä»¥ä¸Šæ“ä½œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡test/expressé•œåƒè¿è¡Œäº†å®¹å™¨ï¼Œå¹¶å°†å®¹å™¨å‘½åä¸ºexperss-appã€‚è¿è¡Œå®¹å™¨ï¼Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†-då‚æ•°ï¼Œè¯¥å‚æ•°ä½¿å®¹å™¨ä»¥åå°çš„æ–¹å¼è¿è¡Œã€‚è€Œ-på‚æ•°å°†å®¿ä¸»æœºçš„3000ç«¯å£æ˜ å°„åˆ°äº†å®¹å™¨çš„3000ç«¯å£ã€‚è¿è¡Œå®¹å™¨åï¼Œå¯ä»¥é€šè¿‡docker pså‘½ä»¤çœ‹åˆ°è¿è¡Œä¸­çš„å®¹å™¨ã€‚æ­¤æ—¶å¯é€šè¿‡localhost:3000è®¿é—®æœåŠ¡ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"dockerfile","slug":"dockerfile","permalink":"https://www.silenceboy.com/tags/dockerfile/"}]},{"title":"JavaScriptæ•°ç»„éšæœºæ’åº","slug":"JavaScriptæ•°ç»„éšæœºæ’åº","date":"2017-08-08T04:21:39.000Z","updated":"2021-09-27T07:27:40.436Z","comments":true,"path":"2017/08/08/JavaScriptæ•°ç»„éšæœºæ’åº/","link":"","permalink":"https://www.silenceboy.com/2017/08/08/JavaScriptæ•°ç»„éšæœºæ’åº/","excerpt":"","text":"12345678910111213141516//ä¸æ–­ä»åŸæ•°ç»„ä¸­éšæœºå–ä¸€ä¸ªå…ƒç´ æ”¾è¿›æ–°æ•°ç»„ï¼ŒåŒæ—¶åˆ é™¤åŸæ•°ç»„ä¸­è¯¥å€¼ï¼Œé€’å½’é‡å¤è‡³å…¨éƒ¨å–å‡ºã€‚function randomSort(arr, newArr) &#123; var newArr = newArr || [] if (arr.length == 1) &#123; newArr.push(arr[0]) return newArr; // ç›¸å½“äºé€’å½’é€€å‡º &#125; var random = Math.ceil(Math.random() * arr.length) - 1 newArr.push(arr[random]) arr.splice(random, 1) return randomSort(arr, newArr)&#125;randomSort([1, 2, 3, 4, 5, 6, 7]); //[2, 3, 1, 5, 6, 7, 4]randomSort([1, 2, 3, 4, 5, 6, 7]); //[3, 4, 2, 5, 1, 6, 7]","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/categories/ç®—æ³•/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/tags/ç®—æ³•/"}]},{"title":"JavaScriptæŒ‰æ¦‚ç‡éšæœºç”Ÿæˆäº‹ä»¶","slug":"JavaScriptæŒ‰æ¦‚ç‡éšæœºç”Ÿæˆäº‹ä»¶","date":"2017-08-02T04:20:03.000Z","updated":"2021-09-27T07:27:40.436Z","comments":true,"path":"2017/08/02/JavaScriptæŒ‰æ¦‚ç‡éšæœºç”Ÿæˆäº‹ä»¶/","link":"","permalink":"https://www.silenceboy.com/2017/08/02/JavaScriptæŒ‰æ¦‚ç‡éšæœºç”Ÿæˆäº‹ä»¶/","excerpt":"","text":"12345678910111213141516171819202122232425/**åœ¨æŠ½å¥–çš„æ´»åŠ¨ä¸­ç»å¸¸ä¼šç”¨åˆ°è¿™ä¸ªç®—æ³•ï¼Œä¸åŒå¥–é¡¹çš„è·å–æ¦‚ç‡ä¸åŒï¼Œè¦æŒ‰æ¦‚ç‡å»éšæœºç”Ÿæˆå¯¹åº”çš„å¥–å“**/function random(arr1, arr2) &#123; var sum = 0, factor = 0, random = Math.random(); for(var i = arr2.length - 1; i &gt;= 0; i--) &#123; sum += arr2[i]; // ç»Ÿè®¡æ¦‚ç‡æ€»å’Œ &#125;; random *= sum; // ç”Ÿæˆæ¦‚ç‡éšæœºæ•° for(var i = arr2.length - 1; i &gt;= 0; i--) &#123; factor += arr2[i]; if(random &lt;= factor) return arr1[i]; &#125;; return null;&#125;;// testvar a = [&apos;mac&apos;, &apos;iphone&apos;, &apos;vivo&apos;, &apos;OPPO&apos;];var b = [0.1, 0.2, 0.3, 0.4];console.log(random(a, b));","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/categories/ç®—æ³•/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/tags/ç®—æ³•/"}]},{"title":"node.jsä¹‹base64ç¼–ç è§£ç ","slug":"node-jsä¹‹base64ç¼–ç è§£ç ","date":"2016-09-16T04:15:18.000Z","updated":"2021-09-27T07:27:40.443Z","comments":true,"path":"2016/09/16/node-jsä¹‹base64ç¼–ç è§£ç /","link":"","permalink":"https://www.silenceboy.com/2016/09/16/node-jsä¹‹base64ç¼–ç è§£ç /","excerpt":"","text":"åˆ©ç”¨bufferæ¥è¿›è¡Œç¼–è§£ç ï¼š 123456&gt; var a = new Buffer(&apos;key1=value1&amp;key2=value2&apos;).toString(&apos;base64&apos;);undefined&gt; a&apos;a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTI=&apos;&gt; new Buffer(a, &apos;base64&apos;).toString()&apos;key1=value1&amp;key2=value2&apos; å¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è§£ç åçš„å†…å®¹ï¼š 1echo a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTI= | base64 -D","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"base64","slug":"base64","permalink":"https://www.silenceboy.com/tags/base64/"}]},{"title":"JavaScriptæ•°ç»„å‡½æ•°","slug":"JavaScriptæ•°ç»„å‡½æ•°","date":"2016-08-25T01:54:30.000Z","updated":"2021-09-27T07:27:40.436Z","comments":true,"path":"2016/08/25/JavaScriptæ•°ç»„å‡½æ•°/","link":"","permalink":"https://www.silenceboy.com/2016/08/25/JavaScriptæ•°ç»„å‡½æ•°/","excerpt":"","text":"ä¸‹é¢æ€»ç»“äº†ä¸€äº›JavaScriptä¸­å¸¸ç”¨çš„æ•°ç»„æ“ä½œæ–¹æ³•ã€‚éªŒè¯æ˜¯ä¸æ˜¯æ•°ç»„ç”¨ arr instanceof Array æˆ–è€…Array.isArray(arr)å¦‚æœæ˜¯è¿”å›truepush()åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å¹¶è¿”å›æ•°ç»„é•¿åº¦pop()ç§»é™¤æ•°ç»„çš„æœ€åä¸€é¡¹å¹¶è¿”å›ç§»é™¤çš„é¡¹shift()ç§»é™¤æ•°ç»„ä¸­çš„ç¬¬ä¸€é¡¹å¹¶è¿”å›ç§»é™¤çš„é¡¹unshift()åœ¨æ•°ç»„å‰ç«¯æ·»åŠ ä»»æ„ä¸ªé¡¹å¹¶è¿”å›æ–°çš„æ•°ç»„é•¿åº¦reverse()åè½¬æ•°ç»„â€‹join()å°†æ•°ç»„ä¸­çš„ å€¼åˆå¹¶æˆå­—ç¬¦ä¸²é»˜è®¤ç”¨,åˆ†å‰²ï¼Œå¯ä»¥è‡ªå®šä¹‰å¦‚join(â€˜|â€™);sort()å‡åºæ’åˆ—æ•°ç»„ï¼Œè°ƒç”¨æ¯ä¸ªæ•°ç»„é¡¹çš„toString()è½¬å‹æ–¹æ³•ï¼Œç„¶åæ¯”è¾ƒå¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œä»¥ç¡®å®šå¦‚ä½•æ’åºã€‚å¯ä»¥æ¥å—ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ä½œä¸ºå‚æ•°å¦‚æœå¯¹æ•°å€¼è¿›è¡Œæ’åºå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼š 123456789101112function compare(value1,value2)&#123; //å‡åº â€‹if(value1&lt;value2)&#123; â€‹ â€‹return -1; â€‹&#125;else if(value1 &gt; value2)&#123; â€‹ â€‹return 1; â€‹&#125;else&#123; â€‹ â€‹return 0; â€‹&#125;&#125;var values=[0,1,5,10,15];values.sort(compare);console.log(values);//0,1,5,10,15 å¦‚éœ€é™åºæ’åˆ—å‡åºåä½¿ç”¨reverse()å³å¯concat()åŸºäºå½“å‰æ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¦‚æœä¼ å…¥å‚æ•°ï¼Œä¼šå°†å‚æ•°æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾slice()åŸºäºå½“å‰æ•°ç»„ä¸­çš„ä¸€æˆ–å¤šä¸ªé¡¹åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¥å—ä¸€æˆ–ä¸¤ä¸ªå‚æ•°ï¼Œå³è¦è¿”å›é¡¹çš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œåœ¨åªæœ‰ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹è¿”å›ä»è¯¥å‚æ•°æŒ‡å®šä½ç½®å¼€å§‹åˆ°å½“å‰æ•°ç»„æœ«å°¾çš„æ‰€æœ‰é¡¹ã€‚å¦‚æœæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¯¥æ–¹æ³•è¿”å›èµ·å§‹å’Œç»“æŸä½ç½®ä¹‹é—´çš„é¡¹ï¼Œä½†ä¸åŒ…æ‹¬ç»“æŸä½ç½®çš„é¡¹ã€‚ splice(): åˆ é™¤ï¼šåˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼šè¦åˆ é™¤çš„ç¬¬ä¸€é¡¹çš„ä½ç½®å’Œè¦åˆ é™¤çš„é¡¹æ•°ã€‚ä¾‹å¦‚splice(0,2)ä¼šåˆ é™¤æ•°ç»„ä¸­çš„å‰ä¸¤é¡¹ã€‚ æ’å…¥ï¼šå¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æä¾›3ä¸ªå‚æ•°ï¼šèµ·å§‹ä½ç½®ã€0ï¼ˆè¦åˆ é™¤çš„é¡¹æ•°ï¼‰å’Œè¦æ’å…¥çš„é¡¹ã€‚å¦‚æœè¦æ’å…¥å¤šä¸ªé¡¹å¯ä»¥å†ä¼ å…¥ç¬¬å››ã€ç¬¬äº”ï¼Œä»»æ„å¤šä¸ªé¡¹ã€‚ æ›¿æ¢ï¼šå¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„å¤šä¸ªé¡¹ï¼Œä¸”åŒæ—¶åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æŒ‡å®š3ä¸ªå‚æ•°ï¼šå…¶å®ä½ç½®ã€è¦åˆ é™¤çš„é¡¹æ•°å’Œè¦æ’å…¥çš„ä»»æ„æ•°é‡çš„é¡¹ã€‚ indexOf()å’ŒlastIndexOf()ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šè¦æŸ¥æ‰¾çš„é¡¹å’Œï¼ˆå¯é€‰çš„ï¼‰è¡¨ç¤ºæŸ¥æ‰¾èµ·ç‚¹ä½ç½®çš„ç´¢å¼•ã€‚indexOf()ä»å‰å‘åæŸ¥æ‰¾ï¼ŒlastIndexOf()ä»åå‘å‰æŸ¥æ‰¾ï¼Œæ²¡æ‰¾åˆ°çš„æƒ…å†µä¸‹è¿”å›-1","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"html5ç½‘é¡µå½•éŸ³å’Œè¯­éŸ³è¯†åˆ«","slug":"html5ç½‘é¡µå½•éŸ³å’Œè¯­éŸ³è¯†åˆ«","date":"2016-08-23T01:48:15.000Z","updated":"2021-09-27T07:27:40.440Z","comments":true,"path":"2016/08/23/html5ç½‘é¡µå½•éŸ³å’Œè¯­éŸ³è¯†åˆ«/","link":"","permalink":"https://www.silenceboy.com/2016/08/23/html5ç½‘é¡µå½•éŸ³å’Œè¯­éŸ³è¯†åˆ«/","excerpt":"","text":"#èƒŒæ™¯ åœ¨è¾“å…¥æ–¹å¼ä¸Šï¼Œäººä»¬æ€»æ˜¯åœ¨è¿½å¯»ä¸€ç§æ›´é«˜æ•ˆï¼Œé—¨æ§›æ›´ä½çš„æ–¹å¼ï¼Œæ¥é™ä½ç”¨æˆ·ä½¿ç”¨äº§å“çš„å­¦ä¹ æˆæœ¬ã€‚è¯­éŸ³è¾“å…¥ä¹Ÿæ˜¯ä¸€ç§å°è¯•è¾ƒå¤šçš„æ–¹å¼ï¼Œæœ‰äº›ç›´æ¥ä½¿ç”¨è¯­éŸ³ï¼ˆå¦‚å¾®ä¿¡è¯­éŸ³èŠå¤©ï¼‰ï¼Œæœ‰äº›éœ€è¦å°†è¯­éŸ³è½¬åŒ–ä¸ºæ–‡å­—ï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰ã€‚æ¥ä¸‹æ¥çš„å†…å®¹æ˜¯ä¸€æ¬¡åœ¨pcæµè§ˆå™¨ä¸Šè¿›è¡Œè¯­éŸ³è¯†åˆ«è¾“å…¥çš„ä¸€ç§å°è¯•ã€‚ ### å®ç° è°ƒç ”é˜¶æ®µï¼Œchromeæ˜¯æ”¯æŒè¯­éŸ³è¯†åˆ«çš„ã€‚å®ƒæ”¯æŒäº†ä¸€ç³»åˆ—çš„æ¥å£ï¼Œå¯ä»¥è¿›è¡Œè¯­éŸ³è¯†åˆ«ã€‚å‚è€ƒHTML5çš„Speech APIç›¸å…³æ ‡å‡†çš„ç°çŠ¶ä½†æ˜¯ä½¿ç”¨è¿™äº›æ¥å£æœ‰ä¸€äº›å›°éš¾ï¼Œè¿ä¸ä¸ŠæœåŠ¡å™¨ã€‚æ­¤è·¯ä¸é€šã€‚ é‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ç¬¨ç‚¹å„¿çš„æ–¹æ³•ï¼Œå…ˆå½•éŸ³å†ä¸Šä¼ åˆ°æŒ‡å®šè¯­éŸ³è¯†åˆ«æœåŠ¡å™¨ï¼Œè¿›è¡Œè¯­éŸ³è¯†åˆ«ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ç™¾åº¦è¯­éŸ³å¼€æ”¾å¹³å°çš„è¯­éŸ³è¯†åˆ«æ¥å£ï¼Œæ”¯æŒ8k,16kçš„å•å£°é“çš„wavæ–‡ä»¶ï¼Œæˆ–è€…pcmã€‚å°è¯•äº†8kçš„è¯†åˆ«æ•ˆæœï¼Œè·Ÿ16kçš„å·®äº†å¥½è¿œã€‚å°±ä½¿ç”¨äº†16k,å•å£°é“wavæ–‡ä»¶ï¼Œä¸Šä¼ åˆ°è¯­éŸ³è¯†åˆ«æœåŠ¡å™¨ã€‚ å…³äºå½•éŸ³ï¼Œä¸»è¦æ­¥éª¤å°±æ˜¯ä½¿ç”¨navigator.getUserMediaæ¥è·å–ç”¨æˆ·çš„è¾“å…¥è®¾å¤‡ï¼ŒæˆåŠŸä¹‹åä½¿ç”¨webkitAudioContextæ¥åˆ›å»ºéŸ³é¢‘å®ä¾‹ã€‚åœ¨å½•éŸ³ç»“æŸä¹‹åï¼Œå°†å½•éŸ³çš„æµå¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œä¸Šä¼ å³å¯ã€‚å½•éŸ³çš„å¯ä»¥å‚è€ƒè¿™ä¸ªrecorder.jsï¼Œåªè¦ç¨å¾®åšä¸€ä¸‹ä¿®æ”¹å°±å¯ä»¥åº”ç”¨ã€‚å…¶ä¸­éœ€è¦å¤„ç†éŸ³é¢‘é‡‡æ ·ç‡ï¼Œé»˜è®¤çš„é‡‡æ ·ç‡ä¸º44.1k,è¿™é‡Œéœ€è¦åšä¸€ä¸ªè½¬æ¢ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥å‚è€ƒHTML5ç½‘é¡µå½•éŸ³å’Œå‹ç¼©,è¾¹çŒœè¾¹åš åœ¨æµè§ˆå™¨æ‰©å±•ä¸­ï¼Œæ²¡æœ‰æ˜ç¡®çš„æ–¹å¼å»è·å–ç”¨æˆ·å¯¹å½•éŸ³çš„æˆæƒã€‚å¯ä»¥åœ¨æ‰©å±•çš„optionpageé‡Œé¢ç”³è¯·æˆæƒï¼Œä¹‹ååœ¨æ‰©å±•çš„æ‰€æœ‰é¡µé¢éƒ½æœ‰æƒé™äº†ã€‚åœ¨è¾ƒæ–°çš„chromeæµè§ˆå™¨é‡Œæµ‹è¿‡å¯ä»¥ç”¨ã€‚å‚è€ƒè¿™é‡Œï¼šHow do I give webkitGetUserMedia permission in a Chrome Extension popup window #demo è¿™é‡Œæœ‰ä¸€ä¸ªchromeæ‰©å±•çš„demoï¼Œå®ç°äº†é€šè¿‡è¯­éŸ³é‡‡æ ·ï¼Œç”Ÿæˆwavæ–‡ä»¶ä¸Šä¼ åˆ°è¯­éŸ³è¯†åˆ«æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚å…¶ä¸­åšäº†ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç«¯ç‚¹æ£€æµ‹ï¼Œé€šè¿‡éŸ³é‡çš„å¤§å°æ¥ç¡®å®šè¾“å…¥çš„å®Œæˆã€‚http://github.com/veizz/speech_ioä¸€äº›æ€è€ƒ demoå…¶å®æ˜¯ç”¨æ¥å‚ä¸å…¬å¸ä¸¾åŠçš„ä¸€å±Šhackathonæ¯”èµ›ï¼Œä¸»è¦å®ç°äº†è¯­éŸ³åœ¨çº¿è¯†åˆ«ï¼Œæ–‡å­—æ’­æŠ¥ç­‰åŠŸèƒ½ã€‚åœ¨åæœŸè¿˜æœ‰æƒ³æ³•åŠ å…¥äº†ä¸€äº›è‡ªç„¶è¯­éŸ³å¤„ç†çš„åŠŸèƒ½ï¼Œå¯ä»¥è¯†åˆ«ä¸€äº›è¾“å…¥æŒ‡ä»¤ã€‚å¦‚ã€æ‰“å¼€ç™¾åº¦é¦–é¡µã€ã€ã€ä¸Šæ·˜å®ä¹°è¡£æœã€ç­‰åŠŸèƒ½ã€‚ä¼šæ‰“å¼€æŒ‡å®šç½‘ç«™ï¼Œè‡ªåŠ¨å¡«å†™è¾“å…¥è¯ï¼Œæ‰§è¡Œæœç´¢ã€‚è¿˜å¯ä»¥åšä¸€äº›å°åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´è¯­éŸ³è¾“å…¥ã€æŸ¥è¯¢å¤©æ°”ã€ã€ã€ä¹°ç”µå½±ç¥¨ã€ç­‰å¸¸ç”¨åŠŸèƒ½ï¼Œåœ¨popupçš„çª—å£é‡Œé¢æ‰“å¼€ç­‰ã€‚ä¸€åˆ‡çš„æƒ³æ³•éƒ½çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†åœ¨å¤§å®¶éƒ½ç†Ÿæ‚‰äº†æ‰“å­—è¾“å…¥çš„ä»Šå¤©ï¼Œè¿˜æœ‰å¤šå°‘äººæ„¿æ„ä½¿ç”¨è¯­éŸ³è¯†åˆ«åšä¸ºè¾“å…¥æ–¹å¼ï¼Ÿè€Œå¯¹äºä¸ä¼šæ‰“å­—çš„äººï¼Œèƒ½å¦ä½¿ç”¨æ ‡å‡†çš„æ™®é€šè¯æ¥è¿›è¡Œè¯­éŸ³è¯†åˆ«çš„è¾“å…¥ï¼Ÿ é‡‡æ ·ç‡çš„å¤„ç†æ˜¯é€šè¿‡jsçš„æ–‡ä»¶æ“ä½œæ¥å®ç°çš„ã€‚html5æ”¯æŒçš„fileapiå¼ºå¤§å¦‚æ­¤ï¼Œæ€ªä¸å¾—æœ‰äººç”¨jsåšè§†é¢‘è§£ç å™¨ï¼Œä¸è€ƒè™‘æ€§èƒ½çš„è¯ï¼Œçœ‹èµ·æ¥å¾ˆç¾å¥½å•Š #å‚è€ƒ http://www.cnblogs.com/jz1108/archive/2012/05/21/2511447.htmlhttps://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.htmlhttp://codeartists.com/post/36746402258/how-to-record-audio-in-chrome-with-native-html5-apishttp://stackoverflow.com/questions/13076272/how-do-i-give-webkitgetusermedia-permission-in-a-chrome-extension-popup-windowhttp://www.cnblogs.com/blqw/p/3782420.htmlhttp://ibillxia.github.io/blog/2013/05/22/audio-signal-processing-time-domain-Voice-Activity-Detection/http://stackoverflow.com/questions/13333378/how-can-javascript-upload-a-blobhttp://www.web-tinker.com/article/20498.html","categories":[{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/categories/html5/"}],"tags":[{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/tags/html5/"},{"name":"å½•éŸ³","slug":"å½•éŸ³","permalink":"https://www.silenceboy.com/tags/å½•éŸ³/"},{"name":"è¯­è¨€è¯†åˆ«","slug":"è¯­è¨€è¯†åˆ«","permalink":"https://www.silenceboy.com/tags/è¯­è¨€è¯†åˆ«/"}]},{"title":"nodejsé€šè¿‡laterå®ç°å®šæ—¶æ‰§è¡Œä»»åŠ¡","slug":"nodejsé€šè¿‡laterå®ç°å®šæ—¶æ‰§è¡Œä»»åŠ¡","date":"2016-08-08T01:45:57.000Z","updated":"2021-09-27T07:27:40.444Z","comments":true,"path":"2016/08/08/nodejsé€šè¿‡laterå®ç°å®šæ—¶æ‰§è¡Œä»»åŠ¡/","link":"","permalink":"https://www.silenceboy.com/2016/08/08/nodejsé€šè¿‡laterå®ç°å®šæ—¶æ‰§è¡Œä»»åŠ¡/","excerpt":"","text":"å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬éƒ½é€‰ç”¨ä½¿ç”¨Linuxçš„cronæ¥æ§åˆ¶å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚å½“æˆ‘ä»¬è¦ç»´æŠ¤å¤šå°è®¡ç®—æœºï¼Œå‡ åä¸ªï¼Œå‡ ç™¾ä¸ªå®šæ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œç”¨cronä¼šå¸¦æ¥éå¸¸å¤§çš„è¿ç»´æˆæœ¬ã€‚å¯èƒ½å†™åˆ°ç¨‹åºä¸­ï¼Œå°±æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©äº†ã€‚nodejsæœ‰ä¸€ä¸ªlaterçš„æ’ä»¶å¯ä»¥ç®€å•å®ç°è¯¥åŠŸèƒ½ã€‚å¦‚æœå·²ç»å®‰è£…è¿‡npmï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œnpm install laterå®‰è£…è¯¥æ’ä»¶ã€‚å¦‚æœæ²¡æœ‰è¯·å…ˆå®‰è£…npmã€‚ 12345678910111213141516var later = require(&apos;later&apos;);var basic = &#123;h:[00],m:[00]&#125;; //è®¾ç½®æ¯å¤©å‡Œæ™¨æ‰§è¡Œvar composite=[ basic];var sched=&#123; schedules:composite&#125;;later.date.localTime(); //è®¾ç½®æœ¬åœ°æ—¶åŒº//var occurrences = later.schedule(sched).next(10);//for(var i=0;i&lt;10;i++)&#123;// console.log(occurrences[i]);//&#125;var t=later.setInterval(function()&#123; console.log(&quot;asdasd&quot;);&#125;,sched); å¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ›´æ”¹ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"MySQLæŸ¥è¯¢è¡¨å†…é‡å¤è®°å½•","slug":"MySQLæŸ¥è¯¢è¡¨å†…é‡å¤è®°å½•","date":"2016-08-04T02:02:52.000Z","updated":"2021-09-27T07:27:40.437Z","comments":true,"path":"2016/08/04/MySQLæŸ¥è¯¢è¡¨å†…é‡å¤è®°å½•/","link":"","permalink":"https://www.silenceboy.com/2016/08/04/MySQLæŸ¥è¯¢è¡¨å†…é‡å¤è®°å½•/","excerpt":"","text":"1ã€æŸ¥æ‰¾è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼Œé‡å¤è®°å½•æ˜¯æ ¹æ®å•ä¸ªå­—æ®µï¼ˆuser_idï¼‰æ¥åˆ¤æ–­ 1select * from tbl_user where user_id in (select user_id from people group by user_id having count(user_id) &gt; 1) 2ã€åˆ é™¤è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼Œé‡å¤è®°å½•æ˜¯æ ¹æ®å•ä¸ªå­—æ®µï¼ˆuser_idï¼‰æ¥åˆ¤æ–­ï¼Œåªç•™æœ‰ä¸€ä¸ªè®°å½• 1delete from tbl_user where user_id in (select user_id from people group by user_id having count(user_id) &gt; 1) and min(id) not in (select id from people group by user_id having count(user_id)&gt;1) 3ã€æŸ¥æ‰¾è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼ˆå¤šä¸ªå­—æ®µï¼‰ 1select * from table where (user_id,lesson_id) in (select user_id,lesson_id from table group by user_id,lesson_id having count(*) &gt; 1) 4ã€åˆ é™¤è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼ˆå¤šä¸ªå­—æ®µï¼‰ï¼Œåªç•™æœ‰idæœ€å°çš„è®°å½• 1delete from table where (user_id,lesson_id) in (select user_id,lesson_id from table group by user_id,lesson_id having count(*) &gt; 1) and id not in (select min(id) from table group by user_id,lesson_id having count(*)&gt;1) 5ã€æŸ¥æ‰¾è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼ˆå¤šä¸ªå­—æ®µï¼‰ï¼Œä¸åŒ…å«idæœ€å°çš„è®°å½• 1select * from table where (user_id,lesson_id) in (select user_id,lesson_id from table group by user_id,lesson_id having count(*) &gt; 1) and id not in (select min(id) from table group by user_id,lesson_id having count(*)&gt;1)","categories":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"}]},{"title":"æœåŠ¡å™¨æ—¶åŒºé—®é¢˜","slug":"æœåŠ¡å™¨æ—¶åŒºé—®é¢˜","date":"2016-08-04T01:42:46.000Z","updated":"2021-09-27T07:27:40.448Z","comments":true,"path":"2016/08/04/æœåŠ¡å™¨æ—¶åŒºé—®é¢˜/","link":"","permalink":"https://www.silenceboy.com/2016/08/04/æœåŠ¡å™¨æ—¶åŒºé—®é¢˜/","excerpt":"","text":"è¿›å…¥æµ‹è¯•å‘ç°å¯¹åº”çš„æ—¶é—´ä¸å¯¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æœåŠ¡å™¨çš„æ—¶é—´ï¼Œå‘ç°æœåŠ¡å™¨çš„æ—¶åŒºä¸ºä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼Œç®€ç§°UTCä¸å±äºä»»æ„æ—¶åŒºï¼ŒUTCæ—¶åŒºé»˜è®¤æ¯”åŒ—äº¬æ—¶é—´å°‘8ä¸ªå°æ—¶ã€‚æŸ¥çœ‹æœåŠ¡å™¨æ—¶é—´ï¼š è¿™æ˜¯æœåŠ¡å™¨ä¸Šçš„æ—¶åŒºã€‚ä¸­å›½çš„æ—¶åŒºåº”è¯¥ä¸ºCSTã€‚é‚£ä¹ˆå¦‚ä½•ä¿®æ”¹æœåŠ¡å™¨æ—¶åŒºä¸ºä¸­å›½æ—¶åŒºå‘ï¼Œå¾ˆç®€å•ã€‚ 1cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œä¹‹åå†æŸ¥çœ‹æ—¶é—´ï¼š ç°åœ¨çš„æ—¶é—´å³ä¸ºæ­£ç¡®çš„ä¸­å›½æ—¶é—´ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"}]},{"title":"JavaScriptè·å–æ—¶é—´æˆ³ä¸æ—¶é—´æˆ³è½¬åŒ–","slug":"JavaScriptè·å–æ—¶é—´æˆ³ä¸æ—¶é—´æˆ³è½¬åŒ–","date":"2016-08-03T01:57:19.000Z","updated":"2021-09-27T07:27:40.436Z","comments":true,"path":"2016/08/03/JavaScriptè·å–æ—¶é—´æˆ³ä¸æ—¶é—´æˆ³è½¬åŒ–/","link":"","permalink":"https://www.silenceboy.com/2016/08/03/JavaScriptè·å–æ—¶é—´æˆ³ä¸æ—¶é—´æˆ³è½¬åŒ–/","excerpt":"","text":"Javascript è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆæ¯«ç§’çº§åˆ«ï¼‰ï¼š ç¬¬ä¸€ç§æ–¹æ³•ï¼š 1var timestamp1 = Date.parse( new Date()); ç»“æœï¼š1470220594000 ç¬¬äºŒç§æ–¹æ³•ï¼š 1var timestamp2 = ( new Date()).valueOf(); ç»“æœï¼š1470220608533 ç¬¬ä¸‰ç§æ–¹æ³•ï¼š 1var timestamp3 = new Date().getTime(); ç»“æœï¼š1470220608533 ç¬¬ä¸€ç§è·å–çš„æ—¶é—´æˆ³æ˜¯ç²¾ç¡®åˆ°ç§’ï¼Œç¬¬äºŒç§å’Œç¬¬ä¸‰ç§æ˜¯è·å–çš„æ—¶é—´æˆ³ç²¾ç¡®åˆ°æ¯«ç§’ã€‚ è·å–æŒ‡å®šæ—¶é—´çš„æ—¶é—´æˆ³ï¼š1new Date(&quot;2016-08-03 00:00:00&quot;).getTime; æ—¶é—´æˆ³è½¬åŒ–æˆæ—¶é—´ï¼š12345678910function timetrans(date)&#123; var date = new Date(date*1000);//å¦‚æœdateä¸º13ä½ä¸éœ€è¦ä¹˜1000 var Y = date.getFullYear() + &apos;-&apos;; var M = (date.getMonth()+1 &lt; 10 ? &apos;0&apos;+(date.getMonth()+1) : date.getMonth()+1) + &apos;-&apos;; var D = (date.getDate() &lt; 10 ? &apos;0&apos; + (date.getDate()) : date.getDate()) + &apos; &apos;; var h = (date.getHours() &lt; 10 ? &apos;0&apos; + date.getHours() : date.getHours()) + &apos;:&apos;; var m = (date.getMinutes() &lt;10 ? &apos;0&apos; + date.getMinutes() : date.getMinutes()) + &apos;:&apos;; var s = (date.getSeconds() &lt;10 ? &apos;0&apos; + date.getSeconds() : date.getSeconds()); return Y+M+D+h+m+s;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"jsåˆ©ç”¨clipboardDataåœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½","slug":"jsåˆ©ç”¨clipboardDataåœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½","date":"2016-07-23T01:54:44.000Z","updated":"2021-09-27T07:27:40.441Z","comments":true,"path":"2016/07/23/jsåˆ©ç”¨clipboardDataåœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½/","link":"","permalink":"https://www.silenceboy.com/2016/07/23/jsåˆ©ç”¨clipboardDataåœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½/","excerpt":"","text":"æœ€è¿‘åœ¨åšä¸€ä¸ªå°†å±å¹•æˆªå›¾ç›´æ¥ç²˜è´´å‘é€çš„åŠŸèƒ½ï¼Œäºæ˜¯å¯¹æ­¤åšäº†ä¸€äº›ç ”ç©¶ï¼Œä¸‹é¢æ˜¯å…·ä½“çš„å®ç°ä»£ç ï¼šhtmlä»£ç å¦‚ä¸‹ï¼Œåœ¨è¿™é‡Œåªæ˜¯ç®€å•çš„åšäº†ä¸€ä¸ªtextareæ¡†ç”¨ä½œæ¼”ç¤º 123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt; &lt;title&gt;æˆªå±ç²˜è´´&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;textarea onpaste =&quot;paste()&quot;&gt; &lt;/textarea&gt;&lt;/body&gt;&lt;/html&gt; å…·ä½“å®ç°åœ¨JavaScriptä¸­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546function paste(event)&#123; var clipboardData = event.clipboardData; console.log(clipboardData); var items,item,types; if( clipboardData )&#123; items = clipboardData.items; if( !items )&#123; return; &#125; // ä¿å­˜åœ¨å‰ªè´´æ¿ä¸­çš„æ•°æ®ç±»å‹ types = clipboardData.types || []; for(var i=0 ; i &lt; types.length; i++ )&#123; if( types[i] === &apos;Files&apos; )&#123; item = items[i]; break; &#125; &#125; // åˆ¤æ–­æ˜¯å¦ä¸ºå›¾ç‰‡æ•°æ® if( item &amp;&amp; item.kind === &apos;file&apos; &amp;&amp; item.type.match(/^image\\//i) )&#123; // è¯»å–è¯¥å›¾ç‰‡ var file = item.getAsFile(), reader = new FileReader(); reader.readAsDataURL(file); console.log(reader); //ä¸‹é¢æ˜¯è®²ç²˜è´´çš„å›¾ç‰‡å†…å®¹ä¼ é€åˆ°åç«¯è¿›è¡Œå¤„ç†ï¼Œå¦‚æœç›´æ¥å‰ç«¯å¤„ç†å¯ä»¥ä¸è¦åè¾¹çš„ä»£ç  var xhr = new XMLHttpRequest(); xhr.open(&apos;post&apos;, &apos;/pasteImage&apos;,true); xhr.setRequestHeader(&apos;Content-Type&apos;, &apos;application/json&apos;); reader.onload = function()&#123; console.log(reader.result); xhr.send(JSON.stringify(&#123; file: reader.result &#125;)); &#125;; //æ¥æ”¶è¿”å›æ•°æ® xhr.onload = function()&#123; var response = JSON.parse(xhr.responseText); if(response.code == 200)&#123; // &#125;else&#123; // &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"JSON.stringify å‡½æ•°å‚æ•°åˆ†æ","slug":"JSON-stringify-å‡½æ•°å‚æ•°åˆ†æ","date":"2016-07-16T01:50:57.000Z","updated":"2021-09-27T07:27:40.435Z","comments":true,"path":"2016/07/16/JSON-stringify-å‡½æ•°å‚æ•°åˆ†æ/","link":"","permalink":"https://www.silenceboy.com/2016/07/16/JSON-stringify-å‡½æ•°å‚æ•°åˆ†æ/","excerpt":"","text":"JSON.stringifyæ˜¯å°† JavaScript å€¼è½¬æ¢ä¸º JavaScript å¯¹è±¡è¡¨ç¤ºæ³• ã€‚è¯­æ³•ä¸ºï¼šJSON.stringify(value [, replacer] [, space])å¾ˆå¤šäººéƒ½åªä¼šç”¨åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šäººä¸çŸ¥é“åä¸¤ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸‹é¢å¯¹ä¸‰ä¸ªå‚æ•°è¿›è¡Œåˆ†æï¼š valueå¿…éœ€ã€‚ è¦è½¬æ¢çš„ JavaScript å€¼ï¼ˆé€šå¸¸ä¸ºå¯¹è±¡æˆ–æ•°ç»„ï¼‰ã€‚ replacerå¯é€‰ã€‚ ç”¨äºè½¬æ¢ç»“æœçš„å‡½æ•°æˆ–æ•°ç»„ã€‚å¦‚æœ replacer ä¸ºå‡½æ•°ï¼Œåˆ™ JSON.stringify å°†è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¼ å…¥æ¯ä¸ªæˆå‘˜çš„é”®å’Œå€¼ã€‚ ä½¿ç”¨è¿”å›å€¼è€Œä¸æ˜¯åŸå§‹å€¼ã€‚ å¦‚æœæ­¤å‡½æ•°è¿”å› undefinedï¼Œåˆ™æ’é™¤æˆå‘˜ã€‚ æ ¹å¯¹è±¡çš„é”®æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼šâ€â€ã€‚å¦‚æœ replacer æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™ä»…è½¬æ¢è¯¥æ•°ç»„ä¸­å…·æœ‰é”®å€¼çš„æˆå‘˜ã€‚ æˆå‘˜çš„è½¬æ¢é¡ºåºä¸é”®åœ¨æ•°ç»„ä¸­çš„é¡ºåºä¸€æ ·ã€‚ å½“ value å‚æ•°ä¹Ÿä¸ºæ•°ç»„æ—¶ï¼Œå°†å¿½ç•¥ replacer æ•°ç»„ã€‚ spaceå¯é€‰ã€‚ å‘è¿”å›å€¼ JSON æ–‡æœ¬æ·»åŠ ç¼©è¿›ã€ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä»¥ä½¿å…¶æ›´æ˜“äºè¯»å–ã€‚å¦‚æœçœç•¥ spaceï¼Œåˆ™å°†ç”Ÿæˆè¿”å›å€¼æ–‡æœ¬ï¼Œè€Œæ²¡æœ‰ä»»ä½•é¢å¤–ç©ºæ ¼ã€‚å¦‚æœ space æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œåˆ™è¿”å›å€¼æ–‡æœ¬åœ¨æ¯ä¸ªçº§åˆ«ç¼©è¿›æŒ‡å®šæ•°ç›®çš„ç©ºæ ¼ã€‚ å¦‚æœ space å¤§äº 10ï¼Œåˆ™æ–‡æœ¬ç¼©è¿› 10 ä¸ªç©ºæ ¼ã€‚å¦‚æœ space æ˜¯ä¸€ä¸ªéç©ºå­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚â€œtâ€ï¼‰ï¼Œåˆ™è¿”å›å€¼æ–‡æœ¬åœ¨æ¯ä¸ªçº§åˆ«ä¸­ç¼©è¿›å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœ space æ˜¯é•¿åº¦å¤§äº 10 ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œåˆ™ä½¿ç”¨å‰ 10 ä¸ªå­—ç¬¦ã€‚","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"nodejsè¯»å†™excelå†…å®¹","slug":"nodejsè¯»å†™excelå†…å®¹","date":"2016-07-16T01:47:27.000Z","updated":"2021-09-27T07:27:40.443Z","comments":true,"path":"2016/07/16/nodejsè¯»å†™excelå†…å®¹/","link":"","permalink":"https://www.silenceboy.com/2016/07/16/nodejsè¯»å†™excelå†…å®¹/","excerpt":"","text":"æ”¯æŒè¯»å†™Excelçš„node.jsæ¨¡å— node-xlsx: åŸºäºNode.jsè§£æexcelæ–‡ä»¶æ•°æ®åŠç”Ÿæˆexcelæ–‡ä»¶ï¼Œä»…æ”¯æŒxlsxæ ¼å¼æ–‡ä»¶ï¼› excel-parser: åŸºäºNode.jsè§£æexcelæ–‡ä»¶æ•°æ®ï¼Œæ”¯æŒxlsåŠxlsxæ ¼å¼æ–‡ä»¶ï¼› excel-export : åŸºäºNode.jså°†æ•°æ®ç”Ÿæˆå¯¼å‡ºexcelæ–‡ä»¶ï¼Œç”Ÿæˆæ–‡ä»¶æ ¼å¼ä¸ºxlsxï¼› node-xlrd: åŸºäºnode.jsä»excelæ–‡ä»¶ä¸­æå–æ•°æ®ï¼Œä»…æ”¯æŒxlsæ ¼å¼æ–‡ä»¶ã€‚ æˆ‘å°†å±•ç¤ºé€šè¿‡node-xlsxæå–ä¸Šä¼ ä¸Šæ¥çš„excelæ–‡ä»¶é‡Œçš„æ•°æ®ï¼Œä»¥åŠç”Ÿæˆæ–°çš„excelæ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425var xlsx = require(&apos;node-xlsx&apos;);var fs = require(&apos;fs&apos;);//è¯»å–æ–‡ä»¶å†…å®¹var obj = xlsx.parse(__dirname+&apos;/test.xlsx&apos;);var excelObj=obj[0].data;console.log(excelObj);var data = [];for(var i in excelObj)&#123; var arr=[]; var value=excelObj[i]; for(var j in value)&#123; arr.push(value[j]); &#125; data.push(arr);&#125;var buffer = xlsx.build([ &#123; name:&apos;sheet1&apos;, data:data &#125; ]);//å°†æ–‡ä»¶å†…å®¹æ’å…¥æ–°çš„æ–‡ä»¶ä¸­fs.writeFileSync(&apos;test1.xlsx&apos;,buffer,&#123;&apos;flag&apos;:&apos;w&apos;&#125;);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"excel","slug":"excel","permalink":"https://www.silenceboy.com/tags/excel/"}]},{"title":"webèŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥é—®é¢˜","slug":"webèŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥é—®é¢˜","date":"2016-07-06T06:42:58.000Z","updated":"2021-09-27T07:27:40.445Z","comments":true,"path":"2016/07/06/webèŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥é—®é¢˜/","link":"","permalink":"https://www.silenceboy.com/2016/07/06/webèŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥é—®é¢˜/","excerpt":"","text":"webæ¶ˆæ¯æç¤ºæ— éä¸‰ç§æ–¹å¼ï¼šå£°éŸ³æç¤ºï¼Œæ¡Œé¢å¼¹çª—å’Œtitleé—ªçƒæé†’ã€‚ä¸‹é¢åšä¸€ä¸€ä»‹ç»ã€‚ å£°éŸ³æç¤ºæ³¨æ„å£°éŸ³æç¤ºå‰æç¤ºå·²ç»åŠ è½½äº†å£°éŸ³æ–‡ä»¶ï¼Œæœ‰æ–‡ç« å†™çš„å¾ˆå¤šæ˜¯ä¸´æ—¶createä¸€ä¸ªaudioå¯¹è±¡ï¼Œç„¶åaudio.src,è¿™æ ·åšæ˜¯éå¸¸ä¸å¥½çš„ï¼Œå› ä¸ºä½ æ¯æ¬¡è°ƒç”¨å£°éŸ³çš„æ—¶å€™éƒ½ä¼šå»åå°è¯·æ±‚ä¸€ä¸‹è¿™ä¸ªå£°éŸ³æ–‡ä»¶ã€‚æ‰€ä»¥å…ˆåŠ è½½å‡ºæ¥æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚ &lt;audio id=&quot;chat-audio&quot; src=&quot;audio/system.wav&quot; display=&quot;none&quot;&gt;&lt;/audio&gt; function playAudio() { document.getElementById(&apos;chat-audio&apos;).play(); //pause()æ–¹æ³•ä¹Ÿå¯ä»¥æš‚åœï¼Œå…·ä½“å¯æŸ¥html5çš„audioæ ‡ç­¾ } //è°ƒç”¨æ–¹å¼ playAudio(); æ¡Œé¢å¼¹çª—function palyDeskNotice(theTitle, options) { if (Notification.permission !== &quot;granted&quot;) { //å…ˆåˆ¤æ–­ä¸€ä¸‹ç”¨æˆ·æ˜¯å¦å·²ç»å¼€å¯äº†æ¡Œé¢æç¤ºçš„æƒé™ï¼Œå¦‚æœæ²¡æœ‰åˆ™æé†’ç”¨æˆ·å¼€å¯ window.Notification.requestPermission(function(permission) { if (permission === &quot;granted&quot;) showNotice(theTitle, options); }); } else { showNotice(theTitle, options); } } function showNotice(theTitle, options) { //è¿™ä¸ªå°±æ˜¯æ¡Œé¢å¼¹çª— var desknotice = new Notification(theTitle, options); desknotice.onclick = function() { //å½“ç”¨æˆ·ç‚¹å‡»å¼¹çª—çš„æ—¶å€™ï¼Œè¦å®šä½åˆ°èŠå¤©çª—å£ window.focus(); desknotice.close(); }; //é¡µé¢é€€å‡ºæ—¶å…³é—­æé†’ window.onbeforeunload = function() { desknotice.close(); } //å¼¹çª—3ç§’åè‡ªåŠ¨æ¶ˆå¤± setTimeout(desknotice.close.bind(desknotice), 3000); } //è°ƒç”¨æ–¹å¼ palyDeskNotice(&apos;æ¥è‡ªxxx&apos;, { body: &apos;å†…å®¹&apos;, icon: &quot;images/xxx.jpg&quot; }); titleé—ªçƒæé†’çš„åŸç†var NewMsgNoticeflag = false,//é—ªçƒæ ‡è¯† newMsgNotinceTimer = null; function newMsgCount() { if (NewMsgNoticeflag) { NewMsgNoticeflag = false; document.title = &apos;ã€â˜æ–°æ¶ˆæ¯ã€‘æ‚¨æœ‰æ–°çš„å³æ—¶æ¶ˆæ¯&apos;; } else { NewMsgNoticeflag = true; document.title = &apos;ã€ ã€‘æ‚¨æœ‰æ–°çš„å³æ—¶æ¶ˆæ¯&apos;; } } //å…¼å®¹æ€§ var hiddenProperty = &apos;hidden&apos; in document ? &apos;hidden&apos; : &apos;webkitHidden&apos; in document ? &apos;webkitHidden&apos; : &apos;mozHidden&apos; in document ? &apos;mozHidden&apos; : null; var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, &apos;visibilitychange&apos;); var onVisibilityChange = function() { if (!document[hiddenProperty]) { clearInterval(newMsgNotinceTimer); newMsgNotinceTimer = null; document.title = &apos;beta-å³æ—¶æ¶ˆæ¯ç³»ç»Ÿ&apos;; //çª—å£æ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™é»˜è®¤çš„titleå†…å®¹ } } document.addEventListener(visibilityChangeEvent, onVisibilityChange); //è°ƒç”¨æ–¹å¼ if (!newMsgNotinceTimer) newMsgNotinceTimer = setInterval(&quot;newMsgCount()&quot;, 200);","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"JavaScriptè®©æ—¶é—´æ˜¾ç¤ºä¸ºå¤šä¹…ä»¥å‰","slug":"JavaScriptè®©æ—¶é—´æ˜¾ç¤ºä¸ºå¤šä¹…ä»¥å‰","date":"2016-06-02T06:41:28.000Z","updated":"2021-09-27T07:27:40.437Z","comments":true,"path":"2016/06/02/JavaScriptè®©æ—¶é—´æ˜¾ç¤ºä¸ºå¤šä¹…ä»¥å‰/","link":"","permalink":"https://www.silenceboy.com/2016/06/02/JavaScriptè®©æ—¶é—´æ˜¾ç¤ºä¸ºå¤šä¹…ä»¥å‰/","excerpt":"","text":"åœ¨åšè®ºå›çš„åŠŸèƒ½æ—¶ï¼Œè¦æ±‚å¸–å­çš„å‘å¸–æ—¶é—´æ˜¾ç¤ºå‡ ç§’å‰ï¼Œå‡ åˆ†é’Ÿå‰ï¼Œå‡ å°æ—¶å‰ã€‚ã€‚ã€‚è¿™ç§åŠŸèƒ½ï¼Œäºæ˜¯å°±æŠŠè·å–åˆ°çš„å‘å¸–æ—¶é—´åšäº†å¦‚ä¸‹å¤„ç†ï¼š 12345678910111213141516171819function gettime(createtime)&#123; var now=Date.parse(new Date())/1000; var limit=now-createtime; var content=&quot;&quot;; if(limit&lt;60)&#123; content=&quot;åˆšåˆš&quot;; &#125;else if(limit&gt;=60 &amp;&amp; limit&lt;3600)&#123; content=Math.floor(limit/60)+&quot;åˆ†é’Ÿå‰&quot;; &#125;else if(limit&gt;=3600 &amp;&amp; limit&lt;86400)&#123; content=Math.floor(limit/3600)+&quot;å°æ—¶å‰&quot;; &#125;else if(limit&gt;=86400 &amp;&amp; limit&lt;2592000)&#123; content=Math.floor(limit/86400)+&quot;å¤©å‰&quot;; &#125;else if(limit&gt;=2592000 &amp;&amp; limit&lt;31104000)&#123; content=Math.floor(limit/2592000)+&quot;ä¸ªæœˆå‰&quot;; &#125;else&#123; content=&quot;å¾ˆä¹…å‰&quot;; &#125; return content;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"expresså¦‚ä½•è§£å†³request entity too largeé—®é¢˜","slug":"expresså¦‚ä½•è§£å†³request-entity-too-largeé—®é¢˜","date":"2016-05-30T03:21:33.000Z","updated":"2021-09-27T07:27:40.439Z","comments":true,"path":"2016/05/30/expresså¦‚ä½•è§£å†³request-entity-too-largeé—®é¢˜/","link":"","permalink":"https://www.silenceboy.com/2016/05/30/expresså¦‚ä½•è§£å†³request-entity-too-largeé—®é¢˜/","excerpt":"","text":"é€šè¿‡jså‘åå°postä¸€äº›æ–‡ä»¶ä¿¡æ¯æ—¶ï¼Œä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é”™è¯¯ã€‚è¿™æ˜¯expressæ¡†æ¶çš„é—®é¢˜ï¼Œé»˜è®¤çš„å¾ˆå°ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ï¼šapp.use(express.json({limit: â€˜5mbâ€™}));è§£å†³è¯¥é—®é¢˜ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"Nodejsæ¥æ”¶å›¾ç‰‡base64æ ¼å¼ä¿å­˜ä¸ºæ–‡ä»¶","slug":"Nodejsæ¥æ”¶å›¾ç‰‡base64æ ¼å¼ä¿å­˜ä¸ºæ–‡ä»¶","date":"2016-05-27T03:19:30.000Z","updated":"2021-09-27T07:27:40.437Z","comments":true,"path":"2016/05/27/Nodejsæ¥æ”¶å›¾ç‰‡base64æ ¼å¼ä¿å­˜ä¸ºæ–‡ä»¶/","link":"","permalink":"https://www.silenceboy.com/2016/05/27/Nodejsæ¥æ”¶å›¾ç‰‡base64æ ¼å¼ä¿å­˜ä¸ºæ–‡ä»¶/","excerpt":"","text":"base64çš„å½¢å¼ä¸ºâ€œdata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0ã€‚ã€‚ã€‚ã€‚â€ï¼›å½“æ¥æ”¶åˆ°ä¸Šè¾¹çš„å†…å®¹åï¼Œéœ€è¦å°†data:image/png;base64,è¿™æ®µå†…å®¹è¿‡æ»¤æ‰ï¼Œè¿‡æ»¤æˆï¼šâ€œiVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0ã€‚ã€‚ã€‚â€ï¼›ç„¶åè¿›è¡Œä¿å­˜ã€‚ 1234567891011121314app.post(&apos;/upload&apos;, function(req, res)&#123; //æ¥æ”¶å‰å°POSTè¿‡æ¥çš„base64 var imgData = req.body.imgData; //è¿‡æ»¤data:URL var base64Data = imgData.replace(/^data:image\\/\\w+;base64,/, &quot;&quot;); var dataBuffer = new Buffer(base64Data, &apos;base64&apos;); fs.writeFile(&quot;image.png&quot;, dataBuffer, function(err) &#123; if(err)&#123; res.send(err); &#125;else&#123; res.send(&quot;ä¿å­˜æˆåŠŸï¼&quot;); &#125; &#125;);&#125;);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"base64","slug":"base64","permalink":"https://www.silenceboy.com/tags/base64/"}]},{"title":"javascriptåœ¨ç½‘é¡µä¸­å®ç°ç²˜è´´qqæˆªå›¾åŠŸèƒ½","slug":"javascriptåœ¨ç½‘é¡µä¸­å®ç°ç²˜è´´qqæˆªå›¾åŠŸèƒ½","date":"2016-05-27T01:41:34.000Z","updated":"2021-09-27T07:27:40.441Z","comments":true,"path":"2016/05/27/javascriptåœ¨ç½‘é¡µä¸­å®ç°ç²˜è´´qqæˆªå›¾åŠŸèƒ½/","link":"","permalink":"https://www.silenceboy.com/2016/05/27/javascriptåœ¨ç½‘é¡µä¸­å®ç°ç²˜è´´qqæˆªå›¾åŠŸèƒ½/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†åœ¨ç½‘é¡µä¸­å®ç°è¯»å–å‰ªè´´æ¿ç²˜è´´æˆªå›¾åŠŸèƒ½,å³å¯ä»¥æŠŠå‰ªè´´æ¿çš„æˆªå›¾Ctrl+Vç²˜è´´åˆ°ç½‘é¡µçš„ä¸€ä¸ªè¾“å…¥æ¡†ä¸­,ä¾‹å¦‚QQæˆªå›¾ã€æ—ºæ—ºæˆªå›¾æˆ–è€…å…¶å®ƒæˆªå›¾è½¯ä»¶ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;!DOCTYPE HTML&gt;&lt;html lang=&quot;en-US&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;åˆ©ç”¨ clipboardData åœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;#box&#123; width:200px; height:200px; border:1px solid #ddd; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;åˆ©ç”¨ clipboardData åœ¨ç½‘é¡µä¸­å®ç°æˆªå±ç²˜è´´çš„åŠŸèƒ½&lt;/h1&gt; &lt;hr /&gt;&lt;div&gt;&lt;input type=&quot;text&quot; id=&quot;testInput&quot; placeholder=&quot;æˆªå±åç²˜è´´åˆ°è¾“å…¥æ¡†ä¸­&quot; size=&quot;30&quot; /&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;(function()&#123; var imgReader = function( item )&#123; var blob = item.getAsFile(), reader = new FileReader(); // è¯»å–æ–‡ä»¶åå°†å…¶æ˜¾ç¤ºåœ¨ç½‘é¡µä¸­ reader.onload = function( e )&#123; var img = new Image(); img.src = e.target.result; document.body.appendChild( img ); &#125;; // è¯»å–æ–‡ä»¶ reader.readAsDataURL( blob ); &#125;; document.getElementById( &apos;testInput&apos; ).addEventListener( &apos;paste&apos;, function( e )&#123; // æ·»åŠ åˆ°äº‹ä»¶å¯¹è±¡ä¸­çš„è®¿é—®ç³»ç»Ÿå‰ªè´´æ¿çš„æ¥å£ var clipboardData = e.clipboardData, i = 0, items, item, types; if( clipboardData )&#123; items = clipboardData.items; if( !items )&#123; return; &#125; item = items[0]; // ä¿å­˜åœ¨å‰ªè´´æ¿ä¸­çš„æ•°æ®ç±»å‹ types = clipboardData.types || []; for( ; i &lt; types.length; i++ )&#123; if( types[i] === &apos;Files&apos; )&#123; item = items[i]; break; &#125; &#125; // åˆ¤æ–­æ˜¯å¦ä¸ºå›¾ç‰‡æ•°æ® if( item &amp;&amp; item.kind === &apos;file&apos; &amp;&amp; item.type.match(/^image\\//i) )&#123; imgReader( item ); &#125; &#125; &#125;);&#125;)(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"}]},{"title":"jsè·å–å†…å®¹ä¸­çš„urlé“¾æ¥ï¼Œå¹¶è®¾ç½®aæ ‡ç­¾","slug":"jsè·å–å†…å®¹ä¸­çš„urlé“¾æ¥ï¼Œå¹¶è®¾ç½®aæ ‡ç­¾","date":"2016-05-24T01:39:27.000Z","updated":"2021-09-27T07:27:40.442Z","comments":true,"path":"2016/05/24/jsè·å–å†…å®¹ä¸­çš„urlé“¾æ¥ï¼Œå¹¶è®¾ç½®aæ ‡ç­¾/","link":"","permalink":"https://www.silenceboy.com/2016/05/24/jsè·å–å†…å®¹ä¸­çš„urlé“¾æ¥ï¼Œå¹¶è®¾ç½®aæ ‡ç­¾/","excerpt":"","text":"12345var regexp = /(http:\\/\\/|https:\\/\\/)((\\w|=|\\?|\\.|\\/|\\&amp;|-)+)/g;content = content.replace(regexp, function($url)&#123; return &quot;&lt;a href=&apos;&quot; + $url + &quot;&apos; target=&apos;_blank&apos;&gt;&quot; + $url + &quot;&lt;/a&gt;&quot;;&#125;);console.log(content);","categories":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://www.silenceboy.com/tags/æ­£åˆ™è¡¨è¾¾å¼/"}]},{"title":"vi/vimå¤šè¡Œæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Š","slug":"vi-vimå¤šè¡Œæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Š","date":"2016-05-21T01:37:05.000Z","updated":"2021-09-27T07:27:40.445Z","comments":true,"path":"2016/05/21/vi-vimå¤šè¡Œæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Š/","link":"","permalink":"https://www.silenceboy.com/2016/05/21/vi-vimå¤šè¡Œæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Š/","excerpt":"","text":"å¤šè¡Œæ³¨é‡Šï¼š è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼ŒæŒ‰ctrl + vè¿›å…¥ visual blockæ¨¡å¼ï¼ˆå¯è§†å¿«æ¨¡å¼ï¼‰ï¼Œç„¶åæŒ‰j, æˆ–è€…ké€‰ä¸­å¤šè¡Œï¼ŒæŠŠéœ€è¦æ³¨é‡Šçš„è¡Œæ ‡è®°èµ·æ¥ æŒ‰å¤§å†™å­—æ¯Iï¼Œå†æ’å…¥æ³¨é‡Šç¬¦ï¼Œä¾‹å¦‚// æŒ‰escé”®å°±ä¼šå…¨éƒ¨æ³¨é‡Šäº†ï¼ˆæˆ‘çš„æ˜¯æŒ‰ä¸¤ä¸‹ï¼‰ å–æ¶ˆå¤šè¡Œæ³¨é‡Šï¼š è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼ŒæŒ‰ctrl + vè¿›å…¥ visual blockæ¨¡å¼ï¼ˆå¯è§†å¿«æ¨¡å¼ï¼‰ï¼ŒæŒ‰å°å†™å­—æ¯læ¨ªå‘é€‰ä¸­åˆ—çš„ä¸ªæ•°ï¼Œä¾‹å¦‚ // éœ€è¦é€‰ä¸­2åˆ— æŒ‰å­—æ¯jï¼Œæˆ–è€…ké€‰ä¸­æ³¨é‡Šç¬¦å· æŒ‰dé”®å°±å¯å…¨éƒ¨å–æ¶ˆæ³¨é‡Š","categories":[{"name":"vim","slug":"vim","permalink":"https://www.silenceboy.com/categories/vim/"}],"tags":[{"name":"vim","slug":"vim","permalink":"https://www.silenceboy.com/tags/vim/"},{"name":"vi","slug":"vi","permalink":"https://www.silenceboy.com/tags/vi/"}]},{"title":"nodejså¦‚ä½•è·å–formè¡¨å•postæ–¹æ³•æäº¤çš„æ•°æ®","slug":"nodejså¦‚ä½•è·å–formè¡¨å•postæ–¹æ³•æäº¤çš„æ•°æ®","date":"2016-05-18T05:41:40.000Z","updated":"2021-09-27T07:27:40.443Z","comments":true,"path":"2016/05/18/nodejså¦‚ä½•è·å–formè¡¨å•postæ–¹æ³•æäº¤çš„æ•°æ®/","link":"","permalink":"https://www.silenceboy.com/2016/05/18/nodejså¦‚ä½•è·å–formè¡¨å•postæ–¹æ³•æäº¤çš„æ•°æ®/","excerpt":"","text":"é¦–å…ˆé€šè¿‡ï¼šnpm install formidableå®‰è£…æ‰€éœ€çš„åŒ…ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªæµ‹è¯•çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425262728var formidable = require(&apos;formidable&apos;), http = require(&apos;http&apos;), util = require(&apos;util&apos;);http.createServer(function(req, res) &#123; if (req.url == &apos;/upload&apos; &amp;&amp; req.method.toLowerCase() == &apos;post&apos;) &#123; // parse a file upload var form = new formidable.IncomingForm(); form.parse(req, function(err, fields, files) &#123; res.writeHead(200, &#123;&apos;content-type&apos;: &apos;text/plain&apos;&#125;); res.write(&apos;received upload:\\n\\n&apos;); res.end(util.inspect(&#123;fields: fields, files: files&#125;)); &#125;); return; &#125; // show a file upload form res.writeHead(200, &#123;&apos;content-type&apos;: &apos;text/html&apos;&#125;); res.end( &apos;&lt;form action=&quot;/upload&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt;&apos;+ &apos;&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;&lt;br&gt;&apos;+ &apos;&lt;input type=&quot;file&quot; name=&quot;upload&quot; multiple=&quot;multiple&quot;&gt;&lt;br&gt;&apos;+ &apos;&lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;&apos;+ &apos;&lt;/form&gt;&apos; );&#125;).listen(8080); é€šè¿‡formidableå¯ä»¥æˆåŠŸè·å–è¡¨å• æäº¤çš„å†…å®¹ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"}]},{"title":"è¿æ¥Bufferå¯¹è±¡çš„æ­£ç¡®æ–¹æ³•","slug":"è¿æ¥Bufferå¯¹è±¡çš„æ­£ç¡®æ–¹æ³•","date":"2016-04-12T05:39:41.000Z","updated":"2021-09-27T07:27:40.449Z","comments":true,"path":"2016/04/12/è¿æ¥Bufferå¯¹è±¡çš„æ­£ç¡®æ–¹æ³•/","link":"","permalink":"https://www.silenceboy.com/2016/04/12/è¿æ¥Bufferå¯¹è±¡çš„æ­£ç¡®æ–¹æ³•/","excerpt":"","text":"1234567891011121314151617181920212223var buffers = [];var nread = 0;readStream.on(&apos;data&apos;, function (chunk) &#123; buffers.push(chunk); nread += chunk.length;&#125;);readStream.on(&apos;end&apos;, function () &#123; var buffer = null; switch(buffers.length) &#123; case 0: buffer = new Buffer(0); break; case 1: buffer = buffers[0]; break; default: buffer = new Buffer(nread); for (var i = 0, pos = 0, l = buffers.length; i &lt; l; i++) &#123; var chunk = buffers[i]; chunk.copy(buffer, pos); pos += chunk.length; &#125; break; &#125;&#125;);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"buffer","slug":"buffer","permalink":"https://www.silenceboy.com/tags/buffer/"}]},{"title":"html5 å®ç°ç½‘é¡µæˆªå± é¡µé¢ç”Ÿæˆå›¾ç‰‡","slug":"html5-å®ç°ç½‘é¡µæˆªå±-é¡µé¢ç”Ÿæˆå›¾ç‰‡","date":"2016-03-21T05:37:41.000Z","updated":"2021-09-27T07:27:40.440Z","comments":true,"path":"2016/03/21/html5-å®ç°ç½‘é¡µæˆªå±-é¡µé¢ç”Ÿæˆå›¾ç‰‡/","link":"","permalink":"https://www.silenceboy.com/2016/03/21/html5-å®ç°ç½‘é¡µæˆªå±-é¡µé¢ç”Ÿæˆå›¾ç‰‡/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta name=&quot;layout&quot; content=&quot;main&quot;&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;http://html2canvas.hertzen.com/build/html2canvas.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; &gt; $(document).ready( function()&#123; $(&quot;.example1&quot;).on(&quot;click&quot;, function(event) &#123; event.preventDefault(); html2canvas(document.body, &#123; allowTaint: true, taintTest: false, onrendered: function(canvas) &#123; canvas.id = &quot;mycanvas&quot;; //document.body.appendChild(canvas); //ç”Ÿæˆbase64å›¾ç‰‡æ•°æ® var dataUrl = canvas.toDataURL(); var newImg = document.createElement(&quot;img&quot;); newImg.src = dataUrl; document.body.appendChild(newImg); &#125; &#125;); &#125;); &#125;); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; Hello! &lt;div class=&quot;&quot; style=&quot;background-color: #abc;&quot;&gt; html5é¡µé¢æˆªå›¾ &lt;/div&gt; &lt;textArea id=&quot;textArea&quot; col=&quot;20&quot; rows=&quot;10&quot; &gt;&lt;/textArea&gt; &lt;input class=&quot;example1&quot; type=&quot;button&quot; value=&quot;æˆªå›¾&quot;&gt; ç”Ÿæˆç•Œé¢å¦‚ä¸‹ï¼š &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/categories/html5/"}],"tags":[{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/tags/html5/"}]},{"title":"phpæ ¹æ®IPåœ°å€è·å–åœ°ç†ä½ç½®","slug":"phpæ ¹æ®IPåœ°å€è·å–åœ°ç†ä½ç½®","date":"2016-01-24T14:35:15.000Z","updated":"2021-09-27T07:27:40.444Z","comments":true,"path":"2016/01/24/phpæ ¹æ®IPåœ°å€è·å–åœ°ç†ä½ç½®/","link":"","permalink":"https://www.silenceboy.com/2016/01/24/phpæ ¹æ®IPåœ°å€è·å–åœ°ç†ä½ç½®/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;?phpheader(&quot;Content-type: text/html; charset=utf-8&quot;); //è·å–IPåœ°å€çš„æ–¹æ³•function getIP()&#123; if (isset($_SERVER)) &#123; if (isset($_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;])) &#123; $realip = $_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;]; &#125; elseif (isset($_SERVER[&apos;HTTP_CLIENT_IP&apos;])) &#123; $realip = $_SERVER[&apos;HTTP_CLIENT_IP&apos;]; &#125; else &#123; $realip = $_SERVER[&apos;REMOTE_ADDR&apos;]; &#125; &#125; else &#123; if (getenv(&quot;HTTP_X_FORWARDED_FOR&quot;)) &#123; $realip = getenv( &quot;HTTP_X_FORWARDED_FOR&quot;); &#125; elseif (getenv(&quot;HTTP_CLIENT_IP&quot;)) &#123; $realip = getenv(&quot;HTTP_CLIENT_IP&quot;); &#125; else &#123; $realip = getenv(&quot;REMOTE_ADDR&quot;); &#125; &#125; return $realip;&#125;echo $ip = getIP();//é€šè¿‡phpçš„file_get_contents()æ–¹æ³•è·å–åœ°ç†ä½ç½®//æ–°æµªæ¥å£æ ¹æ®ipæŸ¥è¯¢æ‰€åœ¨åŒºåŸŸä¿¡æ¯$res0 = file_get_contents(&quot;http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=json&amp;ip=$ip&quot;);$res0 = json_decode($res0,true);print_r($res0);echo &quot;&lt;br/&gt;&quot;;//æ·˜å®æ¥å£æ ¹æ®ipæŸ¥è¯¢æ‰€åœ¨åŒºåŸŸä¿¡æ¯$res1 = file_get_contents(&quot;http://ip.taobao.com/service/getIpInfo.php?ip=$ip&quot;);$res1 = json_decode($res1,true);print_r($res1);echo &quot;&lt;br/&gt;&quot;;//é€šè¿‡phpçš„curlè·å–åœ°ç†ä½ç½®//æ–°æµªæ ¹æ®IPè·å–åœ°ç†ä½ç½®API$url = &apos;http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=json&amp;ip=$ip&apos;; $ch = curl_init($url); curl_setopt($ch,CURLOPT_ENCODING ,&apos;utf8&apos;); curl_setopt($ch, CURLOPT_TIMEOUT, 10); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true) ; // è·å–æ•°æ®è¿”å› $location = curl_exec($ch); $location = json_decode($location); print_r($location);curl_close($ch); $loc = &quot;&quot;; if($location===FALSE) return &quot;&quot;; if (empty($location-&gt;desc)) &#123; $loc = $location-&gt;province.$location-&gt;city.$location-&gt;district.$location-&gt;isp; &#125;else&#123; $loc = $location-&gt;desc; &#125; echo $loc; //è…¾è®¯æ ¹æ®IPè·å–åœ°ç†ä½ç½®API$url = &apos;http://ip.qq.com/cgi-bin/searchip?searchip1=$ip&apos;; $ch = curl_init($url); curl_setopt($ch,CURLOPT_ENCODING ,&apos;gb2312&apos;); curl_setopt($ch, CURLOPT_TIMEOUT, 10); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true) ; // è·å–æ•°æ®è¿”å› $result = curl_exec($ch); $result = mb_convert_encoding($result, &quot;utf-8&quot;, &quot;gb2312&quot;); // ç¼–ç è½¬æ¢ï¼Œå¦åˆ™ä¹±ç  curl_close($ch); preg_match(&quot;@&lt;span&gt;(.*)&lt;/span&gt;&lt;/p&gt;@iU&quot;,$result,$ipArray); $loc = $ipArray[1]; echo $loc;","categories":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/tags/php/"}]},{"title":"expressç®€å•æµ‹è¯•è¿æ¥mysql","slug":"expressç®€å•æµ‹è¯•è¿æ¥mysql","date":"2016-01-06T14:11:16.000Z","updated":"2021-09-27T07:27:40.440Z","comments":true,"path":"2016/01/06/expressç®€å•æµ‹è¯•è¿æ¥mysql/","link":"","permalink":"https://www.silenceboy.com/2016/01/06/expressç®€å•æµ‹è¯•è¿æ¥mysql/","excerpt":"","text":"ä½¿ç”¨expressåº”ç”¨ç”Ÿæˆå™¨ç”Ÿæˆexpressæ¨¡æ¿åï¼Œå…ˆå†™package.json { &quot;name&quot;: &quot;mysql-test&quot;, &quot;version&quot;: &quot;0.0.1&quot;, &quot;private&quot;: true, &quot;scripts&quot;: { &quot;start&quot;: &quot;node ./bin/www&quot; }, &quot;dependencies&quot;: { &quot;body-parser&quot;: &quot;~1.13.2&quot;, &quot;cookie-parser&quot;: &quot;~1.3.5&quot;, &quot;debug&quot;: &quot;~2.2.0&quot;, &quot;ejs&quot;: &quot;~2.3.3&quot;, &quot;express&quot;: &quot;~4.13.1&quot;, &quot;morgan&quot;: &quot;~1.6.1&quot;, &quot;serve-favicon&quot;: &quot;~2.3.0&quot;, &quot;mysql&quot;:&quot;*&quot; } } npm installå®‰è£…ä¾èµ– æ–°å»ºç«‹ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œmodelså’Œconfig å†™ä¸€ä¸ªconfigé…ç½®æ–‡ä»¶ï¼Œå»è¿æ¥mysqlçš„: module.exports = { mysql_dev: { host: &apos;localhost&apos;, user: &apos;user&apos;, password: &apos;your password&apos;, database: &apos;your db name&apos;, connectionLimit: 10, supportBigNumbers: true } }; å†å†™ä¸Šä¸€ä¸ªdatabase.jsæ–‡ä»¶ï¼š var mysql = require(&apos;mysql&apos;); var config = require(&apos;../config/config&apos;); var pool = mysql.createPool(config.mysql_dev); exports.pool = pool; åœ¨modelsé‡Œå»ºç«‹ä¸€ä¸ªUser.jsæ–‡ä»¶ä½œä¸ºmodelï¼š var db = require(&apos;./database&apos;); var User = function() {}; User.prototype.find = function(id, callback) { var sql = &quot;SELECT * FROM users WHERE id =?&quot;; // get a connection from the pool db.pool.getConnection(function(err, connection) { if (err) { callback(true); return; } // make the query connection.query(sql, [id], function(err, results) { if (err) { callback(true); return; } callback(false, results); }); }); }; module.exports = User; æœ€ååœ¨app.jsé‡Œå¼•å…¥ï¼Œå†è°ƒç”¨ï¼š var User = require(&apos;./models/User&apos;); //....... app.get(&apos;/users/:userid&apos;,function(req,res){ var userid = req.params.userid; var user = new User(); user.find(userid,function(err,result){ if(err){ res.send(&apos;not found&apos;); } res.send(result.length === 1 ? result[0]:result); }); }); è¿™æ ·å°±ç®€å•åœ°å®Œæˆä¸€ä¸ªåç«¯çš„node.jsåˆ†çº§ç»“æ„ï¼Œå‰ç«¯æä¾›restè¯·æ±‚ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"express.js","slug":"express-js","permalink":"https://www.silenceboy.com/tags/express-js/"}]},{"title":"Chrome æµè§ˆå™¨ä¸­çš„æ’ä»¶Vimium","slug":"Chrome-æµè§ˆå™¨ä¸­çš„æ’ä»¶Vimium","date":"2015-12-24T02:44:59.000Z","updated":"2021-09-27T07:27:40.435Z","comments":true,"path":"2015/12/24/Chrome-æµè§ˆå™¨ä¸­çš„æ’ä»¶Vimium/","link":"","permalink":"https://www.silenceboy.com/2015/12/24/Chrome-æµè§ˆå™¨ä¸­çš„æ’ä»¶Vimium/","excerpt":"","text":"åƒä½¿ç”¨vimä¸€æ ·ä½¿ç”¨æµè§ˆå™¨ï¼Œå®Œå…¨é”®ç›˜æ“ä½œï¼Œè„±ç¦»é¼ æ ‡ã€‚ Vimium å¸¸ç”¨çš„æŒ‰é”®åŠŸèƒ½è§£é‡Šï¼šjï¼šå‘ä¸‹ç»†å¾®æ»šåŠ¨çª—å£ kï¼šå‘ä¸Šç»†å¾®æ»šåŠ¨çª—å£Jï¼š(Shift+jçš„æ„æ€ï¼Œä»¥ä¸‹å¤§å†™å…¨éƒ¨è¡¨ç¤ºåŠ Shift) ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ Kï¼šä¸Šä¸€ä¸ªæ ‡ç­¾é¡µdï¼šå‘ä¸‹æ»šåŠ¨åŠä¸ªå±å¹• uï¼šå‘ä¸Šç§»åŠ¨åŠä¸ªå±å¹•g+gï¼ˆè¿ç»­æŒ‰ä¸¤ä¸‹gï¼‰ï¼šå›åˆ°é¡¶éƒ¨Gï¼šåˆ°è¾¾é¡µé¢åº•éƒ¨Hï¼šåé€€ Lï¼š å‰è¿›fï¼šå°†å½“å‰ç½‘é¡µä¸Šçš„æ‰€æœ‰å¯è§é“¾æ¥/è¾“å…¥æ¡†åˆ†é…ä¸€ä¸ªå¿«æ·é”®ï¼Œè¾“å…¥åå°±å¯ä»¥æ‰“å¼€æˆ–è€…è·³è½¬åˆ°å¯¹åº”çš„è¾“å…¥æ¡†ã€‚å¦‚æœæŒ‰çš„æ˜¯Fï¼Œé‚£ä¹ˆå°†åœ¨æ–°çª—å£ä¸­æ‰“å¼€é¡µé¢ï¼ˆè§ä¸Šå›¾ï¼‰g+iï¼šå°†å…‰æ ‡ å®šä½åˆ°è¾“å…¥æ¡†ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä»¥æŒ‰Tabé”®åˆ‡æ¢xï¼šå…³é—­å½“å‰é¡µé¢ Xï¼šæ¢å¤åˆšåˆšå…³é—­çš„é¡µé¢oï¼šç›¸å½“äºChromeä¸­çš„åœ°å€æ ï¼Œå¯ä»¥åŒ¹é…å†å²è®°å½•ã€æ”¶è—å¤¹å¹¶åœ¨å½“å‰çª—å£æ‰“å¼€ï¼Œæˆ–è€…ç›´æ¥æ‰“å¼€ä¸€ä¸ªç½‘å€æˆ–è€…æœç´¢ä¸€ä¸ªå…³é”®å­—ï¼ˆChromeåœ¨å…¨å±çš„æ—¶å€™åœ°å€æ æ­»éƒ½å‡ºä¸æ¥ï¼Œæœ‰äº†å®ƒå°±è§£å†³è¿™ä¸ªä¸€ç›´å›°æ‰°æˆ‘çš„é—®é¢˜äº†ï¼ï½ï¼‰ï¼Œå¦‚æœæŒ‰çš„æ˜¯Oï¼Œåˆ™å¯ä»¥åœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼Œéå¸¸éå¸¸æ–¹ä¾¿ï¼g+sï¼šæŸ¥çœ‹ç½‘é¡µçš„æºä»£ç rï¼šé‡æ–°è½½å…¥å½“å‰ç½‘é¡µï¼ˆé¡ºä¾¿æä¸€å¥ï¼Œè¿™ç‚¹ä¸Šæ–°æµªå¾®åšå’Œå®ƒæ˜¯ä¸€æ ·çš„ï¼Œå…‰æ ‡æ²¡æœ‰å®šä½åœ¨å‘é€æ¡†æ—¶ï¼Œå³ä¾¿æ²¡æœ‰å®‰è£…è¿™ä¸ªæ’ä»¶ä½ ä¹Ÿå¯ä»¥ç”¨j/kæ¥æ§åˆ¶é¡µé¢ä¸Šä¸‹æ»šåŠ¨ï¼Œç”¨råœ¨åˆ·æ–°ï¼Œç”¨fæˆ–è€…pæ¥å®šä½åˆ°å‘é€æ¡†ã€‚è€ŒGmailçš„å¿«æ·é”®å¦‚j,kä¸Šä¸‹ç§»åŠ¨å…‰æ ‡ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œæœ‰å…´è¶£å¤§å®¶å¯ä»¥å†è‡ªå·±å»äº†è§£ä¸€ä¸‹ä¸€äº›å¸¸ç”¨webåº”ç”¨çš„å¿«æ·é”®ï¼‰Vimium / Vimperator çš„å¿«æ·é”®è¿œè¿œä¸æ­¢æˆ‘ä¸Šé¢å†™çš„è¿™äº›ï¼Œæƒ³è¦æŠŠå®ƒç©å¾—ç‚‰ç«çº¯é’çš„è¯ï¼ŒæŒ‰ shift+/ ï¼ˆchromeï¼‰æˆ–è€…æ˜¯è¿›å…¥è®¾ç½®é¡µé¢ï¼ˆfirefox+chromeï¼‰ï¼Œå¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„çš„å¸®åŠ©ã€‚ç”šè‡³ï¼Œä½ è¿˜å¯ä»¥åœ¨è®¾ç½®ä¸­æŒ‰ç…§ä½ è‡ªå·±çš„ä¹ æƒ¯æ›¿æ¢æ‰ä¸€äº›é”®ã€‚","categories":[{"name":"chrome","slug":"chrome","permalink":"https://www.silenceboy.com/categories/chrome/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://www.silenceboy.com/tags/chrome/"},{"name":"vim","slug":"vim","permalink":"https://www.silenceboy.com/tags/vim/"}]},{"title":"phpmailerå‘é€é‚®ä»¶ SMTP Error: Could not authenticate é”™è¯¯","slug":"phpmailerå‘é€é‚®ä»¶-SMTP-Error-Could-not-authenticate-é”™è¯¯","date":"2015-12-24T02:40:37.000Z","updated":"2021-09-27T07:27:40.444Z","comments":true,"path":"2015/12/24/phpmailerå‘é€é‚®ä»¶-SMTP-Error-Could-not-authenticate-é”™è¯¯/","link":"","permalink":"https://www.silenceboy.com/2015/12/24/phpmailerå‘é€é‚®ä»¶-SMTP-Error-Could-not-authenticate-é”™è¯¯/","excerpt":"","text":"ä»Šå¤©åœ¨ä½¿ç”¨phpmailerå‘é€smtpé‚®ä»¶æ—¶æç¤º SMTP Error: Could not authenticate é”™è¯¯ï¼Œå…¶ä¸­å¯†ç å¸å·éƒ½æ˜¯æ­£ç¡®çš„ï¼Œé‚®ç®±ä¹Ÿè®¾ç½®å¼€å¯äº†SMTPåŠŸèƒ½ã€‚ ä¸Šè°·æ­Œç™¾åº¦äº†ä¸€éï¼Œæœ‰çš„è¯´æ˜¯æœåŠ¡å™¨ç¦ç”¨äº†ç«¯å£ï¼Œæœ‰çš„è¯´æŠŠclass.phpmailer.phpä¸­çš„ ä»£ç å¦‚ä¸‹ function IsSMTP() { $this-&gt;Mailer = &apos;smtp&apos;; } æ”¹ä¸º function IsSMTP() { $this-&gt;Mailer = &apos;SMTP&apos;; } ï¼ˆæˆ‘çš„é—®é¢˜é€šè¿‡ä»¥ä¸Šä¿®æ”¹è§£å†³ï¼‰å¦‚æœè§£å†³ä¸äº†è¿˜æœ‰ä¸€äº›è§£å†³æ–¹æ³•å¯ä¾›å‚è€ƒï¼šè¿™ä¸ªé”™è¯¯è¯´æ˜è™šæ‹Ÿä¸»æœºä¸æ”¯æŒPHPMaileré»˜è®¤è°ƒç”¨çš„fsockopenå‡½æ•°ï¼Œæ‰¾åˆ°class.smtp.phpæ–‡ä»¶ï¼Œæœç´¢fsockopenï¼Œå°±æ‰¾åˆ°äº†è¿™æ ·ä¸€æ®µä»£ç ï¼š ä»£ç å¦‚ä¸‹ // connect to the smtp server $this-&gt;smtp_conn = @fsockopen($host,// the host of the server $port,// the port to use $errno, // error number if any $errstr, // error message if any $tval); // give up after ? secs æ–¹æ³•1ï¼šå°†fsockopenå‡½æ•°æ›¿æ¢æˆpfsockopenå‡½æ•° é¦–å…ˆï¼Œåœ¨php.iniä¸­å»æ‰ä¸‹é¢çš„ä¸¤ä¸ªåˆ†å· ;extension=php_sockets.dll ;extension=php_openssl.dll ç„¶åé‡å¯ä¸€ä¸‹ å› ä¸ºpfsockopençš„å‚æ•°ä¸fsockopenåŸºæœ¬ä¸€è‡´ï¼Œæ‰€ä»¥åªéœ€è¦å°†@fsockopenæ›¿æ¢æˆ@pfsockopenå°±å¯ä»¥äº†ã€‚ æ–¹æ³•2ï¼šä½¿ç”¨stream_socket_clientå‡½æ•° ä¸€èˆ¬fsockopen()è¢«ç¦ï¼Œpfsockopenä¹Ÿæœ‰å¯èƒ½è¢«ç¦ï¼Œæ‰€ä»¥è¿™é‡Œä»‹ç»å¦ä¸€ä¸ªå‡½æ•°stream_socket_client()ã€‚ stream_socket_clientçš„å‚æ•°ä¸fsockopenæœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥ä»£ç è¦ä¿®æ”¹ä¸ºï¼š ä»£ç å¦‚ä¸‹ $this-&gt;smtp_conn = stream_socket_client(&quot;tcp://&quot;.$host.&quot;:&quot;.$port, $errno, $errstr, $tval); è¿™æ ·å°±å¯ä»¥äº†ã€‚","categories":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/tags/php/"}]},{"title":"phpä¸­å¦‚ä½•ä½¿ç”¨phpredis","slug":"phpä¸­å¦‚ä½•ä½¿ç”¨phpredis","date":"2015-12-24T02:34:10.000Z","updated":"2021-09-27T07:27:40.444Z","comments":true,"path":"2015/12/24/phpä¸­å¦‚ä½•ä½¿ç”¨phpredis/","link":"","permalink":"https://www.silenceboy.com/2015/12/24/phpä¸­å¦‚ä½•ä½¿ç”¨phpredis/","excerpt":"","text":"å®‰è£…redisæœåŠ¡ï¼šä¸‹è½½åœ°å€ï¼šhttp://redis.io/downloadï¼Œä¸‹è½½æœ€æ–°æ–‡æ¡£ç‰ˆæœ¬ã€‚æœ¬æ•™ç¨‹ä½¿ç”¨çš„æœ€æ–°æ–‡æ¡£ç‰ˆæœ¬ä¸º 2.8.17ï¼Œä¸‹è½½å¹¶å®‰è£…ï¼š $ wget http://download.redis.io/releases/redis-2.8.17.tar.gz $ tar xzf redis-2.8.17.tar.gz $ cd redis-2.8.17 $ make makeå®Œå redis-2.8.17ç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘åçš„redisæœåŠ¡ç¨‹åºredis-server,è¿˜æœ‰ç”¨äºæµ‹è¯•çš„å®¢æˆ·ç«¯ç¨‹åºredis-cli,ä¸¤ä¸ªç¨‹åºä½äºå®‰è£…ç›®å½• src ç›®å½•ä¸‹ï¼šä¸‹é¢å¯åŠ¨redisæœåŠ¡. $ cd src $ ./redis-server æ³¨æ„è¿™ç§æ–¹å¼å¯åŠ¨redis ä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°å‘Šè¯‰redisä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯åŠ¨ã€‚ $ cd src $ ./redis-server redis.conf redis.confæ˜¯ä¸€ä¸ªé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚å¯åŠ¨redisæœåŠ¡è¿›ç¨‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æµ‹è¯•å®¢æˆ·ç«¯ç¨‹åºredis-cliå’ŒredisæœåŠ¡äº¤äº’äº†ã€‚ æ¯”å¦‚ï¼š $ cd src $ ./redis-cli redis&gt; set foo bar OK redis&gt; get foo &quot;bar&quot; å®‰è£…PHP redis é©±åŠ¨è£… PHP redis é©±åŠ¨ï¼šä¸‹è½½åœ°å€ä¸º:https://github.com/nicolasff/phpredisã€‚é¦–å…ˆgit clone é¡¹ç›®åˆ°æœ¬åœ°ï¼Œåˆ‡æ¢åˆ°phpredisç›®å½•ä¸‹åœ¨shellä¸­è¾“å…¥ phpize ç„¶å ./configure è¿›è¡Œé…ç½®ï¼ˆps:å¯èƒ½æ‰¾ä¸åˆ°phpizeï¼Œphpizeæ˜¯å±äºphp-develçš„å†…å®¹ï¼Œå› æ­¤åœ¨centosä¸­åªè¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šyum install php-devel ç„¶åå°±ä¼šå®‰è£…ä¸Šphpizeäº†ã€‚ï¼‰æ¥ä¸‹æ¥å°±æ˜¯æœ€åçš„make å’Œmake installäº†ï¼Œmake ä¹‹åè®°å¾—è·‘ä¸€ä¸‹ make testï¼Œåœ¨make installä¸­é‡åˆ°ç‚¹æƒé™é—®é¢˜ï¼Œæ‰€ä»¥è¦åŠ ä¸Šsudoè¿™æ ·å°±å®Œæˆäº†phpredisçš„ç¼–è¯‘å·¥ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ¥é…ç½®äº†ã€‚ ç„¶åï¼Œåœ¨PHP.INI é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€æ¡extension = redis.so å°±OK å¯¹äº†ï¼Œåˆ«å¿˜äº†é‡å¯Apache","categories":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/tags/php/"},{"name":"redis","slug":"redis","permalink":"https://www.silenceboy.com/tags/redis/"}]},{"title":"PHPè·å–IPåœ°å€ä»¥åŠIPåœ°å€æ‰€åœ¨ä½ç½®","slug":"PHPè·å–IPåœ°å€ä»¥åŠIPåœ°å€æ‰€åœ¨ä½ç½®","date":"2015-12-22T02:29:45.000Z","updated":"2021-09-27T07:27:40.438Z","comments":true,"path":"2015/12/22/PHPè·å–IPåœ°å€ä»¥åŠIPåœ°å€æ‰€åœ¨ä½ç½®/","link":"","permalink":"https://www.silenceboy.com/2015/12/22/PHPè·å–IPåœ°å€ä»¥åŠIPåœ°å€æ‰€åœ¨ä½ç½®/","excerpt":"","text":"è·å–IPåœ°å€ï¼š12345678910111213141516171819202122function getIP()&#123; if (isset($_SERVER)) &#123; if (isset($_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;])) &#123; $realip = $_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;]; &#125; elseif (isset($_SERVER[&apos;HTTP_CLIENT_IP&apos;])) &#123; $realip = $_SERVER[&apos;HTTP_CLIENT_IP&apos;]; &#125; else &#123; $realip = $_SERVER[&apos;REMOTE_ADDR&apos;]; &#125; &#125; else &#123; if (getenv(&quot;HTTP_X_FORWARDED_FOR&quot;)) &#123; $realip = getenv( &quot;HTTP_X_FORWARDED_FOR&quot;); &#125; elseif (getenv(&quot;HTTP_CLIENT_IP&quot;)) &#123; $realip = getenv(&quot;HTTP_CLIENT_IP&quot;); &#125; else &#123; $realip = getenv(&quot;REMOTE_ADDR&quot;); &#125; &#125; return $realip;&#125;echo $ip = getIP(); æ–°æµªæ¥å£æ ¹æ®ipæŸ¥è¯¢æ‰€åœ¨åŒºåŸŸä¿¡æ¯ 1234$res0 = file_get_contents(&quot;http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=json&amp;ip=$ip&quot;);$res0 = json_decode($res0,true);print_r($res0);echo &quot;&lt;br/&gt;&quot;; æ·˜å®æ¥å£æ ¹æ®ipæŸ¥è¯¢æ‰€åœ¨åŒºåŸŸä¿¡æ¯ 1234$res1 = file_get_contents(&quot;http://ip.taobao.com/service/getIpInfo.php?ip=$ip&quot;);$res1 = json_decode($res1,true);print_r($res1);echo &quot;&lt;br/&gt;&quot;;","categories":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/tags/php/"}]}],"categories":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/categories/python/"},{"name":"ASIL","slug":"ASIL","permalink":"https://www.silenceboy.com/categories/ASIL/"},{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/categories/SoC/"},{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/categories/docker/"},{"name":"ä»£ç æ‰«æ","slug":"ä»£ç æ‰«æ","permalink":"https://www.silenceboy.com/categories/ä»£ç æ‰«æ/"},{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/categories/shell/"},{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/categories/go/"},{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/categories/linux/"},{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/categories/mac/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/categories/nodejs/"},{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/categories/mysql/"},{"name":"npm","slug":"npm","permalink":"https://www.silenceboy.com/categories/npm/"},{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/categories/git/"},{"name":"ssh","slug":"ssh","permalink":"https://www.silenceboy.com/categories/ssh/"},{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/categories/javascript/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/categories/ç®—æ³•/"},{"name":"shadowsock","slug":"shadowsock","permalink":"https://www.silenceboy.com/categories/shadowsock/"},{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/categories/html5/"},{"name":"vim","slug":"vim","permalink":"https://www.silenceboy.com/categories/vim/"},{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/categories/php/"},{"name":"chrome","slug":"chrome","permalink":"https://www.silenceboy.com/categories/chrome/"}],"tags":[{"name":"python","slug":"python","permalink":"https://www.silenceboy.com/tags/python/"},{"name":"ASIL","slug":"ASIL","permalink":"https://www.silenceboy.com/tags/ASIL/"},{"name":"SoC","slug":"SoC","permalink":"https://www.silenceboy.com/tags/SoC/"},{"name":"docker","slug":"docker","permalink":"https://www.silenceboy.com/tags/docker/"},{"name":"ä»£ç æ‰«æ","slug":"ä»£ç æ‰«æ","permalink":"https://www.silenceboy.com/tags/ä»£ç æ‰«æ/"},{"name":"shell","slug":"shell","permalink":"https://www.silenceboy.com/tags/shell/"},{"name":"go","slug":"go","permalink":"https://www.silenceboy.com/tags/go/"},{"name":"linux","slug":"linux","permalink":"https://www.silenceboy.com/tags/linux/"},{"name":"mac","slug":"mac","permalink":"https://www.silenceboy.com/tags/mac/"},{"name":"å¤©ç©ºå«å£«","slug":"å¤©ç©ºå«å£«","permalink":"https://www.silenceboy.com/tags/å¤©ç©ºå«å£«/"},{"name":"jdk","slug":"jdk","permalink":"https://www.silenceboy.com/tags/jdk/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://www.silenceboy.com/tags/ubuntu/"},{"name":"nodejs","slug":"nodejs","permalink":"https://www.silenceboy.com/tags/nodejs/"},{"name":"M1","slug":"M1","permalink":"https://www.silenceboy.com/tags/M1/"},{"name":"i3wm","slug":"i3wm","permalink":"https://www.silenceboy.com/tags/i3wm/"},{"name":"i3","slug":"i3","permalink":"https://www.silenceboy.com/tags/i3/"},{"name":"mysql","slug":"mysql","permalink":"https://www.silenceboy.com/tags/mysql/"},{"name":"java","slug":"java","permalink":"https://www.silenceboy.com/tags/java/"},{"name":"npm","slug":"npm","permalink":"https://www.silenceboy.com/tags/npm/"},{"name":"scp","slug":"scp","permalink":"https://www.silenceboy.com/tags/scp/"},{"name":"zsh","slug":"zsh","permalink":"https://www.silenceboy.com/tags/zsh/"},{"name":"git","slug":"git","permalink":"https://www.silenceboy.com/tags/git/"},{"name":"pm2","slug":"pm2","permalink":"https://www.silenceboy.com/tags/pm2/"},{"name":"ssh","slug":"ssh","permalink":"https://www.silenceboy.com/tags/ssh/"},{"name":"jira","slug":"jira","permalink":"https://www.silenceboy.com/tags/jira/"},{"name":"portainer","slug":"portainer","permalink":"https://www.silenceboy.com/tags/portainer/"},{"name":"gitlab","slug":"gitlab","permalink":"https://www.silenceboy.com/tags/gitlab/"},{"name":"javascript","slug":"javascript","permalink":"https://www.silenceboy.com/tags/javascript/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.silenceboy.com/tags/ç®—æ³•/"},{"name":"hexo","slug":"hexo","permalink":"https://www.silenceboy.com/tags/hexo/"},{"name":"express.js","slug":"express-js","permalink":"https://www.silenceboy.com/tags/express-js/"},{"name":"middleware","slug":"middleware","permalink":"https://www.silenceboy.com/tags/middleware/"},{"name":"tailf","slug":"tailf","permalink":"https://www.silenceboy.com/tags/tailf/"},{"name":"gitlab-runner","slug":"gitlab-runner","permalink":"https://www.silenceboy.com/tags/gitlab-runner/"},{"name":"sql server","slug":"sql-server","permalink":"https://www.silenceboy.com/tags/sql-server/"},{"name":"sms","slug":"sms","permalink":"https://www.silenceboy.com/tags/sms/"},{"name":"shadowsock","slug":"shadowsock","permalink":"https://www.silenceboy.com/tags/shadowsock/"},{"name":"dockerfile","slug":"dockerfile","permalink":"https://www.silenceboy.com/tags/dockerfile/"},{"name":"base64","slug":"base64","permalink":"https://www.silenceboy.com/tags/base64/"},{"name":"html5","slug":"html5","permalink":"https://www.silenceboy.com/tags/html5/"},{"name":"å½•éŸ³","slug":"å½•éŸ³","permalink":"https://www.silenceboy.com/tags/å½•éŸ³/"},{"name":"è¯­è¨€è¯†åˆ«","slug":"è¯­è¨€è¯†åˆ«","permalink":"https://www.silenceboy.com/tags/è¯­è¨€è¯†åˆ«/"},{"name":"excel","slug":"excel","permalink":"https://www.silenceboy.com/tags/excel/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://www.silenceboy.com/tags/æ­£åˆ™è¡¨è¾¾å¼/"},{"name":"vim","slug":"vim","permalink":"https://www.silenceboy.com/tags/vim/"},{"name":"vi","slug":"vi","permalink":"https://www.silenceboy.com/tags/vi/"},{"name":"buffer","slug":"buffer","permalink":"https://www.silenceboy.com/tags/buffer/"},{"name":"php","slug":"php","permalink":"https://www.silenceboy.com/tags/php/"},{"name":"chrome","slug":"chrome","permalink":"https://www.silenceboy.com/tags/chrome/"},{"name":"redis","slug":"redis","permalink":"https://www.silenceboy.com/tags/redis/"}]}