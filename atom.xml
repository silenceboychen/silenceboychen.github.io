<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>blog</title>
  
  <subtitle>morty&#39;s blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.silenceboy.com/"/>
  <updated>2025-04-09T01:40:09.005Z</updated>
  <id>https://www.silenceboy.com/</id>
  
  <author>
    <name>morty</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>pythoné¡¹ç›®æ‰¹é‡æ£€æŸ¥ä¾èµ–å¹¶æ·»åŠ è¿›requirementsæ–‡ä»¶</title>
    <link href="https://www.silenceboy.com/2025/04/09/python%E9%A1%B9%E7%9B%AE%E6%89%B9%E9%87%8F%E6%A3%80%E6%9F%A5%E4%BE%9D%E8%B5%96%E5%B9%B6%E6%B7%BB%E5%8A%A0%E8%BF%9Brequirements%E6%96%87%E4%BB%B6/"/>
    <id>https://www.silenceboy.com/2025/04/09/pythoné¡¹ç›®æ‰¹é‡æ£€æŸ¥ä¾èµ–å¹¶æ·»åŠ è¿›requirementsæ–‡ä»¶/</id>
    <published>2025-04-09T01:38:13.000Z</published>
    <updated>2025-04-09T01:40:09.005Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Pythoné¡¹ç›®ä¸­ï¼Œç®¡ç†ä¾èµ–æ˜¯å¾ˆé‡è¦çš„å·¥ä½œã€‚ä¸‹é¢æˆ‘ä»‹ç»å‡ ç§æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©ä½ æ‰¹é‡æ£€æŸ¥é¡¹ç›®ä¾èµ–å¹¶æ›´æ–°requirementsæ–‡ä»¶ã€‚</p><h2 id="1-ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆrequirements-txt"><a href="#1-ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆrequirements-txt" class="headerlink" title="1. ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆrequirements.txt"></a>1. ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆrequirements.txt</h2><p>pipreqsæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå®ƒèƒ½åˆ†æä½ çš„ä»£ç å¹¶åªç”Ÿæˆé¡¹ç›®å®é™…ä½¿ç”¨çš„ä¾èµ–åˆ—è¡¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pipreqs</span></span><br><span class="line">pip install pipreqs</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ</span></span><br><span class="line">pipreqs . --force  <span class="comment"># --forceé€‰é¡¹ä¼šè¦†ç›–å·²å­˜åœ¨çš„requirements.txt</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå·¥å…·çš„ä¼˜ç‚¹æ˜¯å®ƒåªåŒ…å«ä»£ç ä¸­å®é™…å¯¼å…¥çš„åŒ…ï¼Œè€Œä¸æ˜¯ç¯å¢ƒä¸­å®‰è£…çš„æ‰€æœ‰åŒ…ã€‚</p><h2 id="2-ä½¿ç”¨pip-toolsç®¡ç†ä¾èµ–"><a href="#2-ä½¿ç”¨pip-toolsç®¡ç†ä¾èµ–" class="headerlink" title="2. ä½¿ç”¨pip-toolsç®¡ç†ä¾èµ–"></a>2. ä½¿ç”¨pip-toolsç®¡ç†ä¾èµ–</h2><p>pip-toolsæä¾›äº†ä¸¤ä¸ªå‘½ä»¤ï¼š<code>pip-compile</code>å’Œ<code>pip-sync</code>ï¼Œå¯ä»¥æ›´ç²¾ç¡®åœ°ç®¡ç†ä¾èµ–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pip-tools</span></span><br><span class="line">pip install pip-tools</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªrequirements.inæ–‡ä»¶ï¼Œåˆ—å‡ºä¸»è¦ä¾èµ–</span></span><br><span class="line"><span class="comment"># ç„¶åç”Ÿæˆè¯¦ç»†çš„requirements.txt</span></span><br><span class="line">pip-compile requirements.in</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿æŒç¯å¢ƒä¸requirements.txtåŒæ­¥</span></span><br><span class="line">pip-sync</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åŒºåˆ†ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–ï¼Œå¹¶ä¸”é”å®šæ‰€æœ‰åŒ…çš„ç‰ˆæœ¬ã€‚</p><h2 id="3-æ£€æŸ¥é¡¹ç›®ä¸­ç¼ºå°‘çš„ä¾èµ–"><a href="#3-æ£€æŸ¥é¡¹ç›®ä¸­ç¼ºå°‘çš„ä¾èµ–" class="headerlink" title="3. æ£€æŸ¥é¡¹ç›®ä¸­ç¼ºå°‘çš„ä¾èµ–"></a>3. æ£€æŸ¥é¡¹ç›®ä¸­ç¼ºå°‘çš„ä¾èµ–</h2><p>å¯ä»¥ä½¿ç”¨pylintæˆ–å…¶ä»–é™æ€åˆ†æå·¥å…·æ¥æŸ¥æ‰¾å¯èƒ½ç¼ºå°‘çš„å¯¼å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pylint</span></span><br><span class="line">pip install pylint</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰«æé¡¹ç›®</span></span><br><span class="line">pylint --<span class="built_in">disable</span>=all --<span class="built_in">enable</span>=no-name-in-module,import-error path/to/your/project</span><br></pre></td></tr></table></figure><h2 id="4-è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹"><a href="#4-è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹" class="headerlink" title="4. è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹"></a>4. è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹</h2><p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥è‡ªåŠ¨æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">è‡ªåŠ¨æ£€æŸ¥å’Œæ›´æ–°é¡¹ç›®ä¾èµ–ï¼Œå¹¶æ·»åŠ åˆ°requirements.txtæ–‡ä»¶</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""ä¸»å‡½æ•°"""</span></span><br><span class="line">    <span class="comment"># ç¡®ä¿pip-toolså·²å®‰è£…</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> piptools</span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        print(<span class="string">"å®‰è£… pip-tools..."</span>)</span><br><span class="line">        subprocess.check_call([sys.executable, <span class="string">"-m"</span>, <span class="string">"pip"</span>, <span class="string">"install"</span>, <span class="string">"pip-tools"</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨pipreqsåˆ†æé¡¹ç›®ä¾èµ–</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> pipreqs</span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        print(<span class="string">"å®‰è£… pipreqs..."</span>)</span><br><span class="line">        subprocess.check_call([sys.executable, <span class="string">"-m"</span>, <span class="string">"pip"</span>, <span class="string">"install"</span>, <span class="string">"pipreqs"</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç”Ÿæˆä¸´æ—¶requirementsæ–‡ä»¶</span></span><br><span class="line">    print(<span class="string">"åˆ†æé¡¹ç›®ä¾èµ–..."</span>)</span><br><span class="line">    subprocess.check_call([<span class="string">"pipreqs"</span>, <span class="string">"."</span>, <span class="string">"--savepath"</span>, <span class="string">"requirements.temp.txt"</span>, <span class="string">"--force"</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯»å–ç°æœ‰çš„requirements.txt (å¦‚æœå­˜åœ¨)</span></span><br><span class="line">    existing_reqs = set()</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">"requirements.txt"</span>):</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">"requirements.txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                line = line.strip()</span><br><span class="line">                <span class="keyword">if</span> line <span class="keyword">and</span> <span class="keyword">not</span> line.startswith(<span class="string">"#"</span>):</span><br><span class="line">                    existing_reqs.add(line.split(<span class="string">"=="</span>)[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯»å–æ–°ç”Ÿæˆçš„requirements</span></span><br><span class="line">    new_reqs = []</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"requirements.temp.txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            line = line.strip()</span><br><span class="line">            <span class="keyword">if</span> line <span class="keyword">and</span> <span class="keyword">not</span> line.startswith(<span class="string">"#"</span>):</span><br><span class="line">                new_reqs.append(line)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆå¹¶å¹¶åˆ†ç±»</span></span><br><span class="line">    main_deps = []</span><br><span class="line">    <span class="keyword">for</span> req <span class="keyword">in</span> new_reqs:</span><br><span class="line">        pkg_name = req.split(<span class="string">"=="</span>)[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> pkg_name <span class="keyword">not</span> <span class="keyword">in</span> existing_reqs:</span><br><span class="line">            main_deps.append(<span class="string">f"<span class="subst">&#123;req&#125;</span>  # æ–°æ·»åŠ çš„ä¾èµ–"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            main_deps.append(req)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å†™å…¥æœ€ç»ˆçš„requirements.txt</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"requirements.txt"</span>, <span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">"# ä¸»è¦ä¾èµ– - é¡¹ç›®ç›´æ¥ä½¿ç”¨\n"</span>)</span><br><span class="line">        <span class="keyword">for</span> dep <span class="keyword">in</span> sorted(main_deps):</span><br><span class="line">            f.write(<span class="string">f"<span class="subst">&#123;dep&#125;</span>\n"</span>)</span><br><span class="line">        f.write(<span class="string">"\n# æ ¹æ®å®é™…éœ€è¦æ·»åŠ å¼€å‘å’Œæµ‹è¯•ä¾èµ–\n"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">    os.remove(<span class="string">"requirements.temp.txt"</span>)</span><br><span class="line">    </span><br><span class="line">    print(<span class="string">"å®Œæˆ! requirements.txt å·²æ›´æ–°ã€‚"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å°†è¿™ä¸ªè„šæœ¬ä¿å­˜ä¸º<code>update_requirements.py</code>ï¼Œç„¶åè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python update_requirements.py</span><br></pre></td></tr></table></figure><h2 id="5-æ•´åˆè¿›Makefile"><a href="#5-æ•´åˆè¿›Makefile" class="headerlink" title="5. æ•´åˆè¿›Makefile"></a>5. æ•´åˆè¿›Makefile</h2><p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨Makefileï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªç›®æ ‡æ¥æ›´æ–°ä¾èµ–ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>: update-deps</span></span><br><span class="line"></span><br><span class="line"><span class="section">update-deps:</span></span><br><span class="line">@echo <span class="string">"æ›´æ–°é¡¹ç›®ä¾èµ–..."</span></span><br><span class="line">pip install pipreqs</span><br><span class="line">pipreqs . --force</span><br><span class="line">@echo <span class="string">"ä¾èµ–å·²æ›´æ–°åˆ°requirements.txt"</span></span><br></pre></td></tr></table></figure><h2 id="6-å¯¹äºå¤æ‚é¡¹ç›®çš„å»ºè®®"><a href="#6-å¯¹äºå¤æ‚é¡¹ç›®çš„å»ºè®®" class="headerlink" title="6. å¯¹äºå¤æ‚é¡¹ç›®çš„å»ºè®®"></a>6. å¯¹äºå¤æ‚é¡¹ç›®çš„å»ºè®®</h2><p>å¯¹äºæœ‰å¤šä¸ªç¯å¢ƒçš„å¤æ‚é¡¹ç›®ï¼š</p><ol><li>ä½¿ç”¨<code>pyproject.toml</code>é…åˆ<code>setuptools</code>æˆ–<code>poetry</code>ç®¡ç†ä¾èµ–</li><li>åŒºåˆ†å¼€å‘ä¾èµ–å’Œè¿è¡Œæ—¶ä¾èµ–</li><li>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç¡®ä¿ä¾èµ–éš”ç¦»</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨poetry</span></span><br><span class="line">poetry init  <span class="comment"># åˆ›å»ºpyproject.toml</span></span><br><span class="line">poetry add package1 package2  <span class="comment"># æ·»åŠ ä¾èµ–</span></span><br><span class="line">poetry <span class="built_in">export</span> -f requirements.txt --output requirements.txt  <span class="comment"># å¯¼å‡ºrequirements.txt</span></span><br></pre></td></tr></table></figure><h2 id="7-æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–"><a href="#7-æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–" class="headerlink" title="7. æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–"></a>7. æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–</h2><p>å¯ä»¥ä½¿ç”¨<code>pip-extra-reqs</code>å·¥å…·æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pip-extra-reqs</span><br><span class="line">pip-extra-reqs src/</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œç¡®ä¿requirements.txtæ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…è¦çš„ä¾èµ–ï¼ŒåŒæ—¶é¿å…æ·»åŠ ä¸å¿…è¦çš„åŒ…ã€‚æ— è®ºé¡¹ç›®è§„æ¨¡å¤§å°ï¼Œè¿™äº›æ–¹æ³•éƒ½èƒ½å¸®åŠ©ä½ ä¿æŒä¾èµ–çš„æ¸…æ™°å’Œæœ€æ–°ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨Pythoné¡¹ç›®ä¸­ï¼Œç®¡ç†ä¾èµ–æ˜¯å¾ˆé‡è¦çš„å·¥ä½œã€‚ä¸‹é¢æˆ‘ä»‹ç»å‡ ç§æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©ä½ æ‰¹é‡æ£€æŸ¥é¡¹ç›®ä¾èµ–å¹¶æ›´æ–°requirementsæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;1-ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆrequirements-txt&quot;&gt;&lt;a href=&quot;#1-ä½¿ç”¨pipreqsè‡ªåŠ¨ç”Ÿæˆre
      
    
    </summary>
    
      <category term="python" scheme="https://www.silenceboy.com/categories/python/"/>
    
    
      <category term="python" scheme="https://www.silenceboy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬</title>
    <link href="https://www.silenceboy.com/2025/03/26/%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AApython%E7%89%88%E6%9C%AC/"/>
    <id>https://www.silenceboy.com/2025/03/26/æœ¬åœ°ç®¡ç†å¤šä¸ªpythonç‰ˆæœ¬/</id>
    <published>2025-03-26T12:13:54.000Z</published>
    <updated>2025-04-01T07:30:24.541Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬åœ°ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬æ˜¯å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯å‡ ç§ä¸»æµä¸”é«˜æ•ˆçš„æ–¹æ³•ï¼Œé€‚ç”¨äºä¸åŒæ“ä½œç³»ç»Ÿï¼š</p><hr><h3 id="ä¸€ã€ä½¿ç”¨-pyenvï¼ˆæ¨èç»™-macOS-Linux-ç”¨æˆ·ï¼‰"><a href="#ä¸€ã€ä½¿ç”¨-pyenvï¼ˆæ¨èç»™-macOS-Linux-ç”¨æˆ·ï¼‰" class="headerlink" title="ä¸€ã€ä½¿ç”¨ pyenvï¼ˆæ¨èç»™ macOS/Linux ç”¨æˆ·ï¼‰"></a>ä¸€ã€ä½¿ç”¨ <strong>pyenv</strong>ï¼ˆæ¨èç»™ macOS/Linux ç”¨æˆ·ï¼‰</h3><p><strong>åŸç†</strong>ï¼šé€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡åŠ¨æ€åˆ‡æ¢ Python ç‰ˆæœ¬ï¼Œä¸ä¾èµ–ç³»ç»Ÿè‡ªå¸¦çš„ Pythonã€‚</p><h4 id="1-å®‰è£…-pyenv"><a href="#1-å®‰è£…-pyenv" class="headerlink" title="1. å®‰è£… pyenv"></a>1. å®‰è£… pyenv</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å®‰è£…è„šæœ¬</span></span><br><span class="line">curl https://pyenv.run | bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$HOME</span>/.pyenv/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv virtualenv-init -)</span>"</span></span><br></pre></td></tr></table></figure><h4 id="2-å¸¸ç”¨å‘½ä»¤"><a href="#2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨å‘½ä»¤"></a>2. å¸¸ç”¨å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¯å®‰è£…ç‰ˆæœ¬</span></span><br><span class="line">pyenv install --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ Python 3.9.6ï¼‰</span></span><br><span class="line">pyenv install 3.9.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå·²å®‰è£…ç‰ˆæœ¬</span></span><br><span class="line">pyenv versions</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€é»˜è®¤ç‰ˆæœ¬</span></span><br><span class="line">pyenv global 3.9.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å½“å‰ç›®å½•çš„æœ¬åœ°ç‰ˆæœ¬ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰</span></span><br><span class="line">pyenv <span class="built_in">local</span> 3.8.12</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½ç‰ˆæœ¬</span></span><br><span class="line">pyenv uninstall 3.7.0</span><br></pre></td></tr></table></figure><hr><h3 id="äºŒã€ä½¿ç”¨-condaï¼ˆè·¨å¹³å°ï¼Œé€‚åˆç§‘å­¦è®¡ç®—åœºæ™¯ï¼‰"><a href="#äºŒã€ä½¿ç”¨-condaï¼ˆè·¨å¹³å°ï¼Œé€‚åˆç§‘å­¦è®¡ç®—åœºæ™¯ï¼‰" class="headerlink" title="äºŒã€ä½¿ç”¨ condaï¼ˆè·¨å¹³å°ï¼Œé€‚åˆç§‘å­¦è®¡ç®—åœºæ™¯ï¼‰"></a>äºŒã€ä½¿ç”¨ <strong>conda</strong>ï¼ˆè·¨å¹³å°ï¼Œé€‚åˆç§‘å­¦è®¡ç®—åœºæ™¯ï¼‰</h3><p><strong>åŸç†</strong>ï¼šé€šè¿‡è™šæ‹Ÿç¯å¢ƒç®¡ç† Python ç‰ˆæœ¬å’Œä¾èµ–ã€‚</p><h4 id="1-å®‰è£…-Miniconda-Anaconda"><a href="#1-å®‰è£…-Miniconda-Anaconda" class="headerlink" title="1. å®‰è£… Miniconda/Anaconda"></a>1. å®‰è£… Miniconda/Anaconda</h4><p>ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼š<a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank" rel="noopener">https://docs.conda.io/en/latest/miniconda.html</a></p><h4 id="2-åˆ›å»ºä¸åŒ-Python-ç‰ˆæœ¬çš„ç¯å¢ƒ"><a href="#2-åˆ›å»ºä¸åŒ-Python-ç‰ˆæœ¬çš„ç¯å¢ƒ" class="headerlink" title="2. åˆ›å»ºä¸åŒ Python ç‰ˆæœ¬çš„ç¯å¢ƒ"></a>2. åˆ›å»ºä¸åŒ Python ç‰ˆæœ¬çš„ç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåä¸º py38 çš„ç¯å¢ƒï¼ŒæŒ‡å®š Python 3.8</span></span><br><span class="line">conda create -n py38 python=3.8</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»ç¯å¢ƒ</span></span><br><span class="line">conda activate py38</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ</span></span><br><span class="line">conda env list</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€€å‡ºç¯å¢ƒ</span></span><br><span class="line">conda deactivate</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç¯å¢ƒ</span></span><br><span class="line">conda env remove -n py38</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸‰ã€ä½¿ç”¨-Dockerï¼ˆé€‚åˆéš”ç¦»å¼€å‘ç¯å¢ƒï¼‰"><a href="#ä¸‰ã€ä½¿ç”¨-Dockerï¼ˆé€‚åˆéš”ç¦»å¼€å‘ç¯å¢ƒï¼‰" class="headerlink" title="ä¸‰ã€ä½¿ç”¨ Dockerï¼ˆé€‚åˆéš”ç¦»å¼€å‘ç¯å¢ƒï¼‰"></a>ä¸‰ã€ä½¿ç”¨ <strong>Docker</strong>ï¼ˆé€‚åˆéš”ç¦»å¼€å‘ç¯å¢ƒï¼‰</h3><p>é€šè¿‡å®¹å™¨åŒ–æŠ€æœ¯éš”ç¦»ä¸åŒé¡¹ç›®ç¯å¢ƒã€‚</p><h4 id="ç¤ºä¾‹-Dockerfile"><a href="#ç¤ºä¾‹-Dockerfile" class="headerlink" title="ç¤ºä¾‹ Dockerfile"></a>ç¤ºä¾‹ Dockerfile</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span>-slim</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.txt .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ä¸åŒé•œåƒç‰ˆæœ¬"><a href="#ä½¿ç”¨ä¸åŒé•œåƒç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨ä¸åŒé•œåƒç‰ˆæœ¬"></a>ä½¿ç”¨ä¸åŒé•œåƒç‰ˆæœ¬</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œ Python 3.9 å®¹å™¨</span></span><br><span class="line">docker run -it --rm python:3.9-alpine python --version</span><br></pre></td></tr></table></figure><hr><h3 id="å››ã€Windows-ç”¨æˆ·çš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#å››ã€Windows-ç”¨æˆ·çš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="å››ã€Windows ç”¨æˆ·çš„æ›¿ä»£æ–¹æ¡ˆ"></a>å››ã€Windows ç”¨æˆ·çš„æ›¿ä»£æ–¹æ¡ˆ</h3><ol><li><p><strong>pyenv-win</strong>ï¼ˆç±»ä¼¼ Unix çš„ pyenvï¼‰ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…å‘½ä»¤</span></span><br><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-UseBasicParsing</span> <span class="literal">-Uri</span> <span class="string">"https://raw.githubusercontent.com/pyenv-win/pyenv-win/master/pyenv-win/install-pyenv-win.ps1"</span> <span class="literal">-OutFile</span> <span class="string">"./install-pyenv-win.ps1"</span></span><br><span class="line">&amp; <span class="string">"./install-pyenv-win.ps1"</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰‹åŠ¨å®‰è£…å¤šä¸ªç‰ˆæœ¬</strong>ï¼š</p><ul><li>ä»å®˜ç½‘ä¸‹è½½ä¸åŒç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼ˆå¦‚ <code>python-3.8.exe</code> å’Œ <code>python-3.10.exe</code>ï¼‰</li><li>å®‰è£…æ—¶å‹¾é€‰ <strong>â€œAdd to PATHâ€</strong>ï¼Œä½†é€šè¿‡ä¿®æ”¹å¯æ‰§è¡Œæ–‡ä»¶ååŒºåˆ†ç‰ˆæœ¬ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°† Python 3.8 çš„å¯æ‰§è¡Œæ–‡ä»¶é‡å‘½å</span></span><br><span class="line">mv /path/to/python3.8/python.exe /path/to/python3.8/python38.exe</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="äº”ã€é€šç”¨æŠ€å·§ï¼šè™šæ‹Ÿç¯å¢ƒ-ç‰ˆæœ¬æŒ‡å®š"><a href="#äº”ã€é€šç”¨æŠ€å·§ï¼šè™šæ‹Ÿç¯å¢ƒ-ç‰ˆæœ¬æŒ‡å®š" class="headerlink" title="äº”ã€é€šç”¨æŠ€å·§ï¼šè™šæ‹Ÿç¯å¢ƒ + ç‰ˆæœ¬æŒ‡å®š"></a>äº”ã€é€šç”¨æŠ€å·§ï¼šè™šæ‹Ÿç¯å¢ƒ + ç‰ˆæœ¬æŒ‡å®š</h3><p>å³ä½¿ä½¿ç”¨ç³»ç»Ÿ Pythonï¼Œä¹Ÿå¯é€šè¿‡ <code>venv</code> æˆ– <code>virtualenv</code> éš”ç¦»ç¯å¢ƒï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç‰¹å®š Python ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">/path/to/python3.9 -m venv myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»ç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">source</span> myenv/bin/activate  <span class="comment"># Linux/macOS</span></span><br><span class="line">myenv\Scripts\activate.bat <span class="comment"># Windows</span></span><br></pre></td></tr></table></figure></p><hr><h3 id="ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯¹æ¯”"><a href="#ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯¹æ¯”" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯¹æ¯”"></a>ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯¹æ¯”</h3><table><thead><tr><th>å·¥å…·</th><th>é€‚ç”¨ç³»ç»Ÿ</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>pyenv</strong></td><td>macOS/Linux</td><td>è½»é‡çº§ï¼Œçº¯å‘½ä»¤è¡Œæ“ä½œ</td></tr><tr><td><strong>conda</strong></td><td>è·¨å¹³å°</td><td>é›†æˆåŒ…ç®¡ç†ï¼Œé€‚åˆç§‘å­¦è®¡ç®—</td></tr><tr><td><strong>Docker</strong></td><td>è·¨å¹³å°</td><td>å®Œå…¨ç¯å¢ƒéš”ç¦»ï¼Œä½†éœ€å­¦ä¹ å®¹å™¨æŠ€æœ¯</td></tr><tr><td><strong>æ‰‹åŠ¨ç®¡ç†</strong></td><td>æ‰€æœ‰ç³»ç»Ÿ</td><td>çµæ´»æ€§é«˜ï¼Œä½†ç»´æŠ¤æˆæœ¬è¾ƒé«˜</td></tr></tbody></table><p>é€‰æ‹©å·¥å…·æ—¶ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ <strong>pyenv</strong>ï¼ˆUnixï¼‰æˆ– <strong>conda</strong>ï¼ˆè·¨å¹³å°ï¼‰ä»¥ç®€åŒ–æ“ä½œã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨æœ¬åœ°ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬æ˜¯å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯å‡ ç§ä¸»æµä¸”é«˜æ•ˆçš„æ–¹æ³•ï¼Œé€‚ç”¨äºä¸åŒæ“ä½œç³»ç»Ÿï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ä¸€ã€ä½¿ç”¨-pyenvï¼ˆæ¨èç»™-macOS-Linux-ç”¨æˆ·ï¼‰&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä½¿ç”¨-pyenvï¼ˆæ¨èç»™-macOS-Linux
      
    
    </summary>
    
      <category term="python" scheme="https://www.silenceboy.com/categories/python/"/>
    
    
      <category term="python" scheme="https://www.silenceboy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ</title>
    <link href="https://www.silenceboy.com/2025/03/21/pip%E8%87%AA%E5%8A%A8%E5%86%99%E5%85%A5requirements%E7%9A%84%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88/"/>
    <id>https://www.silenceboy.com/2025/03/21/pipè‡ªåŠ¨å†™å…¥requirementsçš„ç»ˆææ–¹æ¡ˆ/</id>
    <published>2025-03-21T04:50:53.000Z</published>
    <updated>2025-03-21T04:52:40.422Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Pythonå¼€å‘ä¸­ï¼Œæ‰‹åŠ¨ç»´æŠ¤requirements.txtæ–‡ä»¶å®¹æ˜“é—æ¼ä¾èµ–é¡¹ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œè®©ä¾èµ–ç®¡ç†æ›´é«˜æ•ˆã€‚</p><hr><h3 id="æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰"><a href="#æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰"></a>æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰</h3><p><strong>å®ç°åŸç†ï¼š</strong> é€šè¿‡Shellå‡½æ•°å°è£…pipå‘½ä»¤ï¼Œåœ¨æ‰§è¡Œå®‰è£…åè‡ªåŠ¨æ›´æ–°requirementsæ–‡ä»¶</p><p><strong>é…ç½®æ–¹æ³•ï¼ˆåœ¨.bashrc/.zshrcä¸­æ·»åŠ ï¼‰ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">pip</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">"install"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">command</span> pip <span class="string">"<span class="variable">$@</span>"</span> &amp;&amp; pip freeze --exclude-editable | grep -v <span class="string">'^#'</span> &gt; requirements.txt</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">command</span> pip <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…åŒ…å¹¶è‡ªåŠ¨è®°å½•</span></span><br><span class="line">pip install requests==2.26.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å¤šä¸ªåŒ…ï¼ˆæ”¯æŒæ‰€æœ‰pipå‚æ•°ï¼‰</span></span><br><span class="line">pip install django~=3.2.0 celery[redis]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å‘æ¨¡å¼å®‰è£…ï¼ˆä¸ä¼šè®°å½•åˆ°requirementsï¼‰</span></span><br><span class="line">pip install -e .</span><br></pre></td></tr></table></figure></p><p><strong>æ–¹æ¡ˆç‰¹ç‚¹ï¼š</strong></p><ul><li>âœ… é›¶ä¾èµ–ï¼Œçº¯Shellå®ç°</li><li>ğŸ›¡ï¸ æ’é™¤<code>-e</code>å®‰è£…çš„æœ¬åœ°åŒ…</li><li>ğŸ” è‡ªåŠ¨è¿‡æ»¤æ³¨é‡Šè¡Œ</li><li>âš ï¸ æ³¨æ„ï¼šä¼šè¦†ç›–åŸæœ‰requirementsæ–‡ä»¶</li></ul><hr><h3 id="æ–¹æ¡ˆäºŒï¼špip-autosaveå·¥å…·ï¼ˆä¸“ä¸šçº§è‡ªåŠ¨è®°å½•ï¼‰"><a href="#æ–¹æ¡ˆäºŒï¼špip-autosaveå·¥å…·ï¼ˆä¸“ä¸šçº§è‡ªåŠ¨è®°å½•ï¼‰" class="headerlink" title="æ–¹æ¡ˆäºŒï¼špip-autosaveå·¥å…·ï¼ˆä¸“ä¸šçº§è‡ªåŠ¨è®°å½•ï¼‰"></a>æ–¹æ¡ˆäºŒï¼špip-autosaveå·¥å…·ï¼ˆä¸“ä¸šçº§è‡ªåŠ¨è®°å½•ï¼‰</h3><p><strong>å®‰è£…ä½¿ç”¨ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pip-autosave</span><br></pre></td></tr></table></figure></p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€ç”¨æ³•ï¼ˆè‡ªåŠ¨ç”Ÿæˆrequirements.txtï¼‰</span></span><br><span class="line">pip install requests --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¿å­˜æ–‡ä»¶</span></span><br><span class="line">pip install pandas --save requirements-dev.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¹é‡å®‰è£…å¹¶è®°å½•</span></span><br><span class="line">pip install -r base-requirements.txt --save</span><br></pre></td></tr></table></figure></p><p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p><ul><li>ğŸ“¦ å¢é‡æ›´æ–°æ¨¡å¼ï¼ˆä¿ç•™å·²æœ‰ä¾èµ–ï¼‰</li><li>ğŸ¯ æ™ºèƒ½ç‰ˆæœ¬é”å®šï¼ˆè®°å½•ç²¾ç¡®ç‰ˆæœ¬å·ï¼‰</li><li>ğŸ”„ æ”¯æŒå¤šç¯å¢ƒæ–‡ä»¶ï¼ˆdev/prodï¼‰</li><li>ğŸ“Š ç”Ÿæˆä¾èµ–å…³ç³»æ ‘å¯è§†åŒ–ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip show pandas --save --tree</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="æ–¹æ¡ˆä¸‰ï¼šç°ä»£é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆ"><a href="#æ–¹æ¡ˆä¸‰ï¼šç°ä»£é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆ" class="headerlink" title="æ–¹æ¡ˆä¸‰ï¼šç°ä»£é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆ"></a>æ–¹æ¡ˆä¸‰ï¼šç°ä»£é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆ</h3><p><strong>1. Pipenvå·¥ä½œæµï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…å¹¶è‡ªåŠ¨æ›´æ–°Pipfile</span></span><br><span class="line">pipenv install requests</span><br><span class="line">pipenv install --dev pytest</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ ‡å‡†requirementsæ–‡ä»¶</span></span><br><span class="line">pipenv requirements &gt; requirements.txt</span><br></pre></td></tr></table></figure></p><p><strong>2. Poetryé…ç½®ï¼š</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pyproject.toml é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="section">[tool.poetry.dependencies]</span></span><br><span class="line"><span class="attr">python</span> = <span class="string">"^3.8"</span></span><br><span class="line"><span class="attr">requests</span> = &#123; version = <span class="string">"*"</span>, optional = <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="section">[tool.poetry.dev-dependencies]</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">"^6.2.5"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å‡ºrequirements.txt</span></span><br><span class="line">poetry export -f requirements.txt --output requirements.txt</span><br></pre></td></tr></table></figure></p><p><strong>3. Hatchç¯å¢ƒç®¡ç†ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå¸¦è‡ªåŠ¨ä¾èµ–è·Ÿè¸ªçš„ç¯å¢ƒ</span></span><br><span class="line">hatch env create myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ç¯å¢ƒä¸­å®‰è£…ä¾èµ–</span></span><br><span class="line">hatch run myenv pip install numpy</span><br></pre></td></tr></table></figure></p><hr><h3 id="ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ"><a href="#ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ"></a>ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ</h3><ol><li><p><strong>å·®å¼‚åŒ–ç‰ˆæœ¬è®°å½•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿäº§ä¾èµ–</span></span><br><span class="line">pip freeze --exclude-editable | grep -v <span class="string">'pkg-resources==0.0.0'</span> &gt; requirements.txt</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¼€å‘ä¾èµ–</span></span><br><span class="line">pip freeze --exclude-editable | grep -E <span class="string">'(pytest|coverage)'</span> &gt; requirements-dev.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¾èµ–æ ‘å¯è§†åŒ–æ£€æŸ¥ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipdeptree --exclude pip,pip-autosave,setuptools,wheel</span><br></pre></td></tr></table></figure></li><li><p><strong>å®‰å…¨æ›´æ–°ç­–ç•¥ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è¿‡æ—¶ä¾èµ–</span></span><br><span class="line">pip list --outdated --format=columns</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ‰¹é‡æ›´æ–°å‘½ä»¤</span></span><br><span class="line">pip install $(pip list --outdated | awk <span class="string">'NR&gt;2 &#123;print $1&#125;'</span>) --upgrade</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å¯¹æ¯”"><a href="#ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å¯¹æ¯”" class="headerlink" title="ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å¯¹æ¯”"></a>ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å¯¹æ¯”</h3><table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>å±€é™æ€§</th></tr></thead><tbody><tr><td>Shellåˆ«å</td><td>å¿«é€ŸåŸå‹å¼€å‘</td><td>æ— éœ€å®‰è£…æ–°å·¥å…·</td><td>åŠŸèƒ½æœ‰é™ï¼Œå¯èƒ½è¦†ç›–æ–‡ä»¶</td></tr><tr><td>pip-autosave</td><td>ä¼ä¸šçº§é¡¹ç›®</td><td>ç²¾ç»†æ§åˆ¶ï¼Œæ”¯æŒå¤šç¯å¢ƒ</td><td>éœ€è¦é¢å¤–å®‰è£…</td></tr><tr><td>Pipenv/Poetry</td><td>é•¿æœŸç»´æŠ¤çš„å¤§å‹é¡¹ç›®</td><td>å®Œæ•´ä¾èµ–è§£æï¼Œæ”¯æŒé”å®šæ–‡ä»¶</td><td>å­¦ä¹ æˆæœ¬è¾ƒé«˜</td></tr><tr><td>Hatch</td><td>å¤šç¯å¢ƒå¤æ‚é…ç½®</td><td>é›†æˆæµ‹è¯•å’Œæ„å»ºæµç¨‹</td><td>ç”Ÿæ€ç³»ç»Ÿè¾ƒæ–°</td></tr></tbody></table><hr><h3 id="å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h3><p><strong>Qï¼šå¦‚ä½•å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿä¾èµ–ï¼Ÿ</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å¹³å°æ ‡è®°</span></span><br><span class="line">pip install pywin32 --save; sys_platform == <span class="string">'win32'</span></span><br></pre></td></tr></table></figure></p><p><strong>Qï¼šå¦‚ä½•é¿å…å¼€å‘å·¥å…·æ±¡æŸ“ç”Ÿäº§ä¾èµ–ï¼Ÿ</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨åˆ†å±‚requirementsæ–‡ä»¶</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ requirements</span><br><span class="line">â”‚   â”œâ”€â”€ base.txt</span><br><span class="line">â”‚   â”œâ”€â”€ dev.txt</span><br><span class="line">â”‚   â””â”€â”€ prod.txt</span><br></pre></td></tr></table></figure></p><p><strong>Qï¼šä¾èµ–å†²çªè‡ªåŠ¨è§£å†³ç¤ºä¾‹ï¼š</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç‰ˆæœ¬èŒƒå›´è¯­æ³•</span></span><br><span class="line">Django&gt;=<span class="number">3.2</span>,&lt;<span class="number">4.0</span></span><br><span class="line">requests&gt;=<span class="number">2.25</span><span class="number">.1</span>,!=<span class="number">2.28</span><span class="number">.0</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨Pythonå¼€å‘ä¸­ï¼Œæ‰‹åŠ¨ç»´æŠ¤requirements.txtæ–‡ä»¶å®¹æ˜“é—æ¼ä¾èµ–é¡¹ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œè®©ä¾èµ–ç®¡ç†æ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢å¼ºï¼‰&quot;&gt;&lt;a href=&quot;#æ–¹æ¡ˆä¸€ï¼šæ™ºèƒ½Shellåˆ«åï¼ˆåŸç”Ÿpipå¢
      
    
    </summary>
    
      <category term="python" scheme="https://www.silenceboy.com/categories/python/"/>
    
    
      <category term="python" scheme="https://www.silenceboy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ</title>
    <link href="https://www.silenceboy.com/2025/03/21/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E5%88%9B%E5%BB%BA%E3%80%81%E6%BF%80%E6%B4%BB%E3%80%81%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    <id>https://www.silenceboy.com/2025/03/21/Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºã€æ¿€æ´»ã€ç®¡ç†ä¸æœ€ä½³å®è·µ/</id>
    <published>2025-03-21T04:47:36.000Z</published>
    <updated>2025-03-21T04:49:00.909Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ"><a href="#å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ" class="headerlink" title="å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ"></a>å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ</h2><p>åœ¨Pythonå¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¾€å¾€ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“ã€‚å…¨å±€å®‰è£…çš„åŒ…å¯èƒ½å¯¼è‡´ç‰ˆæœ¬å†²çªï¼Œä¾‹å¦‚é¡¹ç›®Aéœ€è¦Django 3.2ï¼Œè€Œé¡¹ç›®Béœ€è¦Django 4.0ã€‚è™šæ‹Ÿç¯å¢ƒé€šè¿‡ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºéš”ç¦»çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå®Œç¾è§£å†³è¿™ä¸€éš¾é¢˜ã€‚</p><hr><h2 id="ä¸€ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#ä¸€ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä¸€ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>ä¸€ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><h3 id="1-ä½¿ç”¨å†…ç½®venvæ¨¡å—"><a href="#1-ä½¿ç”¨å†…ç½®venvæ¨¡å—" class="headerlink" title="1. ä½¿ç”¨å†…ç½®venvæ¨¡å—"></a>1. ä½¿ç”¨å†…ç½®venvæ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€‚ç”¨äºPython 3.3+ç‰ˆæœ¬</span></span><br><span class="line">python -m venv myenv  <span class="comment"># åˆ›å»ºåä¸ºmyenvçš„è™šæ‹Ÿç¯å¢ƒ</span></span><br></pre></td></tr></table></figure><h3 id="2-æŒ‡å®šPythonè§£é‡Šå™¨ç‰ˆæœ¬"><a href="#2-æŒ‡å®šPythonè§£é‡Šå™¨ç‰ˆæœ¬" class="headerlink" title="2. æŒ‡å®šPythonè§£é‡Šå™¨ç‰ˆæœ¬"></a>2. æŒ‡å®šPythonè§£é‡Šå™¨ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.8 -m venv py38_env  <span class="comment"># ä½¿ç”¨ç‰¹å®šPythonç‰ˆæœ¬åˆ›å»º</span></span><br></pre></td></tr></table></figure><h3 id="3-ç›®å½•ç»“æ„è§£æ"><a href="#3-ç›®å½•ç»“æ„è§£æ" class="headerlink" title="3. ç›®å½•ç»“æ„è§£æ"></a>3. ç›®å½•ç»“æ„è§£æ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myenv/</span><br><span class="line">â”œâ”€â”€ bin/            # Unixæ¿€æ´»è„šæœ¬</span><br><span class="line">â”œâ”€â”€ Scripts/        # Windowsæ¿€æ´»è„šæœ¬</span><br><span class="line">â”œâ”€â”€ Lib/            # å®‰è£…çš„ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">â””â”€â”€ pyvenv.cfg      # ç¯å¢ƒé…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><hr><h2 id="äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h2><h3 id="Windowsç³»ç»Ÿ"><a href="#Windowsç³»ç»Ÿ" class="headerlink" title="Windowsç³»ç»Ÿ"></a>Windowsç³»ç»Ÿ</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myenv\Scripts\activate</span><br><span class="line"><span class="comment"># å‘½ä»¤æç¤ºç¬¦æ˜¾ç¤º (myenv) C:\&gt;</span></span><br></pre></td></tr></table></figure><h3 id="macOS-Linuxç³»ç»Ÿ"><a href="#macOS-Linuxç³»ç»Ÿ" class="headerlink" title="macOS/Linuxç³»ç»Ÿ"></a>macOS/Linuxç³»ç»Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> myenv/bin/activate</span><br><span class="line"><span class="comment"># ç»ˆç«¯æç¤ºç¬¦æ˜¾ç¤º (myenv) $</span></span><br></pre></td></tr></table></figure><p><strong>éªŒè¯æ¿€æ´»çŠ¶æ€ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> python  <span class="comment"># Unix</span></span><br><span class="line"><span class="built_in">where</span> python  <span class="comment"># Windows</span></span><br></pre></td></tr></table></figure></p><hr><h2 id="ä¸‰ã€ç®¡ç†é¡¹ç›®ä¾èµ–"><a href="#ä¸‰ã€ç®¡ç†é¡¹ç›®ä¾èµ–" class="headerlink" title="ä¸‰ã€ç®¡ç†é¡¹ç›®ä¾èµ–"></a>ä¸‰ã€ç®¡ç†é¡¹ç›®ä¾èµ–</h2><h3 id="å®‰è£…ä¾èµ–åŒ…"><a href="#å®‰è£…ä¾èµ–åŒ…" class="headerlink" title="å®‰è£…ä¾èµ–åŒ…"></a>å®‰è£…ä¾èµ–åŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==3.2.12</span><br></pre></td></tr></table></figure><h3 id="å¯¼å‡ºä¾èµ–æ¸…å•"><a href="#å¯¼å‡ºä¾èµ–æ¸…å•" class="headerlink" title="å¯¼å‡ºä¾èµ–æ¸…å•"></a>å¯¼å‡ºä¾èµ–æ¸…å•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡å®‰è£…ä¾èµ–"><a href="#æ‰¹é‡å®‰è£…ä¾èµ–" class="headerlink" title="æ‰¹é‡å®‰è£…ä¾èµ–"></a>æ‰¹é‡å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><hr><h2 id="å››ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"><a href="#å››ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="å››ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"></a>å››ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br><span class="line"><span class="comment"># å‘½ä»¤æç¤ºç¬¦æ¢å¤é»˜è®¤çŠ¶æ€</span></span><br></pre></td></tr></table></figure><hr><h2 id="äº”ã€è¿›é˜¶æŠ€å·§ä¸å·¥å…·"><a href="#äº”ã€è¿›é˜¶æŠ€å·§ä¸å·¥å…·" class="headerlink" title="äº”ã€è¿›é˜¶æŠ€å·§ä¸å·¥å…·"></a>äº”ã€è¿›é˜¶æŠ€å·§ä¸å·¥å…·</h2><h3 id="1-è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯”"><a href="#1-è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯”" class="headerlink" title="1. è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯”"></a>1. è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯”</h3><table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>venv</td><td>Pythonå†…ç½®ï¼Œè½»é‡çº§</td><td>ç®€å•é¡¹ç›®</td></tr><tr><td>virtualenv</td><td>æ”¯æŒPython 2/3</td><td>å…¼å®¹æ—§é¡¹ç›®</td></tr><tr><td>pipenv</td><td>æ•´åˆpip+è™šæ‹Ÿç¯å¢ƒ</td><td>å¤æ‚ä¾èµ–ç®¡ç†</td></tr><tr><td>poetry</td><td>ä¾èµ–è§£æ+æ‰“åŒ…ä¸€ä½“åŒ–</td><td>ä¸“ä¸šé¡¹ç›®å¼€å‘</td></tr></tbody></table><h3 id="2-å¿«é€Ÿå¤åˆ¶ç¯å¢ƒ"><a href="#2-å¿«é€Ÿå¤åˆ¶ç¯å¢ƒ" class="headerlink" title="2. å¿«é€Ÿå¤åˆ¶ç¯å¢ƒ"></a>2. å¿«é€Ÿå¤åˆ¶ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨åŸç¯å¢ƒæ‰§è¡Œ</span></span><br><span class="line">pip list --format=freeze &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ–°ç¯å¢ƒæ‰§è¡Œ</span></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h3 id="3-ç¯å¢ƒé…ç½®åŠ é€Ÿ"><a href="#3-ç¯å¢ƒé…ç½®åŠ é€Ÿ" class="headerlink" title="3. ç¯å¢ƒé…ç½®åŠ é€Ÿ"></a>3. ç¯å¢ƒé…ç½®åŠ é€Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install pip --upgrade  <span class="comment"># å‡çº§pip</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple  <span class="comment"># å›½å†…é•œåƒæº</span></span><br></pre></td></tr></table></figure><hr><h2 id="å…­ã€æœ€ä½³å®è·µ"><a href="#å…­ã€æœ€ä½³å®è·µ" class="headerlink" title="å…­ã€æœ€ä½³å®è·µ"></a>å…­ã€æœ€ä½³å®è·µ</h2><ol><li><strong>é¡¹ç›®éš”ç¦»åŸåˆ™</strong>ï¼šæ¯ä¸ªç‹¬ç«‹é¡¹ç›®åˆ›å»ºä¸“å±è™šæ‹Ÿç¯å¢ƒ</li><li><p><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå°†requirements.txtåŠ å…¥Gitä»“åº“ï¼Œå¿½ç•¥è™šæ‹Ÿç¯å¢ƒç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># .gitignore</span><br><span class="line">myenv/</span><br><span class="line">venv/</span><br><span class="line">*.env/</span><br></pre></td></tr></table></figure></li><li><p><strong>å®šæœŸç»´æŠ¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip list --outdated  <span class="comment"># æ£€æŸ¥è¿‡æœŸåŒ…</span></span><br><span class="line">pip-autoremove  <span class="comment"># æ¸…ç†æ— ç”¨ä¾èµ–</span></span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æŒæ¡è™šæ‹Ÿç¯å¢ƒæ˜¯Pythonå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚é€šè¿‡<code>venv</code>åˆ›å»ºéš”ç¦»ç¯å¢ƒï¼Œé…åˆ<code>requirements.txt</code>ç®¡ç†ä¾èµ–ï¼Œèƒ½æœ‰æ•ˆé¿å…â€åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è¿è¡Œâ€çš„ç»å…¸é—®é¢˜ã€‚å»ºè®®ç«‹å³åœ¨æ‚¨çš„ä¸‹ä¸€ä¸ªPythoné¡¹ç›®ä¸­å®è·µè¿™äº›æŠ€å·§ï¼Œä½“éªŒæ›´å¹²å‡€çš„å¼€å‘ç¯å¢ƒï¼</p><blockquote><p><strong>æç¤º</strong>ï¼šåˆ é™¤è™šæ‹Ÿç¯å¢ƒåªéœ€åˆ é™¤å¯¹åº”ç›®å½•å³å¯ï¼Œä½†è¯·ç¡®ä¿å·²æ‰§è¡Œ<code>deactivate</code>é€€å‡ºç¯å¢ƒã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ&quot;&gt;&lt;a href=&quot;#å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ&quot;&gt;&lt;/a&gt;å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ&lt;/h2&gt;&lt;p&gt;åœ¨Pythonå¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¾€å¾€ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ç¬¬ä¸‰
      
    
    </summary>
    
      <category term="python" scheme="https://www.silenceboy.com/categories/python/"/>
    
    
      <category term="python" scheme="https://www.silenceboy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ASILç­‰çº§æ˜¯ä»€ä¹ˆ</title>
    <link href="https://www.silenceboy.com/2024/10/22/ASIL%E7%AD%89%E7%BA%A7%E6%98%AF%E4%BB%80%E4%B9%88/"/>
    <id>https://www.silenceboy.com/2024/10/22/ASILç­‰çº§æ˜¯ä»€ä¹ˆ/</id>
    <published>2024-10-22T06:45:40.000Z</published>
    <updated>2024-10-22T06:46:23.432Z</updated>
    
    <content type="html"><![CDATA[<p>ASILï¼ˆAutomotive Safety Integrity Levelï¼Œæ±½è½¦å®‰å…¨å®Œæ•´æ€§ç­‰çº§ï¼‰æ˜¯ISO 26262æ ‡å‡†ä¸­å®šä¹‰çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºè¯„ä¼°å’Œåˆ†ç±»æ±½è½¦ç”µå­ç³»ç»Ÿä¸­æ½œåœ¨æ•…éšœå¯¹å®‰å…¨çš„å½±å“ã€‚ASILç­‰çº§ä»Aåˆ°Dï¼Œå…±åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼Œå…¶ä¸­ASIL Dè¡¨ç¤ºæœ€é«˜çš„å®‰å…¨è¦æ±‚ï¼ŒASIL Aè¡¨ç¤ºæœ€ä½çš„å®‰å…¨è¦æ±‚ã€‚</p><h3 id="ASILç­‰çº§çš„å®šä¹‰"><a href="#ASILç­‰çº§çš„å®šä¹‰" class="headerlink" title="ASILç­‰çº§çš„å®šä¹‰"></a>ASILç­‰çº§çš„å®šä¹‰</h3><p>ASILç­‰çº§åŸºäºä¸‰ä¸ªä¸»è¦å› ç´ æ¥ç¡®å®šï¼š</p><ol><li><strong>ä¸¥é‡æ€§ï¼ˆSeverity, Sï¼‰</strong>ï¼šæ•…éšœå¯¼è‡´çš„æ½œåœ¨ä¼¤å®³çš„ä¸¥é‡ç¨‹åº¦ã€‚</li><li><strong>æš´éœ²ç‡ï¼ˆExposure, Eï¼‰</strong>ï¼šé©¾é©¶å‘˜æˆ–ä¹˜å®¢æš´éœ²äºæ½œåœ¨æ•…éšœçš„é¢‘ç‡ã€‚</li><li><strong>å¯æ§æ€§ï¼ˆControllability, Cï¼‰</strong>ï¼šé©¾é©¶å‘˜æˆ–ä¹˜å®¢åœ¨æ•…éšœå‘ç”Ÿæ—¶æ§åˆ¶è½¦è¾†çš„èƒ½åŠ›ã€‚</li></ol><h3 id="ASILç­‰çº§çš„åˆ’åˆ†"><a href="#ASILç­‰çº§çš„åˆ’åˆ†" class="headerlink" title="ASILç­‰çº§çš„åˆ’åˆ†"></a>ASILç­‰çº§çš„åˆ’åˆ†</h3><p>æ ¹æ®ä¸Šè¿°ä¸‰ä¸ªå› ç´ çš„ç»„åˆï¼ŒASILç­‰çº§å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ä¸ªçº§åˆ«ï¼š</p><ol><li><strong>ASIL A</strong>ï¼šæœ€ä½çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“è¾ƒå°ã€æš´éœ²ç‡ä½ä¸”å¯æ§æ€§é«˜çš„æƒ…å†µã€‚</li><li><strong>ASIL B</strong>ï¼šä¸­ç­‰å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“ä¸­ç­‰ã€æš´éœ²ç‡ä¸­ç­‰ä¸”å¯æ§æ€§ä¸€èˆ¬çš„æƒ…å†µã€‚</li><li><strong>ASIL C</strong>ï¼šè¾ƒé«˜çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“è¾ƒå¤§ã€æš´éœ²ç‡è¾ƒé«˜ä¸”å¯æ§æ€§è¾ƒä½çš„æƒ…å†µã€‚</li><li><strong>ASIL D</strong>ï¼šæœ€é«˜çš„å®‰å…¨è¦æ±‚ã€‚é€‚ç”¨äºæ•…éšœå¯¹å®‰å…¨å½±å“éå¸¸å¤§ã€æš´éœ²ç‡éå¸¸é«˜ä¸”å‡ ä¹ä¸å¯æ§çš„æƒ…å†µã€‚</li></ol><h3 id="ASILç­‰çº§çš„ç¡®å®š"><a href="#ASILç­‰çº§çš„ç¡®å®š" class="headerlink" title="ASILç­‰çº§çš„ç¡®å®š"></a>ASILç­‰çº§çš„ç¡®å®š</h3><p>ASILç­‰çº§çš„ç¡®å®šé€šå¸¸é€šè¿‡ä¸€ä¸ªé£é™©è¯„ä¼°çŸ©é˜µæ¥å®Œæˆï¼Œè¯¥çŸ©é˜µç»¼åˆè€ƒè™‘ä¸¥é‡æ€§ã€æš´éœ²ç‡å’Œå¯æ§æ€§ä¸‰ä¸ªå› ç´ ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹çŸ©é˜µï¼š</p><table><thead><tr><th>ä¸¥é‡æ€§/æš´éœ²ç‡/å¯æ§æ€§</th><th>E1ï¼ˆä½ï¼‰</th><th>E2ï¼ˆä¸­ä½ï¼‰</th><th>E3ï¼ˆä¸­é«˜ï¼‰</th><th>E4ï¼ˆé«˜ï¼‰</th></tr></thead><tbody><tr><td>S1ï¼ˆä½ï¼‰</td><td>QM</td><td>QM</td><td>ASIL A</td><td>ASIL A</td></tr><tr><td>S2ï¼ˆä¸­ï¼‰</td><td>QM</td><td>ASIL A</td><td>ASIL B</td><td>ASIL B</td></tr><tr><td>S3ï¼ˆé«˜ï¼‰</td><td>ASIL A</td><td>ASIL B</td><td>ASIL C</td><td>ASIL D</td></tr><tr><td>S4ï¼ˆæé«˜ï¼‰</td><td>ASIL B</td><td>ASIL C</td><td>ASIL D</td><td>ASIL D</td></tr></tbody></table><p><strong>æ³¨</strong>ï¼šQMï¼ˆQuality Managementï¼‰è¡¨ç¤ºä¸éœ€è¦ç‰¹åˆ«çš„å®‰å…¨æªæ–½ï¼Œåªéœ€æŒ‰ç…§è´¨é‡ç®¡ç†æ ‡å‡†è¿›è¡Œå¤„ç†ã€‚</p><h3 id="ASILç­‰çº§çš„åº”ç”¨"><a href="#ASILç­‰çº§çš„åº”ç”¨" class="headerlink" title="ASILç­‰çº§çš„åº”ç”¨"></a>ASILç­‰çº§çš„åº”ç”¨</h3><p>åœ¨æ±½è½¦ç”µå­ç³»ç»Ÿçš„è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¡®å®šASILç­‰çº§æ˜¯ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§çš„å…³é”®æ­¥éª¤ã€‚ä¸åŒçš„ASILç­‰çº§å¯¹åº”ä¸åŒçš„å¼€å‘æµç¨‹å’ŒéªŒè¯è¦æ±‚ï¼š</p><ul><li><strong>ASIL A</strong>ï¼šåŸºæœ¬çš„å®‰å…¨æªæ–½å’ŒéªŒè¯ã€‚</li><li><strong>ASIL B</strong>ï¼šéœ€è¦æ›´ä¸¥æ ¼çš„è®¾è®¡å’Œæµ‹è¯•æµç¨‹ã€‚</li><li><strong>ASIL C</strong>ï¼šéœ€è¦é«˜çº§çš„å®‰å…¨åˆ†æå’ŒéªŒè¯æŠ€æœ¯ã€‚</li><li><strong>ASIL D</strong>ï¼šéœ€è¦æœ€é«˜çº§åˆ«çš„å®‰å…¨æªæ–½ã€å†—ä½™è®¾è®¡å’Œå…¨é¢çš„éªŒè¯ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ASILç­‰çº§æ˜¯è¯„ä¼°å’Œç®¡ç†æ±½è½¦ç”µå­ç³»ç»Ÿå®‰å…¨æ€§çš„å…³é”®å·¥å…·ã€‚é€šè¿‡ç¡®å®šç³»ç»Ÿçš„ASILç­‰çº§ï¼Œå¼€å‘äººå‘˜å¯ä»¥é‡‡å–é€‚å½“çš„è®¾è®¡å’ŒéªŒè¯æªæ–½ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿåœ¨å„ç§å¯èƒ½çš„æ•…éšœæƒ…å†µä¸‹éƒ½èƒ½ä¿æŒå®‰å…¨æ€§ã€‚ISO 26262æ ‡å‡†æä¾›äº†è¯¦ç»†çš„æŒ‡å—å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘äººå‘˜åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å®ç°å’Œç»´æŠ¤æ‰€éœ€çš„å®‰å…¨å®Œæ•´æ€§ç­‰çº§ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ASILï¼ˆAutomotive Safety Integrity Levelï¼Œæ±½è½¦å®‰å…¨å®Œæ•´æ€§ç­‰çº§ï¼‰æ˜¯ISO 26262æ ‡å‡†ä¸­å®šä¹‰çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºè¯„ä¼°å’Œåˆ†ç±»æ±½è½¦ç”µå­ç³»ç»Ÿä¸­æ½œåœ¨æ•…éšœå¯¹å®‰å…¨çš„å½±å“ã€‚ASILç­‰çº§ä»Aåˆ°Dï¼Œå…±åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼Œå…¶ä¸­ASIL Dè¡¨ç¤ºæœ€é«˜çš„å®‰å…¨è¦æ±‚ï¼ŒASIL 
      
    
    </summary>
    
      <category term="ASIL" scheme="https://www.silenceboy.com/categories/ASIL/"/>
    
    
      <category term="ASIL" scheme="https://www.silenceboy.com/tags/ASIL/"/>
    
  </entry>
  
  <entry>
    <title>SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ</title>
    <link href="https://www.silenceboy.com/2024/10/21/SOC%E4%B8%AD%E9%99%A4%E4%BA%86R%E6%A0%B8%E5%92%8CA%E6%A0%B8%E8%BF%98%E6%9C%89%E5%93%AA%E4%BA%9B%E5%A4%84%E7%90%86%E5%99%A8%E6%A0%B8%E5%BF%83/"/>
    <id>https://www.silenceboy.com/2024/10/21/SOCä¸­é™¤äº†Ræ ¸å’ŒAæ ¸è¿˜æœ‰å“ªäº›å¤„ç†å™¨æ ¸å¿ƒ/</id>
    <published>2024-10-21T06:25:57.000Z</published>
    <updated>2024-10-21T06:26:19.127Z</updated>
    
    <content type="html"><![CDATA[<p>é™¤äº†Ræ ¸ï¼ˆå®æ—¶æ ¸å¿ƒï¼‰å’ŒAæ ¸ï¼ˆåº”ç”¨æ ¸å¿ƒï¼‰ï¼Œåœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoCï¼‰è®¾è®¡ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªæœ‰ç‰¹å®šçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ ¸å¿ƒç±»å‹ï¼š</p><h3 id="Mæ ¸ï¼ˆMicrocontroller-Coreï¼‰"><a href="#Mæ ¸ï¼ˆMicrocontroller-Coreï¼‰" class="headerlink" title="Mæ ¸ï¼ˆMicrocontroller Coreï¼‰"></a>Mæ ¸ï¼ˆMicrocontroller Coreï¼‰</h3><p>Mæ ¸é€šå¸¸æŒ‡çš„æ˜¯å¾®æ§åˆ¶å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºä½åŠŸè€—ã€ä½æˆæœ¬çš„åµŒå…¥å¼ç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯Mæ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>ä½åŠŸè€—</strong>ï¼šè®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘åŠŸè€—ï¼Œé€‚åˆç”µæ± ä¾›ç”µçš„è®¾å¤‡ã€‚</li><li><strong>ç®€å•æ¶æ„</strong>ï¼šé€šå¸¸å…·æœ‰è¾ƒç®€å•çš„æŒ‡ä»¤é›†å’Œæ¶æ„ï¼Œæ˜“äºç¼–ç¨‹å’Œè°ƒè¯•ã€‚</li><li><strong>é›†æˆå¤–è®¾</strong>ï¼šé€šå¸¸é›†æˆäº†ä¸°å¯Œçš„å¤–è®¾æ¥å£ï¼Œå¦‚ADCã€DACã€UARTã€I2Cã€SPIç­‰ã€‚</li><li><strong>å®æ—¶æ€§</strong>ï¼šè™½ç„¶ä¸å¦‚Ræ ¸é‚£æ ·ä¸¥æ ¼ï¼Œä½†ä¹Ÿèƒ½å¤„ç†ä¸€äº›å®æ—¶ä»»åŠ¡ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>å®¶ç”¨ç”µå™¨</li><li>ä¼ æ„Ÿå™¨èŠ‚ç‚¹</li><li>ç®€å•æ§åˆ¶ç³»ç»Ÿ</li><li>ç‰©è”ç½‘è®¾å¤‡</li></ul><h3 id="NPUï¼ˆNeural-Processing-Unitï¼‰"><a href="#NPUï¼ˆNeural-Processing-Unitï¼‰" class="headerlink" title="NPUï¼ˆNeural Processing Unitï¼‰"></a>NPUï¼ˆNeural Processing Unitï¼‰</h3><p>NPUæ˜¯ç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼Œä¸“é—¨ç”¨äºåŠ é€Ÿæ·±åº¦å­¦ä¹ å’Œäººå·¥æ™ºèƒ½ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯NPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>é«˜æ•ˆè®¡ç®—</strong>ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºçŸ©é˜µè¿ç®—å’Œå·ç§¯æ“ä½œï¼Œé€‚åˆæ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ¨ç†å’Œè®­ç»ƒã€‚</li><li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šå…·æœ‰é«˜åº¦å¹¶è¡Œçš„è®¡ç®—èƒ½åŠ›ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡æ•°æ®ã€‚</li><li><strong>ä½åŠŸè€—</strong>ï¼šç›¸å¯¹äºé€šç”¨å¤„ç†å™¨ï¼ŒNPUåœ¨æ‰§è¡ŒAIä»»åŠ¡æ—¶å…·æœ‰æ›´é«˜çš„èƒ½æ•ˆæ¯”ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯-1"><a href="#åº”ç”¨åœºæ™¯-1" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>å›¾åƒå’Œè§†é¢‘å¤„ç†</li><li>è¯­éŸ³è¯†åˆ«</li><li>è‡ªç„¶è¯­è¨€å¤„ç†</li><li>è‡ªåŠ¨é©¾é©¶</li></ul><h3 id="DSPï¼ˆDigital-Signal-Processorï¼‰"><a href="#DSPï¼ˆDigital-Signal-Processorï¼‰" class="headerlink" title="DSPï¼ˆDigital Signal Processorï¼‰"></a>DSPï¼ˆDigital Signal Processorï¼‰</h3><p>DSPæ˜¯æ•°å­—ä¿¡å·å¤„ç†å™¨ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ•°å­—ä¿¡å·ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘å’Œé€šä¿¡ä¿¡å·ã€‚ä»¥ä¸‹æ˜¯DSPçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>é«˜æ•ˆä¿¡å·å¤„ç†</strong>ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰ã€æ»¤æ³¢å’Œå…¶ä»–ä¿¡å·å¤„ç†ç®—æ³•ã€‚</li><li><strong>å®æ—¶å¤„ç†</strong>ï¼šèƒ½å¤Ÿå®æ—¶å¤„ç†è¾“å…¥ä¿¡å·ï¼Œé€‚åˆå®æ—¶éŸ³é¢‘å’Œè§†é¢‘å¤„ç†ã€‚</li><li><strong>ä½å»¶è¿Ÿ</strong>ï¼šè®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘å¤„ç†å»¶è¿Ÿï¼Œç¡®ä¿ä¿¡å·å¤„ç†çš„å®æ—¶æ€§ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯-2"><a href="#åº”ç”¨åœºæ™¯-2" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>éŸ³é¢‘å¤„ç†ï¼ˆå¦‚å›å£°æ¶ˆé™¤ã€é™å™ªï¼‰</li><li>è§†é¢‘å¤„ç†ï¼ˆå¦‚ç¼–ç ã€è§£ç ï¼‰</li><li>é€šä¿¡ç³»ç»Ÿï¼ˆå¦‚è°ƒåˆ¶ã€è§£è°ƒï¼‰</li><li>é›·è¾¾å’Œå£°çº³</li></ul><h3 id="GPUï¼ˆGraphics-Processing-Unitï¼‰"><a href="#GPUï¼ˆGraphics-Processing-Unitï¼‰" class="headerlink" title="GPUï¼ˆGraphics Processing Unitï¼‰"></a>GPUï¼ˆGraphics Processing Unitï¼‰</h3><p>GPUæ˜¯å›¾å½¢å¤„ç†å•å…ƒï¼Œä¸»è¦ç”¨äºå›¾å½¢æ¸²æŸ“å’Œè®¡ç®—åŠ é€Ÿã€‚ä»¥ä¸‹æ˜¯GPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>é«˜å¹¶è¡Œæ€§</strong>ï¼šå…·æœ‰å¤§é‡å¹¶è¡Œå¤„ç†å•å…ƒï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡æ•°æ®ã€‚</li><li><strong>å›¾å½¢æ¸²æŸ“</strong>ï¼šä¸“é—¨ç”¨äºå¤„ç†å›¾å½¢æ¸²æŸ“ä»»åŠ¡ï¼Œå¦‚3Då›¾å½¢ã€æ¸¸æˆå›¾å½¢ç­‰ã€‚</li><li><strong>é€šç”¨è®¡ç®—</strong>ï¼šè¿‘å¹´æ¥ï¼ŒGPUä¹Ÿè¢«å¹¿æ³›ç”¨äºé€šç”¨è®¡ç®—ï¼ˆGPGPUï¼‰ï¼Œå¦‚ç§‘å­¦è®¡ç®—ã€æœºå™¨å­¦ä¹ ç­‰ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯-3"><a href="#åº”ç”¨åœºæ™¯-3" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>æ¸¸æˆå’Œå¨±ä¹</li><li>å›¾å½¢è®¾è®¡å’Œæ¸²æŸ“</li><li>ç§‘å­¦è®¡ç®—</li><li>æ·±åº¦å­¦ä¹ </li></ul><h3 id="VPUï¼ˆVision-Processing-Unitï¼‰"><a href="#VPUï¼ˆVision-Processing-Unitï¼‰" class="headerlink" title="VPUï¼ˆVision Processing Unitï¼‰"></a>VPUï¼ˆVision Processing Unitï¼‰</h3><p>VPUæ˜¯è§†è§‰å¤„ç†å•å…ƒï¼Œä¸“é—¨ç”¨äºå¤„ç†è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯VPUçš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>ä¼˜åŒ–è§†è§‰ä»»åŠ¡</strong>ï¼šä¸“é—¨ä¼˜åŒ–ç”¨äºå›¾åƒå’Œè§†é¢‘å¤„ç†ä»»åŠ¡ï¼Œå¦‚å¯¹è±¡æ£€æµ‹ã€å›¾åƒè¯†åˆ«ç­‰ã€‚</li><li><strong>é«˜æ•ˆèƒ½æ•ˆæ¯”</strong>ï¼šåœ¨å¤„ç†è§†è§‰ä»»åŠ¡æ—¶å…·æœ‰é«˜æ•ˆçš„èƒ½æ•ˆæ¯”ã€‚</li><li><strong>å®æ—¶å¤„ç†</strong>ï¼šèƒ½å¤Ÿå®æ—¶å¤„ç†å›¾åƒå’Œè§†é¢‘æ•°æ®ï¼Œé€‚åˆå®æ—¶åº”ç”¨ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯-4"><a href="#åº”ç”¨åœºæ™¯-4" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>è®¡ç®—æœºè§†è§‰</li><li>å¢å¼ºç°å®ï¼ˆARï¼‰å’Œè™šæ‹Ÿç°å®ï¼ˆVRï¼‰</li><li>è‡ªåŠ¨é©¾é©¶</li><li>å®‰å…¨ç›‘æ§</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨ç°ä»£SoCè®¾è®¡ä¸­ï¼Œé™¤äº†Ræ ¸å’ŒAæ ¸ï¼Œè¿˜æœ‰å¤šç§ç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå¦‚Mæ ¸ã€NPUã€DSPã€GPUå’ŒVPUç­‰ã€‚æ¯ç§æ ¸å¿ƒéƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œä¼˜åŠ¿ï¼Œé€šè¿‡ç»„åˆä½¿ç”¨è¿™äº›æ ¸å¿ƒï¼ŒSoCèƒ½å¤Ÿåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šå®ç°å¤šç§åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é™¤äº†Ræ ¸ï¼ˆå®æ—¶æ ¸å¿ƒï¼‰å’ŒAæ ¸ï¼ˆåº”ç”¨æ ¸å¿ƒï¼‰ï¼Œåœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoCï¼‰è®¾è®¡ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªæœ‰ç‰¹å®šçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ ¸å¿ƒç±»å‹ï¼š&lt;/p&gt;
&lt;h3 id=&quot;Mæ ¸ï¼ˆMicrocontroller-Coreï¼‰&quot;&gt;&lt;a href=&quot;#Mæ ¸ï¼ˆMicrocontr
      
    
    </summary>
    
      <category term="SoC" scheme="https://www.silenceboy.com/categories/SoC/"/>
    
    
      <category term="SoC" scheme="https://www.silenceboy.com/tags/SoC/"/>
    
  </entry>
  
  <entry>
    <title>SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«</title>
    <link href="https://www.silenceboy.com/2024/10/21/SOC%E7%9A%84R%E6%A0%B8%E3%80%81A%E6%A0%B8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/"/>
    <id>https://www.silenceboy.com/2024/10/21/SOCçš„Ræ ¸ã€Aæ ¸æœ‰ä»€ä¹ˆåŒºåˆ«/</id>
    <published>2024-10-21T06:22:57.000Z</published>
    <updated>2024-10-21T06:23:53.596Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoC, System on Chipï¼‰è®¾è®¡ä¸­ï¼ŒRæ ¸å’ŒAæ ¸æ˜¯æŒ‡ä¸åŒç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªå…·æœ‰ä¸åŒçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚</p><h3 id="Ræ ¸ï¼ˆReal-time-Coreï¼‰"><a href="#Ræ ¸ï¼ˆReal-time-Coreï¼‰" class="headerlink" title="Ræ ¸ï¼ˆReal-time Coreï¼‰"></a>Ræ ¸ï¼ˆReal-time Coreï¼‰</h3><p>Ræ ¸é€šå¸¸æŒ‡çš„æ˜¯å®æ—¶å¤„ç†å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºå¤„ç†å®æ—¶ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯Ræ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>å®æ—¶æ€§</strong>ï¼šRæ ¸è®¾è®¡ç”¨äºå¤„ç†éœ€è¦ä¸¥æ ¼æ—¶é—´çº¦æŸçš„ä»»åŠ¡ï¼Œç¡®ä¿ä»»åŠ¡åœ¨è§„å®šæ—¶é—´å†…å®Œæˆã€‚</li><li><strong>ç¡®å®šæ€§</strong>ï¼šRæ ¸é€šå¸¸å…·æœ‰ç¡®å®šçš„å“åº”æ—¶é—´ï¼Œé€‚åˆç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ã€‚</li><li><strong>ä½å»¶è¿Ÿ</strong>ï¼šRæ ¸çš„è®¾è®¡ç›®æ ‡æ˜¯å°½é‡å‡å°‘å¤„ç†å»¶è¿Ÿï¼Œä»¥ç¡®ä¿å¿«é€Ÿå“åº”å¤–éƒ¨äº‹ä»¶ã€‚</li><li><strong>ä½åŠŸè€—</strong>ï¼šRæ ¸é€šå¸¸åŠŸè€—è¾ƒä½ï¼Œé€‚åˆç”¨äºç”µæ± ä¾›ç”µçš„åµŒå…¥å¼è®¾å¤‡ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>å·¥ä¸šè‡ªåŠ¨åŒ–æ§åˆ¶</li><li>æ±½è½¦ç”µå­ï¼ˆå¦‚å¼•æ“æ§åˆ¶å•å…ƒï¼‰</li><li>åŒ»ç–—è®¾å¤‡</li><li>ç‰©è”ç½‘è®¾å¤‡</li></ul><h3 id="Aæ ¸ï¼ˆApplication-Coreï¼‰"><a href="#Aæ ¸ï¼ˆApplication-Coreï¼‰" class="headerlink" title="Aæ ¸ï¼ˆApplication Coreï¼‰"></a>Aæ ¸ï¼ˆApplication Coreï¼‰</h3><p>Aæ ¸é€šå¸¸æŒ‡çš„æ˜¯åº”ç”¨å¤„ç†å™¨æ ¸å¿ƒï¼Œä¸»è¦ç”¨äºè¿è¡Œå¤æ‚çš„åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯Aæ ¸çš„ä¸€äº›ç‰¹ç‚¹å’Œåº”ç”¨ï¼š</p><ol><li><strong>é«˜æ€§èƒ½</strong>ï¼šAæ ¸è®¾è®¡ç”¨äºå¤„ç†å¤æ‚è®¡ç®—ä»»åŠ¡ï¼Œå…·æœ‰è¾ƒé«˜çš„å¤„ç†èƒ½åŠ›ã€‚</li><li><strong>å¤šä»»åŠ¡å¤„ç†</strong>ï¼šAæ ¸é€šå¸¸æ”¯æŒå¤šä»»åŠ¡å¤„ç†ï¼Œèƒ½å¤Ÿè¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚Linuxã€Androidï¼‰ã€‚</li><li><strong>ä¸°å¯Œçš„å¤–è®¾æ”¯æŒ</strong>ï¼šAæ ¸é€šå¸¸é›†æˆäº†ä¸°å¯Œçš„å¤–è®¾æ¥å£ï¼Œå¦‚USBã€HDMIã€ä»¥å¤ªç½‘ç­‰ã€‚</li><li><strong>è¾ƒé«˜åŠŸè€—</strong>ï¼šç”±äºéœ€è¦å¤„ç†å¤æ‚ä»»åŠ¡ï¼ŒAæ ¸çš„åŠŸè€—é€šå¸¸è¾ƒé«˜ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯-1"><a href="#åº”ç”¨åœºæ™¯-1" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘</li><li>ä¸ªäººè®¡ç®—æœº</li><li>å¤šåª’ä½“è®¾å¤‡ï¼ˆå¦‚æ™ºèƒ½ç”µè§†å’Œæœºé¡¶ç›’ï¼‰</li><li>é«˜çº§åµŒå…¥å¼ç³»ç»Ÿï¼ˆå¦‚æ— äººæœºå’Œæœºå™¨äººï¼‰</li></ul><h3 id="ä¾‹å­ï¼šARM-Cortex-ç³»åˆ—"><a href="#ä¾‹å­ï¼šARM-Cortex-ç³»åˆ—" class="headerlink" title="ä¾‹å­ï¼šARM Cortex ç³»åˆ—"></a>ä¾‹å­ï¼šARM Cortex ç³»åˆ—</h3><p>åœ¨ARMçš„Cortexç³»åˆ—å¤„ç†å™¨ä¸­ï¼ŒRæ ¸å’ŒAæ ¸çš„åŒºåˆ«éå¸¸æ˜æ˜¾ï¼š</p><ul><li><strong>Cortex-R ç³»åˆ—</strong>ï¼šè¿™æ˜¯ARMçš„å®æ—¶å¤„ç†å™¨ç³»åˆ—ï¼Œè®¾è®¡ç”¨äºé«˜å¯é æ€§å’Œå®æ—¶æ€§åº”ç”¨ï¼Œå¦‚Cortex-R5å’ŒCortex-R8ã€‚</li><li><strong>Cortex-A ç³»åˆ—</strong>ï¼šè¿™æ˜¯ARMçš„åº”ç”¨å¤„ç†å™¨ç³»åˆ—ï¼Œè®¾è®¡ç”¨äºé«˜æ€§èƒ½å’Œå¤æ‚åº”ç”¨ï¼Œå¦‚Cortex-A53ã€Cortex-A72ç­‰ã€‚</li></ul><h3 id="SoCä¸­çš„ç»„åˆ"><a href="#SoCä¸­çš„ç»„åˆ" class="headerlink" title="SoCä¸­çš„ç»„åˆ"></a>SoCä¸­çš„ç»„åˆ</h3><p>åœ¨è®¸å¤šSoCè®¾è®¡ä¸­ï¼ŒRæ ¸å’ŒAæ ¸å¸¸å¸¸è¢«ç»„åˆä½¿ç”¨ï¼Œä»¥ä¾¿åŒæ—¶æ»¡è¶³å®æ—¶å¤„ç†å’Œé«˜æ€§èƒ½è®¡ç®—çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š</p><ul><li><strong>æ™ºèƒ½æ‰‹æœºSoC</strong>ï¼šé€šå¸¸åŒ…å«å¤šä¸ªCortex-Aç³»åˆ—æ ¸å¿ƒç”¨äºè¿è¡Œæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼ŒåŒæ—¶å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªCortex-Rç³»åˆ—æ ¸å¿ƒç”¨äºå¤„ç†å®æ—¶ä»»åŠ¡ï¼Œå¦‚åŸºå¸¦å¤„ç†ã€‚</li><li><strong>æ±½è½¦ç”µå­SoC</strong>ï¼šå¯èƒ½åŒ…å«Cortex-Rç³»åˆ—æ ¸å¿ƒç”¨äºå¼•æ“æ§åˆ¶å’Œå®‰å…¨ç³»ç»Ÿï¼ŒåŒæ—¶åŒ…å«Cortex-Aç³»åˆ—æ ¸å¿ƒç”¨äºä¿¡æ¯å¨±ä¹ç³»ç»Ÿã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><strong>Ræ ¸ï¼ˆReal-time Coreï¼‰</strong>ï¼šç”¨äºå®æ—¶ä»»åŠ¡ï¼Œå¼ºè°ƒä½å»¶è¿Ÿå’Œç¡®å®šæ€§ï¼Œé€‚åˆå·¥ä¸šæ§åˆ¶ã€æ±½è½¦ç”µå­ç­‰é¢†åŸŸã€‚</li><li><strong>Aæ ¸ï¼ˆApplication Coreï¼‰</strong>ï¼šç”¨äºè¿è¡Œå¤æ‚åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿï¼Œå¼ºè°ƒé«˜æ€§èƒ½å’Œå¤šä»»åŠ¡å¤„ç†ï¼Œé€‚åˆæ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç”µè„‘ç­‰è®¾å¤‡ã€‚</li></ul><p>é€šè¿‡ç»“åˆä½¿ç”¨Ræ ¸å’ŒAæ ¸ï¼ŒSoCèƒ½å¤Ÿåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šå®ç°å¤šç§åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSoC, System on Chipï¼‰è®¾è®¡ä¸­ï¼ŒRæ ¸å’ŒAæ ¸æ˜¯æŒ‡ä¸åŒç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå®ƒä»¬å„è‡ªå…·æœ‰ä¸åŒçš„ç”¨é€”å’Œç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Ræ ¸ï¼ˆReal-time-Coreï¼‰&quot;&gt;&lt;a href=&quot;#Ræ ¸ï¼ˆReal-time-Coreï¼‰&quot; class=&quot;hea
      
    
    </summary>
    
      <category term="SoC" scheme="https://www.silenceboy.com/categories/SoC/"/>
    
    
      <category term="SoC" scheme="https://www.silenceboy.com/tags/SoC/"/>
    
  </entry>
  
  <entry>
    <title>dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ</title>
    <link href="https://www.silenceboy.com/2024/06/28/docker%E5%AE%B9%E5%99%A8%E9%BB%98%E8%AE%A4%E7%94%A8%E6%88%B7%E9%9D%9Eroot%EF%BC%8C%E4%B8%94%E4%B8%8D%E7%9F%A5%E9%81%93%E5%AF%86%E7%A0%81%EF%BC%8C%E6%97%A0%E6%B3%95%E6%89%A7%E8%A1%8Csudo%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%AF%A5%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F/"/>
    <id>https://www.silenceboy.com/2024/06/28/dockerå®¹å™¨é»˜è®¤ç”¨æˆ·érootï¼Œä¸”ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œsudoæ“ä½œï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ/</id>
    <published>2024-06-28T07:22:18.000Z</published>
    <updated>2024-06-28T07:23:01.137Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ åœ¨ Docker å®¹å™¨ä¸­é»˜è®¤ç”¨æˆ·æ˜¯ <code>dev</code>ï¼Œä½†ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œ <code>sudo</code> æ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><h3 id="æ–¹æ³•ä¸€ï¼šä»¥-root-ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨"><a href="#æ–¹æ³•ä¸€ï¼šä»¥-root-ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä»¥ root ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨"></a>æ–¹æ³•ä¸€ï¼šä»¥ root ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨</h3><p>ä½ å¯ä»¥ä»¥ <code>root</code> ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç„¶åæ›´æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç æˆ–è€…ç›´æ¥æ‰§è¡Œä½ éœ€è¦çš„æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u root -it &lt;container_id_or_name&gt; /bin/bash</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šä¿®æ”¹-Dockerfile-é‡æ–°æ„å»ºé•œåƒ"><a href="#æ–¹æ³•äºŒï¼šä¿®æ”¹-Dockerfile-é‡æ–°æ„å»ºé•œåƒ" class="headerlink" title="æ–¹æ³•äºŒï¼šä¿®æ”¹ Dockerfile é‡æ–°æ„å»ºé•œåƒ"></a>æ–¹æ³•äºŒï¼šä¿®æ”¹ Dockerfile é‡æ–°æ„å»ºé•œåƒ</h3><p>å¦‚æœä½ æœ‰ Dockerfileï¼Œå¯ä»¥ä¿®æ”¹ Dockerfile æ¥è®¾ç½® <code>dev</code> ç”¨æˆ·çš„å¯†ç æˆ–è€…ç›´æ¥ä½¿ç”¨ <code>root</code> ç”¨æˆ·ã€‚</p><p>ä¾‹å¦‚ï¼Œä¿®æ”¹ Dockerfile æ¥è®¾ç½® <code>dev</code> ç”¨æˆ·çš„å¯†ç ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> your_base_image</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® dev ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'dev:your_new_password'</span> | chpasswd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»– Dockerfile æŒ‡ä»¤</span></span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°æ„å»ºé•œåƒå¹¶è¿è¡Œå®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t your_image_name .</span><br><span class="line">docker run -it your_image_name</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®"><a href="#æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®"></a>æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®</h3><p>å¦‚æœä½ æ²¡æœ‰ Dockerfileï¼Œä½†å¯ä»¥è®¿é—®å®¹å™¨çš„é•œåƒï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå¹¶ä¿®æ”¹ç”¨æˆ·é…ç½®ã€‚</p><ol><li><p>é¦–å…ˆï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿›å…¥ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name temp_container your_image_name /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å®¹å™¨ä¸­ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'dev:your_new_password'</span> | chpasswd</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºå®¹å™¨å¹¶æäº¤æ›´æ”¹ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">docker commit temp_container your_new_image_name</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ–°çš„é•œåƒå¯åŠ¨å®¹å™¨ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it your_new_image_name</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ–¹æ³•å››ï¼šç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹å¯†ç "><a href="#æ–¹æ³•å››ï¼šç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹å¯†ç " class="headerlink" title="æ–¹æ³•å››ï¼šç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹å¯†ç "></a>æ–¹æ³•å››ï¼šç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹å¯†ç </h3><p>å¦‚æœå®¹å™¨å·²ç»åœ¨è¿è¡Œï¼Œä½ å¯ä»¥ç›´æ¥è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç ã€‚</p><ol><li><p>é¦–å…ˆï¼Œä»¥ <code>root</code> ç”¨æˆ·è¿›å…¥å®¹å™¨ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u root -it &lt;container_id_or_name&gt; /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å®¹å™¨ä¸­ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'dev:your_new_password'</span> | chpasswd</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ–¹æ³•äº”ï¼šä½¿ç”¨-docker-commit-ä¿®æ”¹ç°æœ‰å®¹å™¨"><a href="#æ–¹æ³•äº”ï¼šä½¿ç”¨-docker-commit-ä¿®æ”¹ç°æœ‰å®¹å™¨" class="headerlink" title="æ–¹æ³•äº”ï¼šä½¿ç”¨ docker commit ä¿®æ”¹ç°æœ‰å®¹å™¨"></a>æ–¹æ³•äº”ï¼šä½¿ç”¨ <code>docker commit</code> ä¿®æ”¹ç°æœ‰å®¹å™¨</h3><p>å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker commit</code> æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶åœ¨æ–°é•œåƒä¸­ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç ã€‚</p><ol><li><p>é¦–å…ˆï¼Œä»¥ <code>root</code> ç”¨æˆ·è¿›å…¥å®¹å™¨ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u root -it &lt;container_id_or_name&gt; /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å®¹å™¨ä¸­ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'dev:your_new_password'</span> | chpasswd</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºå®¹å™¨å¹¶æäº¤æ›´æ”¹ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">docker commit &lt;container_id_or_name&gt; your_new_image_name</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ–°çš„é•œåƒå¯åŠ¨å®¹å™¨ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it your_new_image_name</span><br></pre></td></tr></table></figure></li></ol><p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥è§£å†³æ— æ³•æ‰§è¡Œ <code>sudo</code> æ“ä½œçš„é—®é¢˜ï¼Œå¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ <code>dev</code> ç”¨æˆ·çš„å¯†ç æˆ–ç›´æ¥ä½¿ç”¨ <code>root</code> ç”¨æˆ·ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¦‚æœä½ åœ¨ Docker å®¹å™¨ä¸­é»˜è®¤ç”¨æˆ·æ˜¯ &lt;code&gt;dev&lt;/code&gt;ï¼Œä½†ä¸çŸ¥é“å¯†ç ï¼Œæ— æ³•æ‰§è¡Œ &lt;code&gt;sudo&lt;/code&gt; æ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;h3 id=&quot;æ–¹æ³•ä¸€ï¼šä»¥-root-ç”¨æˆ·é‡æ–°å¯åŠ¨å®¹å™¨&quot;&gt;&lt;a href=&quot;#æ–¹æ³•ä¸€
      
    
    </summary>
    
      <category term="docker" scheme="https://www.silenceboy.com/categories/docker/"/>
    
    
      <category term="docker" scheme="https://www.silenceboy.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”</title>
    <link href="https://www.silenceboy.com/2024/06/24/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7%EF%BC%9Asonar%E3%80%81fireline%E3%80%81coverity%E3%80%81fortify%E3%80%81blackduck%E5%AF%B9%E6%AF%94/"/>
    <id>https://www.silenceboy.com/2024/06/24/ä»£ç æ‰«æå·¥å…·ï¼šsonarã€firelineã€coverityã€fortifyã€blackduckå¯¹æ¯”/</id>
    <published>2024-06-24T08:02:01.000Z</published>
    <updated>2024-06-24T08:10:17.375Z</updated>
    
    <content type="html"><![CDATA[<p>ä»£ç æ‰«æå·¥å…·åœ¨è½¯ä»¶å¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œå®ƒä»¬å¸®åŠ©å¼€å‘è€…è¯†åˆ«å’Œä¿®å¤ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯å¯¹ SonarQubeã€Firelineã€Coverityã€Fortify å’Œ Black Duck çš„ä»‹ç»åŠå…¶åŒºåˆ«ï¼š</p><h3 id="1-SonarQube"><a href="#1-SonarQube" class="headerlink" title="1. SonarQube"></a>1. SonarQube</h3><p><strong>ç®€ä»‹</strong>:</p><ul><li>SonarQube æ˜¯ä¸€ä¸ªå¼€æºçš„ä»£ç è´¨é‡ç®¡ç†å·¥å…·ã€‚</li><li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Javaã€C#ã€JavaScriptã€TypeScriptã€Python ç­‰ã€‚</li></ul><p><strong>åŠŸèƒ½</strong>:</p><ul><li>é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„æ¼æ´ã€é”™è¯¯å’Œä»£ç å¼‚å‘³ã€‚</li><li>ä»£ç åº¦é‡ï¼šæä¾›ä»£ç è¦†ç›–ç‡ã€å¤æ‚åº¦ç­‰åº¦é‡æŒ‡æ ‡ã€‚</li><li>é›†æˆï¼šä¸ CI/CD å·¥å…·ï¼ˆå¦‚ Jenkinsã€GitLab CIï¼‰é›†æˆï¼Œè‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æŸ¥ã€‚</li></ul><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>å¼€æºä¸”ç¤¾åŒºæ´»è·ƒã€‚</li><li>æ”¯æŒå¤šç§æ’ä»¶ï¼Œæ‰©å±•åŠŸèƒ½å¼ºå¤§ã€‚</li><li>ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œæ˜“äºä½¿ç”¨ã€‚</li></ul><h3 id="2-Fireline"><a href="#2-Fireline" class="headerlink" title="2. Fireline"></a>2. Fireline</h3><p><strong>ç®€ä»‹</strong>:</p><ul><li>Fireline æ˜¯ä¸€ä¸ªä¸“æ³¨äºä»£ç å®‰å…¨çš„é™æ€åˆ†æå·¥å…·ã€‚</li></ul><p><strong>åŠŸèƒ½</strong>:</p><ul><li>æ£€æµ‹ä»£ç ä¸­çš„å®‰å…¨æ¼æ´ï¼Œå¦‚ SQL æ³¨å…¥ã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ç­‰ã€‚</li><li>æä¾›è¯¦ç»†çš„æ¼æ´æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ã€‚</li></ul><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>ä¸“æ³¨äºå®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæä¾›æ·±åº¦åˆ†æã€‚</li><li>é€‚ç”¨äºéœ€è¦é«˜å®‰å…¨æ€§çš„åº”ç”¨ç¨‹åºå¼€å‘ã€‚</li></ul><h3 id="3-Coverity"><a href="#3-Coverity" class="headerlink" title="3. Coverity"></a>3. Coverity</h3><p><strong>ç®€ä»‹</strong>:</p><ul><li>Coverity æ˜¯ Synopsys æä¾›çš„é™æ€ä»£ç åˆ†æå·¥å…·ã€‚</li><li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Cã€C++ã€Javaã€C#ã€JavaScript ç­‰ã€‚</li></ul><p><strong>åŠŸèƒ½</strong>:</p><ul><li>é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„ç¼ºé™·å’Œå®‰å…¨æ¼æ´ã€‚</li><li>è‡ªåŠ¨åŒ–åˆ†æï¼šä¸ CI/CD å·¥å…·é›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–ä»£ç æ‰«æã€‚</li><li>æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ï¼šæä¾›è¯¦ç»†çš„ç¼ºé™·æŠ¥å‘Šå’Œä¿®å¤å»ºè®®ã€‚</li></ul><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>é«˜å‡†ç¡®æ€§å’Œä½è¯¯æŠ¥ç‡ã€‚</li><li>å¼ºå¤§çš„ä¼ä¸šçº§æ”¯æŒå’ŒæœåŠ¡ã€‚</li><li>æ”¯æŒå¹¿æ³›çš„ç¼–ç¨‹è¯­è¨€å’Œå¤æ‚ä»£ç åº“ã€‚</li></ul><h3 id="4-Fortify"><a href="#4-Fortify" class="headerlink" title="4. Fortify"></a>4. Fortify</h3><p><strong>ç®€ä»‹</strong>:</p><ul><li>Fortify æ˜¯ Micro Focus æä¾›çš„åº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·ã€‚</li><li>åŒ…å«é™æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆSASTï¼‰å’ŒåŠ¨æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆDASTï¼‰ã€‚</li></ul><p><strong>åŠŸèƒ½</strong>:</p><ul><li>é™æ€ä»£ç åˆ†æï¼šæ£€æµ‹ä»£ç ä¸­çš„å®‰å…¨æ¼æ´ã€‚</li><li>åŠ¨æ€åˆ†æï¼šåœ¨è¿è¡Œæ—¶æ£€æµ‹åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´ã€‚</li><li>å®‰å…¨å®¡è®¡å’Œåˆè§„æ€§æ£€æŸ¥ã€‚</li></ul><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>ç»¼åˆçš„å®‰å…¨æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼Œè¦†ç›–é™æ€å’ŒåŠ¨æ€åˆ†æã€‚</li><li>å¼ºå¤§çš„ä¼ä¸šçº§æ”¯æŒå’ŒæœåŠ¡ã€‚</li><li>æä¾›è¯¦ç»†çš„æ¼æ´ä¿®å¤æŒ‡å¯¼ã€‚</li></ul><h3 id="5-Black-Duck"><a href="#5-Black-Duck" class="headerlink" title="5. Black Duck"></a>5. Black Duck</h3><p><strong>ç®€ä»‹</strong>:</p><ul><li>Black Duck æ˜¯ Synopsys æä¾›çš„å¼€æºå®‰å…¨å’Œç®¡ç†å·¥å…·ã€‚</li><li>ä¸“æ³¨äºå¼€æºç»„ä»¶çš„å®‰å…¨å’Œåˆè§„æ€§ã€‚</li></ul><p><strong>åŠŸèƒ½</strong>:</p><ul><li>å¼€æºç»„ä»¶æ‰«æï¼šæ£€æµ‹é¡¹ç›®ä¸­ä½¿ç”¨çš„å¼€æºç»„ä»¶ã€‚</li><li>æ¼æ´æ£€æµ‹ï¼šè¯†åˆ«å¼€æºç»„ä»¶ä¸­çš„å·²çŸ¥æ¼æ´ã€‚</li><li>è®¸å¯è¯åˆè§„æ€§ï¼šæ£€æŸ¥å¼€æºç»„ä»¶çš„è®¸å¯è¯åˆè§„æ€§ã€‚</li></ul><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>ä¸“æ³¨äºå¼€æºç»„ä»¶çš„ç®¡ç†å’Œå®‰å…¨ã€‚</li><li>æä¾›è¯¦ç»†çš„æ¼æ´å’Œè®¸å¯è¯åˆè§„æŠ¥å‘Šã€‚</li><li>ä¸å…¶ä»– Synopsys å·¥å…·é›†æˆï¼Œæä¾›å…¨é¢çš„å®‰å…¨è§£å†³æ–¹æ¡ˆã€‚</li></ul><h3 id="åŒºåˆ«æ€»ç»“"><a href="#åŒºåˆ«æ€»ç»“" class="headerlink" title="åŒºåˆ«æ€»ç»“"></a>åŒºåˆ«æ€»ç»“</h3><ul><li><strong>SonarQube</strong>ï¼šä¸»è¦å…³æ³¨ä»£ç è´¨é‡å’Œä»£ç å¼‚å‘³ï¼Œæä¾›å…¨é¢çš„ä»£ç åº¦é‡å’Œè´¨é‡æŠ¥å‘Šã€‚</li><li><strong>Fireline</strong>ï¼šä¸“æ³¨äºä»£ç å®‰å…¨æ¼æ´çš„æ£€æµ‹ï¼Œé€‚ç”¨äºéœ€è¦é«˜å®‰å…¨æ€§çš„åº”ç”¨ã€‚</li><li><strong>Coverity</strong>ï¼šæä¾›é«˜å‡†ç¡®æ€§çš„é™æ€ä»£ç åˆ†æï¼Œé€‚åˆå¤æ‚å’Œå¤§å‹ä»£ç åº“ã€‚</li><li><strong>Fortify</strong>ï¼šç»¼åˆçš„åº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·ï¼Œè¦†ç›–é™æ€å’ŒåŠ¨æ€åˆ†æï¼Œé€‚åˆå…¨é¢çš„å®‰å…¨æµ‹è¯•éœ€æ±‚ã€‚</li><li><strong>Black Duck</strong>ï¼šä¸“æ³¨äºå¼€æºç»„ä»¶çš„å®‰å…¨å’Œåˆè§„æ€§ç®¡ç†ï¼Œé€‚ç”¨äºä½¿ç”¨å¤§é‡å¼€æºç»„ä»¶çš„é¡¹ç›®ã€‚</li></ul><p>æ¯ç§å·¥å…·éƒ½æœ‰å…¶ç‰¹å®šçš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·åº”æ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚å’Œç¯å¢ƒæ¥å†³å®šã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»£ç æ‰«æå·¥å…·åœ¨è½¯ä»¶å¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œå®ƒä»¬å¸®åŠ©å¼€å‘è€…è¯†åˆ«å’Œä¿®å¤ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯å¯¹ SonarQubeã€Firelineã€Coverityã€Fortify å’Œ Black Duck çš„ä»‹ç»åŠå…¶åŒºåˆ«ï¼š&lt;/p&gt;
&lt;h3 id=&quot;1-SonarQube&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="ä»£ç æ‰«æ" scheme="https://www.silenceboy.com/categories/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/"/>
    
    
      <category term="ä»£ç æ‰«æ" scheme="https://www.silenceboy.com/tags/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/"/>
    
  </entry>
  
  <entry>
    <title>shellè„šæœ¬é‡Œçš„#*@æ˜¯ä»€ä¹ˆæ„æ€</title>
    <link href="https://www.silenceboy.com/2023/09/27/shell%E8%84%9A%E6%9C%AC%E9%87%8C%E7%9A%84-%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D/"/>
    <id>https://www.silenceboy.com/2023/09/27/shellè„šæœ¬é‡Œçš„-æ˜¯ä»€ä¹ˆæ„æ€/</id>
    <published>2023-09-27T09:22:45.000Z</published>
    <updated>2023-12-05T01:44:02.331Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Shellè„šæœ¬ä¸­ï¼Œ<code>${variable#pattern}</code> æ˜¯ä¸€ç§å­—ç¬¦ä¸²å¤„ç†æ–¹å¼ï¼Œå…¶ä¸­ <code>#</code> åè·Ÿç€ä¸€ä¸ªæ¨¡å¼<code>ï¼ˆpatternï¼‰</code>ã€‚è¿™ä¸ªè¯­æ³•çš„ä½œç”¨æ˜¯ä»å­—ç¬¦ä¸²å˜é‡ variable çš„å¼€å¤´åˆ é™¤åŒ¹é… <code>pattern</code> çš„æœ€çŸ­å­ä¸²ï¼Œå¹¶è¿”å›åˆ é™¤åçš„ç»“æœã€‚<code>${variable#*@}</code> çš„å«ä¹‰æ˜¯ï¼š</p><p>â— <code>variable</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«æ–‡æœ¬çš„å­—ç¬¦ä¸²ã€‚</p><p>â— <code>#</code> è¡¨ç¤ºä»å­—ç¬¦ä¸²å¼€å¤´å¼€å§‹åŒ¹é…ã€‚</p><p>â— <code>*@</code> æ˜¯ä¸€ä¸ªé€šé…ç¬¦æ¨¡å¼ï¼Œå®ƒåŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ä»»æ„å­—ç¬¦åºåˆ—ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª @ å­—ç¬¦ã€‚</p><p>æ‰€ä»¥ï¼Œ<code>${variable#*@}</code> çš„ä½œç”¨æ˜¯ä»å˜é‡ <code>variable</code> çš„å¼€å¤´åˆ é™¤åŒ¹é… <code>*@</code> æ¨¡å¼çš„æœ€çŸ­å­ä¸²ï¼Œå¹¶è¿”å›åˆ é™¤åçš„ç»“æœã€‚é€šå¸¸ï¼Œè¿™ç§æ“ä½œç”¨äºå¤„ç†æ–‡æœ¬æˆ–å­—ç¬¦ä¸²ï¼Œä»¥è¿‡æ»¤æ‰æˆ–æå–æ„Ÿå…´è¶£çš„éƒ¨åˆ†ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœ <code>variable</code> çš„å€¼æ˜¯ <code>&quot;user@example.com&quot;</code>ï¼Œé‚£ä¹ˆ <code>${variable#*@}</code> çš„ç»“æœå°†æ˜¯ <code>&quot;example.com&quot;</code>ï¼Œå› ä¸ºå®ƒåˆ é™¤äº†å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ª <code>&quot;@&quot;</code> ç¬¦å·åŠå…¶ä¹‹å‰çš„éƒ¨åˆ†ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨Shellè„šæœ¬ä¸­ï¼Œ&lt;code&gt;${variable#pattern}&lt;/code&gt; æ˜¯ä¸€ç§å­—ç¬¦ä¸²å¤„ç†æ–¹å¼ï¼Œå…¶ä¸­ &lt;code&gt;#&lt;/code&gt; åè·Ÿç€ä¸€ä¸ªæ¨¡å¼&lt;code&gt;ï¼ˆpatternï¼‰&lt;/code&gt;ã€‚è¿™ä¸ªè¯­æ³•çš„ä½œç”¨æ˜¯ä»å­—ç¬¦ä¸²å˜é‡ variable çš„å¼€å¤´åˆ é™¤åŒ¹é… &lt;co
      
    
    </summary>
    
      <category term="shell" scheme="https://www.silenceboy.com/categories/shell/"/>
    
    
      <category term="shell" scheme="https://www.silenceboy.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨goå¼€å‘sseæ¥å£</title>
    <link href="https://www.silenceboy.com/2023/07/11/%E7%94%A8go%E5%BC%80%E5%8F%91sse%E6%8E%A5%E5%8F%A3/"/>
    <id>https://www.silenceboy.com/2023/07/11/ç”¨goå¼€å‘sseæ¥å£/</id>
    <published>2023-07-11T02:50:24.000Z</published>
    <updated>2023-07-21T05:36:57.832Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p>sse æœåŠ¡å™¨å‘é€äº‹ä»¶(Server-Sent Events)ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å•å‘ä¼ é€’æ¶ˆæ¯ã€‚åœ¨ä¸€äº›åªéœ€è¦æ¥å—æœåŠ¡ç«¯æ•°æ®çš„éœ€æ±‚ä¸­å¯ä»¥å–ä»£websocketæŠ€æœ¯ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚</p><p>ç›®å‰goå·²ç»æœ‰ä¸€äº›æ”¯æŒsseçš„åº“ï¼Œæˆ‘è¿™é‡Œé€‰ç”¨äº†ï¼š<code>eventsource.v1</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go get gopkg.in/antage/eventsource.v1</span></span><br></pre></td></tr></table></figure><h2 id="å¹¿æ’­æ¨¡å¼SSE"><a href="#å¹¿æ’­æ¨¡å¼SSE" class="headerlink" title="å¹¿æ’­æ¨¡å¼SSE"></a>å¹¿æ’­æ¨¡å¼SSE</h2><p>å¹¿æ’­æ¨¡å¼SSEæŒ‡ä¸è®¾ç½®äº‹ä»¶åï¼Œæˆ–è€…è¯´æ˜¯ä¸è®¾ç½®é€šé“ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯æ¥æ”¶åŒæ ·çš„æ•°æ®ã€‚</p><p>å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š<a href="https://github.com/silenceboychen/gostudy/tree/main/demo_6/test1" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºç </a></p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"gopkg.in/antage/eventsource.v1"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¿æ’­æ¨¡å¼SSEï¼Œä¸è®¾ç½®äº‹ä»¶åç§°ï¼ˆä¹Ÿå¯ç†è§£ä¸ºé€šé“ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">es := eventsource.New(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">defer</span> es.Close()</span><br><span class="line"></span><br><span class="line">http.Handle(<span class="string">"/"</span>, http.FileServer(http.Dir(<span class="string">"./public"</span>)))</span><br><span class="line">http.Handle(<span class="string">"/events"</span>, es)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="comment">// åªè®¾ç½®å‘é€æ•°æ®ï¼Œä¸æ·»åŠ äº‹ä»¶å</span></span><br><span class="line">es.SendEventMessage(fmt.Sprintf(<span class="string">"send data: %s"</span>, time.Now().Format(<span class="string">"2006-01-02 15:04:05"</span>)), <span class="string">""</span>, <span class="string">""</span>)</span><br><span class="line">log.Printf(<span class="string">"å®¢æˆ·ç«¯è¿æ¥æ•°: %d"</span>, es.ConsumersCount())</span><br><span class="line">time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">log.Println(<span class="string">"Open URL http://localhost:8080/ in your browser."</span>)</span><br><span class="line">err := http.ListenAndServe(<span class="string">":8080"</span>, <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å‰ç«¯</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SSE test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line">        const es = new EventSource("http://localhost:8080/events");</span><br><span class="line">        es.onmessage = function (e) &#123;</span><br><span class="line">            document.getElementById("test")</span><br><span class="line"><span class="xml">                .insertAdjacentHTML("beforeend", "<span class="tag">&lt;<span class="name">li</span>&gt;</span>" + e.data + "<span class="tag">&lt;/<span class="name">li</span>&gt;</span>");</span></span><br><span class="line">        &#125;</span><br><span class="line">        es.onerror = function (e) &#123;</span><br><span class="line">            // readyStateè¯´æ˜</span><br><span class="line">            // 0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­</span><br><span class="line">            // 1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ®</span><br><span class="line">            // 2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥</span><br><span class="line">            console.log("readyState = " + e.currentTarget.readyState);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSE test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ç«¯ä»£ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go run main</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®å‰ç«¯ä»£ç ï¼š <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></p><p>æœåŠ¡ç«¯è¾“å‡ºï¼š</p><p><img src="./images/2023-06-29_20-34_1.png" alt></p><p>å‰ç«¯è¾“å‡ºï¼š</p><p><img src="./images/2023-06-29_20-34.png" alt></p><h2 id="ç‚¹å¯¹ç‚¹æ¨¡å¼SSE"><a href="#ç‚¹å¯¹ç‚¹æ¨¡å¼SSE" class="headerlink" title="ç‚¹å¯¹ç‚¹æ¨¡å¼SSE"></a>ç‚¹å¯¹ç‚¹æ¨¡å¼SSE</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_6/test2" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºä»£ç </a></p><p>å®ç°æ–¹å¼å’Œå¹¿æ’­æ¨¡å¼å·®ä¸å¤šï¼Œåªéœ€åšç®€å•ä¿®æ”¹ï¼š</p><p>æœåŠ¡ç«¯ä»£ç åªéœ€æ·»åŠ äº‹ä»¶åç§°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®äº‹ä»¶åç§°ä¸ºï¼štest-event</span></span><br><span class="line">es.SendEventMessage(fmt.Sprintf(<span class="string">"send data: %s"</span>, time.Now().Format(<span class="string">"2006-01-02 15:04:05"</span>)), <span class="string">"test-event"</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure><p>å‰ç«¯ä»£ç ä¿®æ”¹æ¥æ”¶æ–¹å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">es.addEventListener(<span class="string">"test-event"</span>, (e) =&gt; &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>)</span><br><span class="line">        .insertAdjacentHTML(<span class="string">"beforeend"</span>, <span class="string">"&lt;li&gt;"</span> + e.data + <span class="string">"&lt;/li&gt;"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ”¯æŒè·¨åŸŸçš„SSE"><a href="#æ”¯æŒè·¨åŸŸçš„SSE" class="headerlink" title="æ”¯æŒè·¨åŸŸçš„SSE"></a>æ”¯æŒè·¨åŸŸçš„SSE</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_6/test3" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºä»£ç </a></p><p>ç°åœ¨é¡¹ç›®å¼€å‘åŸºæœ¬ä¸Šéƒ½æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œè¿™æ ·å°±ä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼ŒSSEè§£å†³è·¨åŸŸçš„æ–¹å¼åªéœ€è¦åœ¨<code>new</code>æ–¹æ³•å†…å¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">es := eventsource.New(</span><br><span class="line">    eventsource.DefaultSettings(),</span><br><span class="line">    <span class="function"><span class="keyword">func</span><span class="params">(req *http.Request)</span> [][]<span class="title">byte</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> [][]<span class="keyword">byte</span>&#123;</span><br><span class="line">            []<span class="keyword">byte</span>(<span class="string">"X-Accel-Buffering: no"</span>),</span><br><span class="line">            []<span class="keyword">byte</span>(<span class="string">"Access-Control-Allow-Origin: *"</span>),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>å‰ç«¯åˆ›å»ºsseè¿æ¥æ—¶ä¹Ÿå¯æ·»åŠ å…è®¸è·¨åŸŸå‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> es = <span class="keyword">new</span> EventSource(<span class="string">"http://localhost:8080/events"</span>, &#123; <span class="attr">withCredentials</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure><h2 id="è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜"><a href="#è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜" class="headerlink" title="è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜"></a>è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_6/test4" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºä»£ç </a></p><p>åœ¨Chromeæµè§ˆå™¨ä¸­sseæ–­å¼€åä¼šè‡ªåŠ¨é‡è¿ï¼Œä½†firefoxæµè§ˆå™¨ä¸­æ–­å¼€åä¸ä¼šé‡è¿ï¼Œè§£å†³åŠæ³•æ˜¯ï¼Œå‰ç«¯jsé€šè¿‡åˆ¤æ–­è¿æ¥çŠ¶æ€ä¸»åŠ¨è¿›è¡Œé‡è¿è¯·æ±‚ï¼Œé€šè¿‡åˆ¤æ–­readyStateçš„å€¼è¿›è¡Œé‡æ–°è°ƒç”¨åˆå§‹åŒ–æ“ä½œ</p><p>readyStateè¯´æ˜ï¼š</p><ul><li>0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­</li><li>1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ®</li><li>2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥</li></ul><p>å‰ç«¯ä»£ç å¯ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SSE test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> es = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// è§£å†³ç«ç‹æµè§ˆå™¨æ–­å¼€ä¸ä¼šè‡ªåŠ¨é‡è¿é—®é¢˜</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">initES</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (es == <span class="literal">null</span> || es.readyState == <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="javascript">                es = <span class="keyword">new</span> EventSource(<span class="string">"http://localhost:8080/events"</span>, &#123;<span class="attr">withCredentials</span>: <span class="literal">true</span>&#125;);</span></span><br><span class="line"><span class="javascript">                es.addEventListener(<span class="string">"test-event"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>)</span></span><br><span class="line"><span class="javascript">                        .insertAdjacentHTML(<span class="string">"beforeend"</span>, <span class="string">"&lt;li&gt;"</span> + e.data + <span class="string">"&lt;/li&gt;"</span>);</span></span><br><span class="line">                &#125;);</span><br><span class="line"><span class="javascript">                es.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// readyStateè¯´æ˜</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 0ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å°šæœªå»ºç«‹è¿æ¥æˆ–è¿æ¥å·²è¢«å…³é—­</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 1ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å·²æˆåŠŸè¿æ¥ï¼Œæµè§ˆå™¨æ­£åœ¨å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶åŠæ•°æ®</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 2ï¼šæµè§ˆå™¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¸å†ç»§ç»­å»ºç«‹ä¸æœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">"readyState = "</span> + e.currentTarget.readyState);</span></span><br><span class="line">                    if (es.readyState == 2) &#123;</span><br><span class="line">                        setTimeout(initES, 5000)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        initES()</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSE test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;sse æœåŠ¡å™¨å‘é€äº‹ä»¶(Server-Sent Events)ï¼ŒæœåŠ¡ç«¯å‘å®¢
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·</title>
    <link href="https://www.silenceboy.com/2023/06/26/grpc%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9Agrpc%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
    <id>https://www.silenceboy.com/2023/06/26/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäº”ï¼‰ï¼šgrpcè°ƒè¯•å·¥å…·/</id>
    <published>2023-06-26T02:38:01.000Z</published>
    <updated>2023-07-21T05:36:57.830Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p>å¹³æ—¶æˆ‘ä»¬ç¼–å†™httpçš„apiæ¥å£æ—¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„é€šè¿‡postmanå·¥å…·è¿›è¡Œæ¥å£è°ƒè¯•ï¼Œé‚£ä¹ˆgrpcæ¥å£æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼postmançš„å·¥å…·å¯ä»¥è°ƒè¯•å‘ï¼Ÿ<br>å½“ç„¶å¯ä»¥ï¼Œgithubä¸Šæœ‰ä¸€æ¬¾å·¥å…·<a href="https://github.com/fullstorydev/grpcui" target="_blank" rel="noopener">grpcui</a>ï¼Œä¸“é—¨ç”¨æ¥åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œgrpcæ¥å£è°ƒè¯•ã€‚</p><h2 id="å®‰è£…grpcuiå·¥å…·"><a href="#å®‰è£…grpcuiå·¥å…·" class="headerlink" title="å®‰è£…grpcuiå·¥å…·"></a>å®‰è£…grpcuiå·¥å…·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go install github.com/fullstorydev/grpcui/cmd/grpcui@latest</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®æµ‹è¯•"><a href="#é¡¹ç›®æµ‹è¯•" class="headerlink" title="é¡¹ç›®æµ‹è¯•"></a>é¡¹ç›®æµ‹è¯•</h2><p>æˆ‘ä»¬ä»¥<code>demo_1</code>æµ‹è¯•ä»£ç ä¸ºä¾‹è¿›è¡Œè°ƒè¯•ã€‚é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get github.com/fullstorydev/grpcui</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go run server/main.go</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨grpcui"><a href="#å¯åŠ¨grpcui" class="headerlink" title="å¯åŠ¨grpcui"></a>å¯åŠ¨grpcui</h3><p>å¦èµ·ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œæ³¨æ„è¿™é‡Œçš„ç«¯å£å·è¦å’ŒgrpcæœåŠ¡ç«¯å£å·ä¿æŒä¸€è‡´ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grpcui -plaintext 127.0.0.1:8080</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åœ¨æ‰§è¡Œä»¥ä¸Šå‘½ä»¤çš„æ—¶å€™å‡ºç°ä¸€ä¸‹æŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to compute set of methods to expose: server does not support the reflection API</span><br></pre></td></tr></table></figure><p>éœ€è¦åœ¨<code>server/main.go</code>æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¢åŠ åå°„ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reflection.Register(s)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†è¿è¡Œä»¥ä¸Šå¯åŠ¨grpcuiå‘½ä»¤ï¼Œå¯çœ‹åˆ°ä¸€ä¸‹è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gRPC Web UI available at http://127.0.0.1:41619/</span><br><span class="line">Opening in existing browser session.</span><br></pre></td></tr></table></figure><h2 id="æµè§ˆå™¨è°ƒè¯•"><a href="#æµè§ˆå™¨è°ƒè¯•" class="headerlink" title="æµè§ˆå™¨è°ƒè¯•"></a>æµè§ˆå™¨è°ƒè¯•</h2><p>æµè§ˆå™¨æ‰“å¼€<code>http://127.0.0.1:41619/</code> ,å¯ä»¥çœ‹åˆ°grpcuiè°ƒè¯•é¡µé¢ï¼š<br><img src="/../images/2023-06-18_15-34.png" alt></p><p>ç‚¹å‡»<code>Invoke</code>æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°<code>Response</code>tabé¡µæœ‰å¯¹äºçš„ç›¸åº”æ•°æ®ï¼š<br><img src="/../images/2023-06-18_15-36.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¹³æ—¶æˆ‘ä»¬ç¼–å†™httpçš„apiæ¥å£æ—¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„é€šè¿‡postmanå·¥å…·è¿›è¡Œæ¥
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc</title>
    <link href="https://www.silenceboy.com/2023/06/18/grpc%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E5%8F%8C%E5%90%91%E6%B5%81%E5%BC%8Frpc/"/>
    <id>https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆå››ï¼‰ï¼šåŒå‘æµå¼rpc/</id>
    <published>2023-06-18T07:13:21.000Z</published>
    <updated>2023-07-21T05:36:57.831Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p><code>grpc</code>ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚</p><h2 id="grpcç¯å¢ƒé…ç½®"><a href="#grpcç¯å¢ƒé…ç½®" class="headerlink" title="grpcç¯å¢ƒé…ç½®"></a>grpcç¯å¢ƒé…ç½®</h2><h3 id="protocå®‰è£…"><a href="#protocå®‰è£…" class="headerlink" title="protocå®‰è£…"></a>protocå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y protobuf-compiler</span><br><span class="line">$ protoc --version</span><br><span class="line"></span><br><span class="line">libprotoc 3.6.1</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼š<a href="https://grpc.io/docs/protoc-installation/" target="_blank" rel="noopener">Protocol Buffer Compiler Installation</a></p><h2 id="protocolç¼–è¯‘æ’ä»¶å®‰è£…"><a href="#protocolç¼–è¯‘æ’ä»¶å®‰è£…" class="headerlink" title="protocolç¼–è¯‘æ’ä»¶å®‰è£…"></a>protocolç¼–è¯‘æ’ä»¶å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span><br><span class="line">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls <span class="variable">$GOPATH</span>/bin</span><br><span class="line"></span><br><span class="line">protoc-gen-go  protoc-gen-go-grpc</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®å¼€å‘"><a href="#é¡¹ç›®å¼€å‘" class="headerlink" title="é¡¹ç›®å¼€å‘"></a>é¡¹ç›®å¼€å‘</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_4" target="_blank" rel="noopener">é¡¹ç›®æºç åœ°å€</a></p><h3 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ demo_4</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ client</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ main.go</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.mod</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.sum</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ helloworld</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld_grpc.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ helloworld.proto</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ server</span><br><span class="line">â”‚Â Â      â””â”€â”€ main.go</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo_4 &amp;&amp; <span class="built_in">cd</span> demo_4</span><br><span class="line">$ go mod init</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…grpcä¾èµ–"><a href="#å®‰è£…grpcä¾èµ–" class="headerlink" title="å®‰è£…grpcä¾èµ–"></a>å®‰è£…grpcä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u google.golang.org/grpc</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™protoæ–‡ä»¶"><a href="#ç¼–å†™protoæ–‡ä»¶" class="headerlink" title="ç¼–å†™protoæ–‡ä»¶"></a>ç¼–å†™protoæ–‡ä»¶</h3><p>æµå¼<code>rpc</code>ä½¿ç”¨<code>stream</code>å…³é”®å­—å®šä¹‰</p><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># helloworld/helloworld.proto</span><br><span class="line"></span><br><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> go_package = <span class="string">"/helloworld"</span>;</span><br><span class="line"><span class="keyword">package</span> helloworld;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">rpc</span> SayHello (stream HelloRequest) <span class="keyword">returns</span> (stream HelloReply) &#123;&#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">message HelloRequest &#123;</span></span><br><span class="line"><span class="function">  string name = 1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">HelloReply</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> <span class="class"><span class="keyword">message</span> = 1;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆgoä»£ç "><a href="#ç”Ÿæˆgoä»£ç " class="headerlink" title="ç”Ÿæˆgoä»£ç "></a>ç”Ÿæˆgoä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=. --go_opt=paths=source_relative \</span><br><span class="line">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \</span><br><span class="line">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š <code>helloworld_grpc.pb.go</code>å’Œ<code>helloworld.pb.go</code>ï¼Œ<strong>æ³¨æ„ï¼š</strong> ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3 id="ç¼–å†™æœåŠ¡ç«¯ä»£ç "><a href="#ç¼–å†™æœåŠ¡ç«¯ä»£ç " class="headerlink" title="ç¼–å†™æœåŠ¡ç«¯ä»£ç "></a>ç¼–å†™æœåŠ¡ç«¯ä»£ç </h3><p><code>flag</code>ç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://pkg.go.dev/flag" target="_blank" rel="noopener">https://pkg.go.dev/flag</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_4/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/reflection"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">port = flag.Int(<span class="string">"port"</span>, <span class="number">8080</span>, <span class="string">"The server port"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;</span><br><span class="line">helloworld.UnimplementedHelloServer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span> <span class="title">SayHello</span><span class="params">(stream helloworld.Hello_SayHelloServer)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">n := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">res, err := stream.Recv()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">err = stream.Send(&amp;helloworld.HelloReply&#123;</span><br><span class="line">Message: <span class="string">"server stream: "</span> + res.GetName() + <span class="string">"_"</span> + strconv.Itoa(n),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">n++</span><br><span class="line">log.Printf(<span class="string">"client stream: %s"</span>, res.GetName())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">lis, err := net.Listen(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">":%d"</span>, *port))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to listen: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">s := grpc.NewServer()</span><br><span class="line">reflection.Register(s)</span><br><span class="line">helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;)</span><br><span class="line">log.Printf(<span class="string">"server listening at %v"</span>, lis.Addr())</span><br><span class="line"><span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to serve: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "><a href="#ç¼–å†™å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "></a>ç¼–å†™å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// client/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_4/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/credentials/insecure"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">addr = flag.String(<span class="string">"addr"</span>, <span class="string">"localhost:8080"</span>, <span class="string">"the address to connect to"</span>)</span><br><span class="line">name = flag.String(<span class="string">"name"</span>, <span class="string">"world"</span>, <span class="string">"Name to greet"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"did not connect: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> conn.Close()</span><br><span class="line">c := helloworld.NewHelloClient(conn)</span><br><span class="line"></span><br><span class="line">_, cancel := context.WithTimeout(context.Background(), time.Second)</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">stream, err := c.SayHello(context.Background())</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"stream err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> n := <span class="number">0</span>; n &lt; <span class="number">5</span>; n++ &#123;</span><br><span class="line">err := stream.Send(&amp;helloworld.HelloRequest&#123;Name: *name + <span class="string">"_"</span> + strconv.Itoa(n)&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"client stream err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">res, err := stream.Recv()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"server stream err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰“å°è¿”å›å€¼</span></span><br><span class="line">log.Println(res.GetMessage())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">err = stream.CloseSend()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"close stream err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®è¿è¡Œ"><a href="#é¡¹ç›®è¿è¡Œ" class="headerlink" title="é¡¹ç›®è¿è¡Œ"></a>é¡¹ç›®è¿è¡Œ</h3><p>å¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚</p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ go run server/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 20:51:39 server listening at [::]:8080</span><br><span class="line">2023/06/16 20:51:42 client stream: world_0</span><br><span class="line">2023/06/16 20:51:42 client stream: world_1</span><br><span class="line">2023/06/16 20:51:42 client stream: world_2</span><br><span class="line">2023/06/16 20:51:42 client stream: world_3</span><br><span class="line">2023/06/16 20:51:42 client stream: world_4</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ go run client/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 20:51:42 server stream: world_0_0</span><br><span class="line">2023/06/16 20:51:42 server stream: world_1_1</span><br><span class="line">2023/06/16 20:51:42 server stream: world_2_2</span><br><span class="line">2023/06/16 20:51:42 server stream: world_3_3</span><br><span class="line">2023/06/16 20:51:42 server stream: world_4_4</span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»grpcè°ƒè¯•å·¥å…·ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;grpc&lt;/code&gt;ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµ
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc</title>
    <link href="https://www.silenceboy.com/2023/06/18/grpc%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%81%E5%BC%8Frpc/"/>
    <id>https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯æµå¼rpc/</id>
    <published>2023-06-18T07:12:48.000Z</published>
    <updated>2023-07-21T05:36:57.829Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p><code>grpc</code>ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚</p><h2 id="grpcç¯å¢ƒé…ç½®"><a href="#grpcç¯å¢ƒé…ç½®" class="headerlink" title="grpcç¯å¢ƒé…ç½®"></a>grpcç¯å¢ƒé…ç½®</h2><h3 id="protocå®‰è£…"><a href="#protocå®‰è£…" class="headerlink" title="protocå®‰è£…"></a>protocå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y protobuf-compiler</span><br><span class="line">$ protoc --version</span><br><span class="line"></span><br><span class="line">libprotoc 3.6.1</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼š<a href="https://grpc.io/docs/protoc-installation/" target="_blank" rel="noopener">Protocol Buffer Compiler Installation</a></p><h2 id="protocolç¼–è¯‘æ’ä»¶å®‰è£…"><a href="#protocolç¼–è¯‘æ’ä»¶å®‰è£…" class="headerlink" title="protocolç¼–è¯‘æ’ä»¶å®‰è£…"></a>protocolç¼–è¯‘æ’ä»¶å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span><br><span class="line">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls <span class="variable">$GOPATH</span>/bin</span><br><span class="line"></span><br><span class="line">protoc-gen-go  protoc-gen-go-grpc</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®å¼€å‘"><a href="#é¡¹ç›®å¼€å‘" class="headerlink" title="é¡¹ç›®å¼€å‘"></a>é¡¹ç›®å¼€å‘</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_3" target="_blank" rel="noopener">é¡¹ç›®æºç åœ°å€</a></p><h3 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ demo_3</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ client</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ main.go</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.mod</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.sum</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ helloworld</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld_grpc.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ helloworld.proto</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ server</span><br><span class="line">â”‚Â Â      â””â”€â”€ main.go</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo_3 &amp;&amp; <span class="built_in">cd</span> demo_3</span><br><span class="line">$ go mod init</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…grpcä¾èµ–"><a href="#å®‰è£…grpcä¾èµ–" class="headerlink" title="å®‰è£…grpcä¾èµ–"></a>å®‰è£…grpcä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u google.golang.org/grpc</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™protoæ–‡ä»¶"><a href="#ç¼–å†™protoæ–‡ä»¶" class="headerlink" title="ç¼–å†™protoæ–‡ä»¶"></a>ç¼–å†™protoæ–‡ä»¶</h3><p>æµå¼<code>rpc</code>ä½¿ç”¨<code>stream</code>å…³é”®å­—å®šä¹‰</p><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># helloworld/helloworld.proto</span><br><span class="line"></span><br><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> go_package = <span class="string">"/helloworld"</span>;</span><br><span class="line"><span class="keyword">package</span> helloworld;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">rpc</span> SayHello (stream HelloRequest) <span class="keyword">returns</span> (HelloReply) &#123;&#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">message HelloRequest &#123;</span></span><br><span class="line"><span class="function">  string name = 1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">HelloReply</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> <span class="class"><span class="keyword">message</span> = 1;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆgoä»£ç "><a href="#ç”Ÿæˆgoä»£ç " class="headerlink" title="ç”Ÿæˆgoä»£ç "></a>ç”Ÿæˆgoä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=. --go_opt=paths=source_relative \</span><br><span class="line">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \</span><br><span class="line">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š <code>helloworld_grpc.pb.go</code>å’Œ<code>helloworld.pb.go</code>ï¼Œ<strong>æ³¨æ„ï¼š</strong> ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3 id="ç¼–å†™æœåŠ¡ç«¯ä»£ç "><a href="#ç¼–å†™æœåŠ¡ç«¯ä»£ç " class="headerlink" title="ç¼–å†™æœåŠ¡ç«¯ä»£ç "></a>ç¼–å†™æœåŠ¡ç«¯ä»£ç </h3><p><code>flag</code>ç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://pkg.go.dev/flag" target="_blank" rel="noopener">https://pkg.go.dev/flag</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_3/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/reflection"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">port = flag.Int(<span class="string">"port"</span>, <span class="number">8080</span>, <span class="string">"The server port"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;</span><br><span class="line">helloworld.UnimplementedHelloServer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span> <span class="title">SayHello</span><span class="params">(stream helloworld.Hello_SayHelloServer)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">res, err := stream.Recv()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">return</span> stream.SendAndClose(&amp;helloworld.HelloReply&#123;Message: <span class="string">"over"</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">log.Println(res.Name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">lis, err := net.Listen(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">":%d"</span>, *port))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to listen: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">s := grpc.NewServer()</span><br><span class="line">reflection.Register(s)</span><br><span class="line">helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;)</span><br><span class="line">log.Printf(<span class="string">"server listening at %v"</span>, lis.Addr())</span><br><span class="line"><span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to serve: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "><a href="#ç¼–å†™å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "></a>ç¼–å†™å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// client/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_3/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/credentials/insecure"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">addr = flag.String(<span class="string">"addr"</span>, <span class="string">"localhost:8080"</span>, <span class="string">"the address to connect to"</span>)</span><br><span class="line">name = flag.String(<span class="string">"name"</span>, <span class="string">"world"</span>, <span class="string">"Name to greet"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"did not connect: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> conn.Close()</span><br><span class="line">c := helloworld.NewHelloClient(conn)</span><br><span class="line"></span><br><span class="line">ctx, cancel := context.WithTimeout(context.Background(), time.Second)</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">stream, err := c.SayHello(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"Upload list err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> n := <span class="number">0</span>; n &lt; <span class="number">5</span>; n++ &#123;</span><br><span class="line"><span class="comment">//å‘æµä¸­å‘é€æ¶ˆæ¯</span></span><br><span class="line">err := stream.Send(&amp;helloworld.HelloRequest&#123;Name: <span class="string">"stream client rpc "</span> + strconv.Itoa(n)&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"stream request err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…³é—­æµå¹¶è·å–è¿”å›çš„æ¶ˆæ¯</span></span><br><span class="line">res, err := stream.CloseAndRecv()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"SayHello get response err: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">log.Println(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®è¿è¡Œ"><a href="#é¡¹ç›®è¿è¡Œ" class="headerlink" title="é¡¹ç›®è¿è¡Œ"></a>é¡¹ç›®è¿è¡Œ</h3><p>å¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚</p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ go run server/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 20:24:15 server listening at [::]:8080</span><br><span class="line">2023/06/16 20:24:22 stream client rpc 0</span><br><span class="line">2023/06/16 20:24:22 stream client rpc 1</span><br><span class="line">2023/06/16 20:24:22 stream client rpc 2</span><br><span class="line">2023/06/16 20:24:22 stream client rpc 3</span><br><span class="line">2023/06/16 20:24:22 stream client rpc 4</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go run client/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 20:24:22 message:<span class="string">"over"</span></span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»åŒå‘æµå¼rpcã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;grpc&lt;/code&gt;ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµ
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc</title>
    <link href="https://www.silenceboy.com/2023/06/18/grpc%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B5%81%E5%BC%8Frpc/"/>
    <id>https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆäºŒï¼‰ï¼šæœåŠ¡ç«¯æµå¼rpc/</id>
    <published>2023-06-18T07:11:52.000Z</published>
    <updated>2023-07-21T05:36:57.829Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p><code>grpc</code>ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚</p><h2 id="grpcç¯å¢ƒé…ç½®"><a href="#grpcç¯å¢ƒé…ç½®" class="headerlink" title="grpcç¯å¢ƒé…ç½®"></a>grpcç¯å¢ƒé…ç½®</h2><h3 id="protocå®‰è£…"><a href="#protocå®‰è£…" class="headerlink" title="protocå®‰è£…"></a>protocå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y protobuf-compiler</span><br><span class="line">$ protoc --version</span><br><span class="line"></span><br><span class="line">libprotoc 3.6.1</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼š<a href="https://grpc.io/docs/protoc-installation/" target="_blank" rel="noopener">Protocol Buffer Compiler Installation</a></p><h2 id="protocolç¼–è¯‘æ’ä»¶å®‰è£…"><a href="#protocolç¼–è¯‘æ’ä»¶å®‰è£…" class="headerlink" title="protocolç¼–è¯‘æ’ä»¶å®‰è£…"></a>protocolç¼–è¯‘æ’ä»¶å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span><br><span class="line">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls <span class="variable">$GOPATH</span>/bin</span><br><span class="line"></span><br><span class="line">protoc-gen-go  protoc-gen-go-grpc</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®å¼€å‘"><a href="#é¡¹ç›®å¼€å‘" class="headerlink" title="é¡¹ç›®å¼€å‘"></a>é¡¹ç›®å¼€å‘</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_2" target="_blank" rel="noopener">é¡¹ç›®æºç åœ°å€</a></p><h3 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ demo_2</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ client</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ main.go</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.mod</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.sum</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ helloworld</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld_grpc.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ helloworld.proto</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ server</span><br><span class="line">â”‚Â Â      â””â”€â”€ main.go</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo_2 &amp;&amp; <span class="built_in">cd</span> demo_2</span><br><span class="line">$ go mod init</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…grpcä¾èµ–"><a href="#å®‰è£…grpcä¾èµ–" class="headerlink" title="å®‰è£…grpcä¾èµ–"></a>å®‰è£…grpcä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u google.golang.org/grpc</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™protoæ–‡ä»¶"><a href="#ç¼–å†™protoæ–‡ä»¶" class="headerlink" title="ç¼–å†™protoæ–‡ä»¶"></a>ç¼–å†™protoæ–‡ä»¶</h3><p>æµå¼<code>rpc</code>ä½¿ç”¨<code>stream</code>å…³é”®å­—å®šä¹‰</p><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># helloworld/helloworld.proto</span><br><span class="line"></span><br><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> go_package = <span class="string">"/helloworld"</span>;</span><br><span class="line"><span class="keyword">package</span> helloworld;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">rpc</span> SayHello (HelloRequest) <span class="keyword">returns</span> (stream HelloReply) &#123;&#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">message HelloRequest &#123;</span></span><br><span class="line"><span class="function">  string name = 1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">HelloReply</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> <span class="class"><span class="keyword">message</span> = 1;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆgoä»£ç "><a href="#ç”Ÿæˆgoä»£ç " class="headerlink" title="ç”Ÿæˆgoä»£ç "></a>ç”Ÿæˆgoä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=. --go_opt=paths=source_relative \</span><br><span class="line">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \</span><br><span class="line">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š <code>helloworld_grpc.pb.go</code>å’Œ<code>helloworld.pb.go</code>ï¼Œ<strong>æ³¨æ„ï¼š</strong> ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3 id="ç¼–å†™æœåŠ¡ç«¯ä»£ç "><a href="#ç¼–å†™æœåŠ¡ç«¯ä»£ç " class="headerlink" title="ç¼–å†™æœåŠ¡ç«¯ä»£ç "></a>ç¼–å†™æœåŠ¡ç«¯ä»£ç </h3><p><code>flag</code>ç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://pkg.go.dev/flag" target="_blank" rel="noopener">https://pkg.go.dev/flag</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_2/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/reflection"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">port = flag.Int(<span class="string">"port"</span>, <span class="number">8080</span>, <span class="string">"The server port"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;</span><br><span class="line">helloworld.UnimplementedHelloServer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span> <span class="title">SayHello</span><span class="params">(in *helloworld.HelloRequest, stream helloworld.Hello_SayHelloServer)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">"Received: %v"</span>, in.GetName())</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">stream.Send(&amp;helloworld.HelloReply&#123;Message: fmt.Sprintf(<span class="string">"hello %s---%d"</span>, in.Name, i)&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">lis, err := net.Listen(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">":%d"</span>, *port))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to listen: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">s := grpc.NewServer()</span><br><span class="line">reflection.Register(s)</span><br><span class="line">helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;)</span><br><span class="line">log.Printf(<span class="string">"server listening at %v"</span>, lis.Addr())</span><br><span class="line"><span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to serve: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "><a href="#ç¼–å†™å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "></a>ç¼–å†™å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// client/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_2/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/credentials/insecure"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">addr = flag.String(<span class="string">"addr"</span>, <span class="string">"localhost:8080"</span>, <span class="string">"the address to connect to"</span>)</span><br><span class="line">name = flag.String(<span class="string">"name"</span>, <span class="string">"world"</span>, <span class="string">"Name to greet"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"did not connect: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> conn.Close()</span><br><span class="line">c := helloworld.NewHelloClient(conn)</span><br><span class="line"></span><br><span class="line">ctx, cancel := context.WithTimeout(context.Background(), time.Second)</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">stream, err := c.SayHello(ctx, &amp;helloworld.HelloRequest&#123;Name: *name&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"could not call: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">res, err := stream.Recv()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">"stream error: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log.Printf(<span class="string">"%s"</span>, res.Message)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®è¿è¡Œ"><a href="#é¡¹ç›®è¿è¡Œ" class="headerlink" title="é¡¹ç›®è¿è¡Œ"></a>é¡¹ç›®è¿è¡Œ</h3><p>å¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚</p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go run server/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 18:56:57 server listening at [::]:8080</span><br><span class="line">2023/06/16 18:57:02 Received: world</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ go run client/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 20:11:55 hello world---0</span><br><span class="line">2023/06/16 20:11:55 hello world---1</span><br><span class="line">2023/06/16 20:11:55 hello world---2</span><br><span class="line">2023/06/16 20:11:55 hello world---3</span><br><span class="line">2023/06/16 20:11:55 hello world---4</span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»å®¢æˆ·ç«¯æµå¼rpcã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;grpc&lt;/code&gt;ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµ
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc</title>
    <link href="https://www.silenceboy.com/2023/06/18/grpc%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%8D%95%E9%A1%B9rpc/"/>
    <id>https://www.silenceboy.com/2023/06/18/grpcç³»åˆ—è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šå•é¡¹rpc/</id>
    <published>2023-06-18T07:09:39.000Z</published>
    <updated>2023-07-21T05:36:57.828Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å‘ç¯å¢ƒï¼š</p><p>ç³»ç»Ÿï¼š ubuntu20.04</p><p>goç‰ˆæœ¬ï¼š 1.19</p><p>ç¼–è¾‘å™¨ï¼š goland</p></blockquote><p><code>grpc</code>ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä½¿ç”¨goå¼€å‘grpcæœåŠ¡ï¼Œé™¤äº†å¿…é¡»çš„goè¯­è¨€å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…grpcç›¸å…³å‘½ä»¤ã€‚</p><h2 id="grpcç¯å¢ƒé…ç½®"><a href="#grpcç¯å¢ƒé…ç½®" class="headerlink" title="grpcç¯å¢ƒé…ç½®"></a>grpcç¯å¢ƒé…ç½®</h2><h3 id="protocå®‰è£…"><a href="#protocå®‰è£…" class="headerlink" title="protocå®‰è£…"></a>protocå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y protobuf-compiler</span><br><span class="line">$ protoc --version</span><br><span class="line"></span><br><span class="line">libprotoc 3.6.1</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å…¶ä»–ç³»ç»Ÿç”µè„‘ï¼Œå®‰è£…protocå¯å‚è€ƒæ–‡æ¡£ï¼š<a href="https://grpc.io/docs/protoc-installation/" target="_blank" rel="noopener">Protocol Buffer Compiler Installation</a></p><h2 id="protocolç¼–è¯‘æ’ä»¶å®‰è£…"><a href="#protocolç¼–è¯‘æ’ä»¶å®‰è£…" class="headerlink" title="protocolç¼–è¯‘æ’ä»¶å®‰è£…"></a>protocolç¼–è¯‘æ’ä»¶å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span><br><span class="line">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåå¯ä»¥åœ¨binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls <span class="variable">$GOPATH</span>/bin</span><br><span class="line"></span><br><span class="line">protoc-gen-go  protoc-gen-go-grpc</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®å¼€å‘"><a href="#é¡¹ç›®å¼€å‘" class="headerlink" title="é¡¹ç›®å¼€å‘"></a>é¡¹ç›®å¼€å‘</h2><p><a href="https://github.com/silenceboychen/gostudy/tree/main/demo_1" target="_blank" rel="noopener">é¡¹ç›®æºç åœ°å€</a></p><h3 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ demo_1</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ client</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ main.go</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.mod</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.sum</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ helloworld</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld_grpc.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloworld.pb.go</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ helloworld.proto</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ server</span><br><span class="line">â”‚Â Â      â””â”€â”€ main.go</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo_1 &amp;&amp; <span class="built_in">cd</span> demo_1</span><br><span class="line">$ go mod init</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…grpcä¾èµ–"><a href="#å®‰è£…grpcä¾èµ–" class="headerlink" title="å®‰è£…grpcä¾èµ–"></a>å®‰è£…grpcä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u google.golang.org/grpc</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™protoæ–‡ä»¶"><a href="#ç¼–å†™protoæ–‡ä»¶" class="headerlink" title="ç¼–å†™protoæ–‡ä»¶"></a>ç¼–å†™protoæ–‡ä»¶</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># helloworld/helloworld.proto</span><br><span class="line"></span><br><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> go_package = <span class="string">"/helloworld"</span>;</span><br><span class="line"><span class="keyword">package</span> helloworld;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">rpc</span> SayHello (HelloRequest) <span class="keyword">returns</span> (HelloReply) &#123;&#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">message HelloRequest &#123;</span></span><br><span class="line"><span class="function">  string name = 1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">HelloReply</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> <span class="class"><span class="keyword">message</span> = 1;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆgoä»£ç "><a href="#ç”Ÿæˆgoä»£ç " class="headerlink" title="ç”Ÿæˆgoä»£ç "></a>ç”Ÿæˆgoä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=. --go_opt=paths=source_relative \</span><br><span class="line">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \</span><br><span class="line">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šåœ¨helloworldç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š <code>helloworld_grpc.pb.go</code>å’Œ<code>helloworld.pb.go</code>ï¼Œ<strong>æ³¨æ„ï¼š</strong> ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3 id="ç¼–å†™æœåŠ¡ç«¯ä»£ç "><a href="#ç¼–å†™æœåŠ¡ç«¯ä»£ç " class="headerlink" title="ç¼–å†™æœåŠ¡ç«¯ä»£ç "></a>ç¼–å†™æœåŠ¡ç«¯ä»£ç </h3><p><code>flag</code>ç”¨æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://pkg.go.dev/flag" target="_blank" rel="noopener">https://pkg.go.dev/flag</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_1/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/reflection"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">port = flag.Int(<span class="string">"port"</span>, <span class="number">8080</span>, <span class="string">"The server port"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;</span><br><span class="line">helloworld.UnimplementedHelloServer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span> <span class="title">SayHello</span><span class="params">(ctx context.Context, in *helloworld.HelloRequest)</span> <span class="params">(*helloworld.HelloReply, error)</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">"Received: %v"</span>, in.GetName())</span><br><span class="line"><span class="keyword">return</span> &amp;helloworld.HelloReply&#123;Message: <span class="string">"Hello "</span> + in.GetName()&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">lis, err := net.Listen(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">":%d"</span>, *port))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to listen: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">s := grpc.NewServer()</span><br><span class="line">reflection.Register(s)</span><br><span class="line">helloworld.RegisterHelloServer(s, &amp;server&#123;&#125;)</span><br><span class="line">log.Printf(<span class="string">"server listening at %v"</span>, lis.Addr())</span><br><span class="line"><span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to serve: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "><a href="#ç¼–å†™å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="ç¼–å†™å®¢æˆ·ç«¯ä»£ç "></a>ç¼–å†™å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// client/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"flag"</span></span><br><span class="line"><span class="string">"github.com/silenceboychen/gostudy/demo_1/helloworld"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc/credentials/insecure"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">addr = flag.String(<span class="string">"addr"</span>, <span class="string">"localhost:8080"</span>, <span class="string">"the address to connect to"</span>)</span><br><span class="line">name = flag.String(<span class="string">"name"</span>, <span class="string">"world"</span>, <span class="string">"Name to greet"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line">conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"did not connect: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> conn.Close()</span><br><span class="line">c := helloworld.NewHelloClient(conn)</span><br><span class="line"></span><br><span class="line">ctx, cancel := context.WithTimeout(context.Background(), time.Second)</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">r, err := c.SayHello(ctx, &amp;helloworld.HelloRequest&#123;Name: *name&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"could not greet: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">"Greeting: %s"</span>, r.GetMessage())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®è¿è¡Œ"><a href="#é¡¹ç›®è¿è¡Œ" class="headerlink" title="é¡¹ç›®è¿è¡Œ"></a>é¡¹ç›®è¿è¡Œ</h3><p>å¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«è¿è¡ŒæœåŠ¡ç«¯ä»£ç å’Œå®¢æˆ·ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç è¦å…ˆè¿è¡Œã€‚</p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go run server/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 18:56:57 server listening at [::]:8080</span><br><span class="line">2023/06/16 18:57:02 Received: world</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go run client/main.go</span><br><span class="line"></span><br><span class="line">2023/06/16 18:57:02 Greeting: Hello world</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¾¿æ˜¯goå®ç°å•é¡¹rpcçš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ­å–œä½ ï¼Œä»¥åŠæˆåŠŸå…¥é—¨grpcï¼Œä¸‹ä¸€ç¯‡å°†å‘å¤§å®¶ä»‹ç»æœåŠ¡ç«¯æµå¼rpcã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼š ubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼š 1.19&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘å™¨ï¼š goland&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;grpc&lt;/code&gt;ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæµ
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu20.04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®</title>
    <link href="https://www.silenceboy.com/2023/06/14/ubuntu20-04%E7%A6%81%E7%94%A8%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E7%B9%81%E7%AE%80%E4%BD%93%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%BE%E7%BD%AE/"/>
    <id>https://www.silenceboy.com/2023/06/14/ubuntu20-04ç¦ç”¨æœç‹—è¾“å…¥æ³•ç¹ç®€ä½“å¿«æ·é”®è®¾ç½®/</id>
    <published>2023-06-14T03:00:52.000Z</published>
    <updated>2023-07-21T05:36:57.831Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ubuntu20.04ç³»ç»Ÿä¸Šå®‰è£…äº†æœç‹—è¾“å…¥æ³•ä¹‹åï¼Œå‘ç°<code>vscodeï¼Œideaï¼Œgolang</code>ç­‰ç¼–è¾‘å™¨çš„å…¨å±€æœç´¢å¿«æ·é”®<code>Ctrl+Shift+F</code>æ— æ³•ä½¿ç”¨äº†ï¼Œç»æ’æŸ¥å‘ç°æ˜¯å› ä¸ºæœç‹—è¾“å…¥æ³•å ç”¨äº†è¯¥å¿«æ·é”®ï¼Œæ˜¯æœç‹—è¾“å…¥æ³•çš„ç¹ç®€ä½“åˆ‡æ¢å¿«æ·é”®ã€‚æ‰“å¼€æœç‹—è¾“å…¥æ³•çš„è®¾ç½®é¡µé¢å¯ä»¥åœ¨é«˜çº§é€‰é¡¹é‡Œçœ‹åˆ°ã€‚</p><p><img src="/../images/2023-06-14_11-07.png" alt></p><p>ä½†æ˜¯åœ¨è®¾ç½®é‡Œå–æ¶ˆç®€ç¹åˆ‡æ¢å¿«æ·é”®çš„å‹¾é€‰ä¿å­˜ä¹‹åå‘ç°æ— æ•ˆæœï¼Œå¿«æ·é”®ä¾ç„¶è¢«å ç”¨ã€‚</p><p>æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><ol><li>ä¿®æ”¹æœç‹—è¾“å…¥æ³•é…ç½®æ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.config/sogoupinyin/conf/env.ini</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°<code>ShortCutFanJian</code>é…ç½®ï¼Œå°†å€¼æ”¹ä¸º0ï¼›é»˜è®¤1ï¼Œç­‰äºå¼€å¯ï¼›æ”¹ä¸º0è¡¨ç¤ºå…³é—­</p><ol start="2"><li>æ‰“å¼€ç³»ç»Ÿè¾“å…¥æ³•é…ç½®</li></ol><p><img src="/../images/2023-06-14_13-23.png" alt></p><ol start="3"><li><p>é™„åŠ ç»„ä»¶ä¸­æ‰¾åˆ°ç®€ç¹è½¬æ¢ï¼Œç‚¹å‡»é…ç½®<br><img src="/../images/2023-06-14_13-25.png" alt></p></li><li><p>å°†é»˜è®¤å¿«æ·é”®è®¾ç½®ä¸ºç©º, ä¿å­˜å³å¯ã€‚<br><img src="/../images/2023-06-14_13-26.png" alt></p></li></ol><p>å¦‚æœå‘ç°æœªç”Ÿæ•ˆï¼Œéœ€è¦é‡å¯ç”µè„‘ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘åœ¨ubuntu20.04ç³»ç»Ÿä¸Šå®‰è£…äº†æœç‹—è¾“å…¥æ³•ä¹‹åï¼Œå‘ç°&lt;code&gt;vscodeï¼Œideaï¼Œgolang&lt;/code&gt;ç­‰ç¼–è¾‘å™¨çš„å…¨å±€æœç´¢å¿«æ·é”®&lt;code&gt;Ctrl+Shift+F&lt;/code&gt;æ— æ³•ä½¿ç”¨äº†ï¼Œç»æ’æŸ¥å‘ç°æ˜¯å› ä¸ºæœç‹—è¾“å…¥æ³•å ç”¨äº†è¯¥å¿«æ·é”®ï¼Œæ˜¯æœç‹—è¾“å…¥æ³•çš„ç¹ç®€ä½“åˆ‡æ¢
      
    
    </summary>
    
      <category term="linux" scheme="https://www.silenceboy.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.silenceboy.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹</title>
    <link href="https://www.silenceboy.com/2023/06/08/gomobile%E5%BC%80%E5%8F%91%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B/"/>
    <id>https://www.silenceboy.com/2023/06/08/gomobileå¼€å‘å®‰å“åº”ç”¨ç¯å¢ƒæ­å»ºå®Œæ•´æµç¨‹/</id>
    <published>2023-06-08T05:33:05.000Z</published>
    <updated>2023-06-08T05:34:01.833Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>goç¯å¢ƒæ­å»ºä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚</p><p>ä»¥ä¸‹å†…å®¹çš„æ‰§è¡Œç¯å¢ƒä¸ºï¼š</p><p>ç³»ç»Ÿï¼šubuntu20.04</p><p>goç‰ˆæœ¬ï¼šv1.19</p></blockquote><h1 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h1><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªgoå¼€å‘å®‰å“åº”ç”¨çš„æµ‹è¯•ç›®å½•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir $GOPATH/src/goapp &amp;&amp; cd $GOPATH/src/goapp</span><br><span class="line">$ go mod init</span><br></pre></td></tr></table></figure><p>åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å–å®˜æ–¹æä¾›çš„ç¤ºä¾‹é¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -d golang.org/x/mobile/example/basic</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…gomibile"><a href="#å®‰è£…gomibile" class="headerlink" title="å®‰è£…gomibile"></a>å®‰è£…gomibile</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go install golang.org/x/mobile/cmd/gomobile@latest</span><br><span class="line">$ gomobile init</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰“åŒ…å®‰å“åº”ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gomobile build -target=android -androidapi 19 golang.org/x/mobile/example/basic</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šå‘ç°ä»¥ä¸‹ç›¸å…³é”™è¯¯ï¼š</p><pre><code>gomobile: could not locate Android SDK: stat /home/test/Android/Sdk: no such file or directory; Android SDK was not found at /home/test/Android/Sdkgomobile: no usable NDK in /home/test/Android/Sdk: open /home/test/Android/Sdk/ndk: no such file or directory, open /home/test/Android/Sdk/ndk-bundle/meta/platforms.json: no such file or directory</code></pre><p>è¿™æ˜¯å› ä¸ºæœ¬åœ°æ²¡æœ‰é…ç½®å®‰å“å¼€å‘ç¯å¢ƒå¯¼è‡´çš„ã€‚</p><h1 id="å®‰å“å¼€å‘ç¯å¢ƒæ­å»º"><a href="#å®‰å“å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="å®‰å“å¼€å‘ç¯å¢ƒæ­å»º"></a>å®‰å“å¼€å‘ç¯å¢ƒæ­å»º</h1><h2 id="Android-Studioå®‰è£…"><a href="#Android-Studioå®‰è£…" class="headerlink" title="Android Studioå®‰è£…"></a>Android Studioå®‰è£…</h2><p>è®¿é—®è°·æ­Œä¸­å›½å¼€å‘è€…ç½‘ç«™ä¸‹è½½ Android Studio ç¼–è¾‘å™¨ï¼š<a href="https://developer.android.google.cn/studio" target="_blank" rel="noopener">https://developer.android.google.cn/studio</a></p><p>ä¸‹è½½å®Œæˆåæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†å®‰è£…åŒ…ç§»åˆ°/optç›®å½•ä¸‹ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™</span></span><br><span class="line">$ sudo mv android-studio-2022.2.1.20-linux.tar.gz /opt</span><br><span class="line"><span class="comment"># è¿›å…¥/optç›®å½•</span></span><br><span class="line">$ <span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># è§£å‹æ–‡ä»¶ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™</span></span><br><span class="line">$ sudo tar -xzvf android-studio-2022.2.1.20-linux.tar.gz</span><br><span class="line"><span class="comment"># è¿è¡ŒAndroid Studio</span></span><br><span class="line">$ ./android-studio/bin/studio.sh</span><br><span class="line"></span><br><span class="line">==========================================================</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³åœ¨ä»»æ„ä½ç½®æ‰“å¼€android studioï¼Œå¯é…ç½®è½¯è¿æ¥</span></span><br><span class="line">$ sudo ln -s /opt/android-studio/bin/studio.sh /usr/bin/android-studio</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å®Œæˆä»¥ååœ¨ä»»æ„ä½ç½®æ‰§è¡Œandroid-studioå³å¯æ‰“å¼€åº”ç”¨</span></span><br><span class="line">$ android-studio</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡æ‰“å¼€android-studioéœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼Œä¸€ç›´é€‰æ‹©ä¸‹ä¸€æ­¥è®¾ç½®å³å¯ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š</p><ol><li>é€‰æ‹©è‡ªå®šä¹‰å®‰è£…</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff6726dec7c44037bcedd07064fa7050~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><ol start="2"><li>æ’ä»¶å®‰è£…ï¼Œå¯ä»¥å…¨é€‰</li></ol><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ecf62541fd1343e9a952444c91f418a2~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>æ’ä»¶å®‰è£…å®Œæˆä¹‹åç‚¹å‡»Finishå³å¯æ‰“å¼€åº”ç”¨ã€‚</p><h2 id="å®‰è£…NDK"><a href="#å®‰è£…NDK" class="headerlink" title="å®‰è£…NDK"></a>å®‰è£…NDK</h2><p>Android studioå®‰è£…å®Œæˆåå¹¶æ²¡æœ‰ä¸‡äº‹å¤§å‰ï¼Œé»˜è®¤å¹¶æ²¡å®‰è£…NDKï¼Œéœ€è¦è‡ªå·±æ‰‹å·¥å†å®‰è£…ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7f3ae9976b04abaad1491894d82d356~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/040bf7ba8aa54a4285b2f2996774a5b0~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>ç‚¹å‡»okä¼šè‡ªåŠ¨ä¸‹è½½é€‰æ‹©çš„æ’ä»¶ã€‚</p><h1 id="ç¼–è¯‘å®‰å“åº”ç”¨"><a href="#ç¼–è¯‘å®‰å“åº”ç”¨" class="headerlink" title="ç¼–è¯‘å®‰å“åº”ç”¨"></a>ç¼–è¯‘å®‰å“åº”ç”¨</h1><p>æ­¤æ—¶ç»§ç»­å›åˆ°ä¹‹å‰çš„é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œå®‰å“æ„å»ºå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gomobile build -target=android -androidapi 19 golang.org/x/mobile/example/basic</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ¬¡æ²¡æœ‰å‡ºç°æŠ¥é”™ï¼Œå¹¶ä¸”ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªbasic.apkæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å³ä¸ºæ‰“åŒ…æˆåŠŸçš„å®‰å“åº”ç”¨ï¼Œå¯ä»¥å®‰è£…ä¸€ä¸ªå®‰å“æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•äº†ã€‚</p><h1 id="å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨"><a href="#å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨" class="headerlink" title="å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨"></a>å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨</h1><p>æ¨¡æ‹Ÿå™¨æˆ‘é€‰ç”¨äº†Anbox</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo snap install --devmode --edge anbox</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®‰å“æ¨¡æ‹Ÿå™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ anbox.appmgr</span><br></pre></td></tr></table></figure><p>æˆ‘æ¯”è¾ƒé¡ºåˆ©æ²¡æœ‰é‡åˆ°æŠ¥é”™ï¼Œå¦‚æœé‡åˆ°æ¨¡æ‹Ÿå™¨å¯åŠ¨æŠ¥é”™ï¼Œå¯ä»¥å‚è€ƒæ–‡ç« ï¼š<a href="https://juejin.cn/post/7152407243974148127" target="_blank" rel="noopener">https://juejin.cn/post/7152407243974148127</a> è§£å†³</p><p>æ‰“å¼€åçš„ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/279fd239661844cd8ec94a9449b20cb1~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h1 id="æµ‹è¯•åº”ç”¨"><a href="#æµ‹è¯•åº”ç”¨" class="headerlink" title="æµ‹è¯•åº”ç”¨"></a>æµ‹è¯•åº”ç”¨</h1><p>å®‰è£…å®‰å“åº”ç”¨è¿˜éœ€è¦adbå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install android-tools-adb -y</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æœ€å¼€å§‹çš„é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…åº”ç”¨ï¼Œæ­¤æ—¶å®‰å“æ¨¡æ‹Ÿå™¨å¿…é¡»æ˜¯æ‰“å¼€çš„çŠ¶æ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ asb install ./basic.apk</span><br><span class="line"># æˆ–è€…</span><br><span class="line">$ adb install /home/test/go/src/goapp/basic.apk</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåå³å¯åœ¨æ¨¡æ‹Ÿå™¨ä¸­çœ‹åˆ°è¯¥åº”ç”¨</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b43efa40ce324a9caf8b08ae2759d9d5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>å•å‡»æ‰“å¼€ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/902dd6d8b0064000b929cde2f445f482~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>æ­¤æ–‡ç« ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¸®åŠ©ä½ äº†è§£å¦‚ä½•ä½¿ç”¨golangå¼€å‘å®‰å“åº”ç”¨çš„æµç¨‹ï¼Œæµç¨‹æ‰“é€šä¹‹åï¼Œå¯ä»¥ç»“åˆè‡ªå·±çš„æƒ³æ³•ï¼Œåšä¸€äº›è‡ªå·±çš„åº”ç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;goç¯å¢ƒæ­å»ºä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹çš„æ‰§è¡Œç¯å¢ƒä¸ºï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿï¼šubuntu20.04&lt;/p&gt;
&lt;p&gt;goç‰ˆæœ¬ï¼šv1.19&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;é¡¹ç›®åˆ›å»º&quot;&gt;&lt;a href=&quot;#é¡¹ç›®åˆ›å»º&quot; cla
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>goè¯­è¨€1.18 go:linkname must refer to declared function or variableè§£å†³åŠæ³•</title>
    <link href="https://www.silenceboy.com/2022/07/12/go%E8%AF%AD%E8%A8%801-18-go-linkname-must-refer-to-declared-function-or-variable%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>https://www.silenceboy.com/2022/07/12/goè¯­è¨€1-18-go-linkname-must-refer-to-declared-function-or-variableè§£å†³åŠæ³•/</id>
    <published>2022-07-12T06:13:58.000Z</published>
    <updated>2022-07-12T06:14:58.301Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨macosç¯å¢ƒä¸­ï¼Œgo1.18åˆšåˆšéƒ¨ç½²åï¼Œä¼šæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">golang.org/x/sys/unix</span><br><span class="line"># golang.org/x/sys/unix</span><br><span class="line">vendor/golang.org/x/sys/unix/syscall_darwin.1_13.go:29:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.1_13.go:27:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.1_13.go:40:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:28:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:43:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:59:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:75:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:90:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:105:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:121:3: //go:linkname must refer to declared function or variable</span><br><span class="line">vendor/golang.org/x/sys/unix/zsyscall_darwin_amd64.go:121:3: too many errors</span><br></pre></td></tr></table></figure><p>è§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p><p>1.è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u golang.org/x/sys</span><br></pre></td></tr></table></figure><p>2.è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod vendor</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨macosç¯å¢ƒä¸­ï¼Œgo1.18åˆšåˆšéƒ¨ç½²åï¼Œä¼šæŠ¥é”™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span 
      
    
    </summary>
    
      <category term="go" scheme="https://www.silenceboy.com/categories/go/"/>
    
    
      <category term="go" scheme="https://www.silenceboy.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«</title>
    <link href="https://www.silenceboy.com/2022/05/20/macbook%E5%A6%82%E4%BD%95%E5%8D%B8%E8%BD%BD%E5%A4%A9%E7%A9%BA%E5%8D%AB%E5%A3%AB/"/>
    <id>https://www.silenceboy.com/2022/05/20/macbookå¦‚ä½•å¸è½½å¤©ç©ºå«å£«/</id>
    <published>2022-05-20T06:07:27.000Z</published>
    <updated>2022-05-20T06:19:34.769Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>é¦–å…ˆæ‰¾åˆ°å®‰è£…å¤©ç©ºå«å£«çš„ç›®å½•ï¼š<code>/Library/Application Support/SkyGuard</code></p></li><li><p>ç”µè„‘å…³æœºï¼Œé•¿æŒ‰å¼€æœºé”®ç›´åˆ°è¿›å…¥recoveryæ¨¡å¼, ç‚¹è‡ªå·±çš„ç”¨æˆ·ï¼Œè¾“å…¥å¯†ç ï¼Œç‚¹ä¸‹ä¸€æ­¥ï¼Œç„¶ååˆ°å·¦ä¸Šæ–¹æ‰¾åˆ°ç»ˆç«¯æ‰“å¼€</p></li><li><p>diskutil list æŸ¥çœ‹ç›®å‰çš„ç£ç›˜, æ‰¾åˆ°æ ‡è®°æœ‰<code>synthesized</code>çš„ç£ç›˜ï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ç›˜ï¼ˆæœ‰dataå…³é”®å­—ï¼‰ï¼Œè¿™é‡Œå‡è®¾ä¸ºï¼š<code>/dev/disk3s3</code></p></li><li><p>æ‰§è¡Œ<code>diskutil mount /dev/disk3s3</code>, å¯èƒ½ä¼šæŠ¥ <code>this is an encrypted and locked APFS Volume</code>çš„é”™ï¼Œæ ¹æ®æç¤ºæ‰§è¡Œï¼š<code>diskutil apfs unlockVolume /dev/disk3s3</code>ï¼Œç„¶åè¾“å…¥å¯†ç ã€‚å†æ¬¡æ‰§è¡Œ<code>diskutil mount /dev/disk3s3</code>å³å¯ã€‚</p></li><li><p>è¿›å…¥<code>/Volumes/Macintosh HD/Library/Application Support</code>ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°æœ‰<code>SkyGuard</code>æ–‡ä»¶ã€‚</p></li><li><p>æ‰§è¡Œ<code>rm -rf SkyGuard</code>åˆ é™¤å¤©ç©ºä½ç½®æ–‡ä»¶ç›®å½•</p></li><li><p><code>reboot</code>é‡å¯ç”µè„‘ï¼Œå‘ç°å¤©ç©ºå«å£«å·²æˆåŠŸå¸è½½</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;é¦–å…ˆæ‰¾åˆ°å®‰è£…å¤©ç©ºå«å£«çš„ç›®å½•ï¼š&lt;code&gt;/Library/Application Support/SkyGuard&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç”µè„‘å…³æœºï¼Œé•¿æŒ‰å¼€æœºé”®ç›´åˆ°è¿›å…¥recoveryæ¨¡å¼, ç‚¹è‡ªå·±çš„ç”¨æˆ·ï¼Œè¾“å…¥å¯†ç ï¼Œç‚¹ä¸‹ä¸€æ­¥ï¼Œç„¶ååˆ°
      
    
    </summary>
    
      <category term="mac" scheme="https://www.silenceboy.com/categories/mac/"/>
    
    
      <category term="mac" scheme="https://www.silenceboy.com/tags/mac/"/>
    
      <category term="å¤©ç©ºå«å£«" scheme="https://www.silenceboy.com/tags/%E5%A4%A9%E7%A9%BA%E5%8D%AB%E5%A3%AB/"/>
    
  </entry>
  
</feed>
